<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Academic</title>
    <link>https://huhuaping.netlify.app/post/</link>
      <atom:link href="https://huhuaping.netlify.app/post/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><copyright>huhuaping@2019</copyright><lastBuildDate>Tue, 23 Feb 2021 00:00:00 +0000</lastBuildDate>
    <image>
      <url>https://huhuaping.netlify.app/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_512x512_fill_lanczos_center_2.png</url>
      <title>Posts</title>
      <link>https://huhuaping.netlify.app/post/</link>
    </image>
    
    <item>
      <title>R函数踩坑</title>
      <link>https://huhuaping.netlify.app/2021/02/23/variaty-of-r-function/</link>
      <pubDate>Tue, 23 Feb 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/02/23/variaty-of-r-function/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/02/23/variaty-of-r-function/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#分析场景与r包&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 分析场景与R包&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#统计制表-vs-janitortabyl&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.1&lt;/span&gt; 统计制表 vs janitor::tabyl&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#分析场景与r函数&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 分析场景与R函数&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#数据类型读取&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 数据类型读取&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#生成重复数据rep&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 生成重复数据rep()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;分析场景与r包&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 分析场景与R包&lt;/h1&gt;
&lt;div id=&#34;统计制表-vs-janitortabyl&#34; class=&#34;section level2&#34; number=&#34;1.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.1&lt;/span&gt; 统计制表 vs janitor::tabyl&lt;/h2&gt;
&lt;p&gt;tabyls: a tidy, fully-featured approach to counting things. &lt;a href=&#34;https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html&#34;&gt;see link&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;方便统计频次和频率&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;方便添加行合计&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;方便调整数据格式（百分数等）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可以结合&lt;code&gt;knitr::kable()&lt;/code&gt;输出&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;不足&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;janitor::tabyl()&lt;/code&gt;仅适合处理&lt;strong&gt;原始数据&lt;/strong&gt;，并且是&lt;code&gt;data.frame&lt;/code&gt;或&lt;code&gt;vector&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;分析场景与r函数&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 分析场景与R函数&lt;/h1&gt;
&lt;div id=&#34;数据类型读取&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 数据类型读取&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;读取spss文件。为了避免出现编码错误（中文等多字节问题），建议使用&lt;code&gt;foreign::read.spss()&lt;/code&gt;函数，而不宜使用&lt;code&gt;haven::read_sav()&lt;/code&gt;函数&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_computer&amp;lt;- haven::read_sav(&amp;quot;../data/case-3.6-computer-sales.sav&amp;quot;,encoding = &amp;quot;UTF-8&amp;quot;, .name_repair = &amp;quot;unique&amp;quot;)

knitr::kable(df_computer)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_computer&amp;lt;- foreign::read.spss(&amp;quot;../data/case-3.6-computer-sales.sav&amp;quot;, to.data.frame=TRUE)
knitr::kable(df_computer)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;生成重复数据rep&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 生成重复数据rep()&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;分析场景&lt;/strong&gt;：生成指定的重复数据，要求指定被重复的&lt;code&gt;vector(&#34;char vec&#34;)&lt;/code&gt;，以及指定各自重复的次数&lt;code&gt;vector(&#34;times vec&#34;)&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;踩坑函数1&lt;/strong&gt;：直接&lt;code&gt;rep()&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(magrittr)
brand&amp;lt;- c(&amp;quot;果汁&amp;quot;,&amp;quot;矿泉水&amp;quot;,&amp;quot;绿茶&amp;quot;,&amp;quot;其他&amp;quot;,&amp;quot;碳酸饮料&amp;quot;)
reps &amp;lt;- c(6L, 10L,11L, 8L,15L)

rep(brand, reps)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt; [1] &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;    
 [7] &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;  
[13] &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;    
[19] &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;    
[25] &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;    
[31] &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;碳酸饮料&amp;quot;
[37] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;
[43] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;
[49] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;踩坑函数2&lt;/strong&gt;：&lt;code&gt;mapply()&lt;/code&gt; + &lt;code&gt;rep()&lt;/code&gt;。这个要复杂一点。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;drink &amp;lt;- mapply(FUN = rep, x=brand, times = reps) %&amp;gt;%
  unlist()

names(drink) &amp;lt;-NULL

drink&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt; [1] &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;     &amp;quot;果汁&amp;quot;    
 [7] &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;  
[13] &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;矿泉水&amp;quot;   &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;    
[19] &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;    
[25] &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;绿茶&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;    
[31] &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;其他&amp;quot;     &amp;quot;碳酸饮料&amp;quot;
[37] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;
[43] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;
[49] &amp;quot;碳酸饮料&amp;quot; &amp;quot;碳酸饮料&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Thread：统计学流派与演变</title>
      <link>https://huhuaping.netlify.app/2021/02/09/statistics-stream-and-structure/</link>
      <pubDate>Tue, 09 Feb 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/02/09/statistics-stream-and-structure/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/02/09/statistics-stream-and-structure/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#相关材料&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 相关材料&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#布尔巴基学派&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 布尔巴基学派&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#数学原理&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 数学原理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#被遗忘的布尔巴基&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 被遗忘的布尔巴基&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#若干思考&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 若干思考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;相关材料&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 相关材料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;arXiv的一篇综述性文献“What are the most important statistical ideas of the past 50 years?”（&lt;a href=&#34;http://arxiv.org/abs/2012.00174&#34;&gt;Gelman and Vehtari, 2020&lt;/a&gt;）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“得到”栏目“卓克科学思维课”第058期“计算：现代数学研究什么（4）”。布尔巴基学派（&lt;a href=&#34;https://baike.baidu.com/item/%E5%B8%83%E5%B0%94%E5%B7%B4%E5%9F%BA%E5%AD%A6%E6%B4%BE&#34;&gt;百度百科&lt;/a&gt;）坚持“结构主义”观点，力图把整个数学建立在集合论的基础之上，并对整个数学作完全公理化处理。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;布尔巴基学派&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 布尔巴基学派&lt;/h1&gt;
&lt;div id=&#34;数学原理&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 数学原理&lt;/h2&gt;
&lt;p&gt;在布尔巴基的研究方法中，数学结构才是核心，而过往几百年的数学家们熟悉的像代数、集合、数论、分析，这些方法在布尔巴基这里已经完全不存在了。&lt;/p&gt;
&lt;p&gt;在新的视角下，从前完全不是一个领域的对象，就有可能出现在同一个结构中。比如线性代数跟初等几何这两个东西就属于同一种结构，简称同构。&lt;/p&gt;
&lt;p&gt;费马大定理的证明过程，这个猜想最终的证明，就是通过把一个椭圆曲线领域的问题同构映射到了另外一个叫做模形式上的问题，最终才证明的。通过这样的方式证明的定理，还不止费马大定理，还有莫德尔猜想。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;被遗忘的布尔巴基&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 被遗忘的布尔巴基&lt;/h2&gt;
&lt;p&gt;但这么做也有明显的劣势，就是它就像一个黑洞一样。我们从集合公理化的各项公理中挑出几条，用它们构建出一个新的集合，这个集合里的元素也许能跟当前数学分支中某一个分支对应上，它们是同构的。但更有可能是对应不上，跟任何数学分支都没有对应。&lt;/p&gt;
&lt;p&gt;这个新结构实际就相当于一个自成体系的新的数学分支。可是数学这门学科，当初某些分支是怎么诞生的呢？它多少都是跟解决一个问题挂钩的，而当没有实际难题要解决的时候，创立出来一个又一个新的分支，它们还自成系统，新创生出来的分支，实际应用在哪儿呢？一般来说是没有什么应用的，它就找不到落脚点，所以那就纯粹成了飘在人类抽象智力活动中的一种结构，一些问题了。&lt;/p&gt;
&lt;p&gt;大约是在1970年左右，布尔巴基学派就把大部分《数学原理》写出来了，之后更新就非常缓慢了，最后一本是1998年写的，也正是在这个年代，物理中和数学结合非常紧密的问题，你比如像杨振宁提出的那些跟数学相关的问题，都是有落脚点的难题。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;若干思考&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 若干思考&lt;/h1&gt;
&lt;p&gt;统计学或计量经济学存在众多分析方法、模型和概念术语。如何更好地从结构上或体系上来理解和认识这一学科领域。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R包开发：构架及基础</title>
      <link>https://huhuaping.netlify.app/2021/02/02/pkg-develop/</link>
      <pubDate>Tue, 02 Feb 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/02/02/pkg-develop/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/02/02/pkg-develop/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#学习资源&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 学习资源&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#体系流程&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 体系流程&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#files-structure&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 文件夹结构体系&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#包结构和状态package-structure-and-state&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 包结构和状态（Package structure and state）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#常规健康检查流程&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3&lt;/span&gt; 常规“健康检查”流程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#数据集的管理和使用&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.4&lt;/span&gt; 数据集的管理和使用&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#概念要点&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 概念要点&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#区分description和namespace的作用&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; 区分&lt;code&gt;DESCRIPTION&lt;/code&gt;和&lt;code&gt;NAMESPACE&lt;/code&gt;的作用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#区分.rbuildignore和.gitignore&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; 区分&lt;code&gt;.Rbuildignore&lt;/code&gt;和&lt;code&gt;.gitignore&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#区分rstudio-project和active-usethis-project&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.3&lt;/span&gt; 区分&lt;code&gt;RStudio Project&lt;/code&gt;和&lt;code&gt;active usethis project&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#注意load_all的使用&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.4&lt;/span&gt; 注意&lt;code&gt;load_all()&lt;/code&gt;的使用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#区分code-in-scripts和code-in-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.5&lt;/span&gt; 区分&lt;code&gt;code in scripts&lt;/code&gt;和&lt;code id=&#34;landscape&#34;&gt;code in packages&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#r编程技巧&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; R编程技巧&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#用styler包保持良好代码风格&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; 用&lt;code&gt;styler&lt;/code&gt;包保持良好代码风格&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#用withr包管理环境状态&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; 用&lt;code&gt;withr&lt;/code&gt;包管理环境状态&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;学习资源&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 学习资源&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;“R packages” by &lt;a href=&#34;https://r-pkgs.org/index.html&#34;&gt;Hadley Wickham&lt;/a&gt;。R包开发的常备红宝书之一。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“rOpenSci Packages: Development, Maintenance, and Peer Review” by &lt;a href=&#34;https://devguide.ropensci.org/index.html&#34;&gt;rOpenSci team&lt;/a&gt;。rOpenSci团队R包开发的规范和指南。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“The tidyverse style guide” by &lt;a href=&#34;https://style.tidyverse.org/&#34;&gt;Hadley Wickham&lt;/a&gt;。提供了很多关于R编程规范和风格的建议。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;体系流程&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 体系流程&lt;/h1&gt;
&lt;div id=&#34;files-structure&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 文件夹结构体系&lt;/h2&gt;
&lt;p&gt;典型R包开发的文件夹结构体系如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;               levelName
1  package of ‘xmetrics’
2   |--.git             
3   |--.Rproj.user      
4   |--man              
5   |   |--lx.est.Rd    
6   |   |--lx.psm.Rd    
7   |   °--other.man.Rd 
8   |--R                
9   |   |--lx-est.R     
10  |   |--lx-psm.R     
11  |   °--other-fun.R  
12  |--.gitignore       
13  |--.Rbuildignore    
14  |--.Rhistory        
15  |--DESCRIPTION      
16  |--LICENSE          
17  |--LICENSE.md       
18  |--NAMESPACE        
19  °--xmetrics.Rproj   &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中有两个比较重要的且容易混淆的文件是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;文件&lt;code&gt;DESCRIPTION&lt;/code&gt;：存放包基本信息（Title, Version/Authors/Depends/License/Imports/Suggests/Depends等），是包开发必备文件之一，文件类型为&lt;code&gt;DCF&lt;/code&gt;（Debian control format），多行值换行需要空格（4格）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;文件&lt;code&gt;NAMESPACE&lt;/code&gt;：存放&lt;code&gt;import&lt;/code&gt;外部依赖包或函数以及导出&lt;code&gt;export&lt;/code&gt;内部函数等名称信息。该文件为“只读状态”，相关信息通过开发工具函数（&lt;code&gt;roxygen2&lt;/code&gt;包）自动记录和更新。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;包结构和状态package-structure-and-state&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 包结构和状态（Package structure and state）&lt;/h2&gt;
&lt;p&gt;开发主要在前面三个阶段，后面两个阶段主要是包的使用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;源状态（source）&lt;/strong&gt;：包开发的最初文件和结构，开发中最频繁使用的阶段。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;打包状态（bundled）&lt;/strong&gt;：将包压缩成了单个文件（&lt;code&gt;.tar.gz&lt;/code&gt;，但并不是简单压缩文件而已），仅是一种&lt;code&gt;源状态&lt;/code&gt;到&lt;code&gt;安装状态&lt;/code&gt;的过渡而已，也没有其他太大实际作用。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;二进制状态（binary）&lt;/strong&gt;：根据不同操作系统平台的压缩包文件，如windows系统使用&lt;code&gt;.zip&lt;/code&gt;包文件，macOS系统使用&lt;code&gt;.tgz&lt;/code&gt;包文件。可使用&lt;code&gt;devtools::build(binary = TRUE)&lt;/code&gt;构建二进制状态包文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;安装状态（installed）&lt;/strong&gt;：二进制包已经被解压缩到包目录下（package library）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;缓存状态（in-memory）&lt;/strong&gt;：包的所有功能函数（functions）都已经在内存中，随时可供用户使用。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面图&lt;a href=&#34;#fig:pkg-files&#34;&gt;2.1&lt;/a&gt;比较直观地呈现了它们之间的关联与差异：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pkg-files&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/xmetrics/package-files.png&#34; alt=&#34;三种包开发状态的联系和差异&#34;  /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 2.1: 三种包开发状态的联系和差异
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;而下面图&lt;a href=&#34;#fig:pkg-installation&#34;&gt;2.2&lt;/a&gt;比较直观地呈现了不同方法调用不同包状态的差异：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pkg-installation&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/xmetrics/package-installation.png&#34; alt=&#34;不同方法调用不同包状态的差异&#34;  /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 2.2: 不同方法调用不同包状态的差异
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;常规健康检查流程&#34; class=&#34;section level2&#34; number=&#34;2.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3&lt;/span&gt; 常规“健康检查”流程&lt;/h2&gt;
&lt;p&gt;R包开发过程中应注意对迭代改进的常规“健康检查”（Constant health checks），基于&lt;code&gt;devtools&lt;/code&gt;包的操作流程一般为：&lt;/p&gt;
&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
Edit one or more files below &lt;code&gt;&#34;R/.&#34;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
&lt;code&gt;devtools::document()&lt;/code&gt; (if you’ve made any changes that impact help files or NAMESPACE)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
&lt;code&gt;load_all()&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
Run some examples interactively.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
&lt;code&gt;test()&lt;/code&gt; (or &lt;code&gt;test_file()&lt;/code&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;input type=&#34;checkbox&#34; disabled=&#34;&#34; checked=&#34;&#34; /&gt;
&lt;code&gt;check()&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;数据集的管理和使用&#34; class=&#34;section level2&#34; number=&#34;2.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.4&lt;/span&gt; 数据集的管理和使用&lt;/h2&gt;
&lt;p&gt;根据数据使用目的，可相应处置如下三类外部数据集（external data）（具体参见14章&lt;a href=&#34;https://r-pkgs.org/data.html#data&#34;&gt;External data&lt;/a&gt;）：&lt;/p&gt;
&lt;p&gt;a.&lt;strong&gt;导出型数据&lt;/strong&gt;（exported data）类别：存储并为用户提供二进制数据集（binary data），可以放置在&lt;code&gt;&#34;data/&#34;&lt;/code&gt;文件夹下（需要创建该文件夹）。数据文件应该使用&lt;code&gt;save()&lt;/code&gt;函数存储，且保存格式为&lt;code&gt;.RData&lt;/code&gt;文件。使用该数据集的方法是&lt;code&gt;usethis::use_data()&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&#34;data/&#34;&lt;/code&gt;文件夹下的数据集&lt;code&gt;mydata.RData&lt;/code&gt;也需要像函数一样采用&lt;code&gt;roxygen2 block&lt;/code&gt;编写说明文档（document），并存放在&lt;code&gt;&#34;R/data.R&#34;&lt;/code&gt;文件里。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;显然，这里的数据集是对初始数据源经过清洗和整理过的，这些中间数据或操作代码可以放置在另一个文件夹&lt;code&gt;&#34;data-raw/&#34;&lt;/code&gt;下，调用数据集也可以相应使用&lt;code&gt;usethis::use_data_raw()&lt;/code&gt;函数，当然不要忘记把这个文件夹添加到&lt;code&gt;.Rbuildignore&lt;/code&gt;的忽略名单里。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;b.&lt;strong&gt;内部数据&lt;/strong&gt;（internal data）类别：存储解析数据集（parsed data）但是不希望提供给用户，则可以放置在&lt;code&gt;&#34;R/sysdata.rda&#34;&lt;/code&gt;文件里。使用该数据集的方法是&lt;code&gt;usethis::use_data()&lt;/code&gt;。因为内部数据集不会export出来，因此不需要为这类数据编写说明文档。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;同外部数据类似，内部数据的来源数据或操作代码可以放置在另一个文件夹&lt;code&gt;&#34;data-raw/&#34;&lt;/code&gt;下，调用数据集也可以相应使用&lt;code&gt;usethis::use_data_raw()&lt;/code&gt;函数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;c.&lt;strong&gt;原始数据&lt;/strong&gt;（raw data）类别：存储原始数据集可以放置在&lt;code&gt;inst/extdata&lt;/code&gt;文件夹下（需要创建该文件夹）。使用该数据集的方法是&lt;code&gt;system.file()&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;需要注意的是：如果调用函数指定的数据文件并不存在，调用函数不会报错，而是返回空值。当然，如果想要显示为报错，则需要设定参数&lt;code&gt;system.file(&#34;extdata&#34;, &#34;none.csv&#34;, mustWork = TRUE)&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;概念要点&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 概念要点&lt;/h1&gt;
&lt;div id=&#34;区分description和namespace的作用&#34; class=&#34;section level2&#34; number=&#34;3.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; 区分&lt;code&gt;DESCRIPTION&lt;/code&gt;和&lt;code&gt;NAMESPACE&lt;/code&gt;的作用&lt;/h2&gt;
&lt;p&gt;二者都是独立文件（见前面&lt;a href=&#34;#files-structure&#34;&gt;文件夹结构&lt;/a&gt;），对于外部依赖包的表述上存在一些容易引起混淆的地方。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;内容编辑方式上的不同该。包开发者可以主动编辑&lt;code&gt;DESCRIPTION&lt;/code&gt;文件信息，但是&lt;code&gt;NAMESPACE&lt;/code&gt;文件本身这是“只读”的（实际上该文件内容的编辑和更新，是自动通过对具体函数function的基本信息获得的）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对包依赖关系的表述和作用不同。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;a.在文件&lt;code&gt;DESCRIPTION&lt;/code&gt;中，本包对其他包的依赖关系有两种表述方式&lt;code&gt;Imports&lt;/code&gt;和&lt;code&gt;Suggests&lt;/code&gt;，二者存在差异（具体见节&lt;a href=&#34;https://r-pkgs.org/description.html#dependencies&#34;&gt;8.1 Dependencies&lt;/a&gt;）。简单说，二者主要差异在于强调对外部包依赖程度的强弱不同。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Imports&lt;/code&gt;列表下的依赖包，必须出现在开发包中，开发包才能正常运作。把依赖包列在清单中，作用是确保这些依赖包已经在&lt;strong&gt;本地安装&lt;/strong&gt;了。也即该清单下的外部包&lt;strong&gt;将会&lt;/strong&gt;随着开发包的运行而自动安装。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Suggests&lt;/code&gt;清单下的外部包，并不构成本包运行的必须条件，主要用于示例数据集、运行测试、编写函数说明等。该清单下的外部包&lt;strong&gt;不会&lt;/strong&gt;随着开发包的运行而自动安装。此外，如果仅仅只是“本地包开发”，则根本不需要使用&lt;code&gt;Suggests&lt;/code&gt;清单。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;[技巧提示]：可以使用函数&lt;code&gt;usethis::use_package()&lt;/code&gt;快速而正确地添加依赖包到&lt;code&gt;Imports&lt;/code&gt;和&lt;code&gt;Suggests&lt;/code&gt;清单下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;b.在文件&lt;code&gt;NAMESPACE&lt;/code&gt;中，才是真正地将相关函数&lt;em&gt;（间接地、自动地）&lt;/em&gt;导入**到“名空间”中去。这完全不同于&lt;code&gt;DESCRIPTION&lt;/code&gt;文件下的&lt;code&gt;Imports&lt;/code&gt;的功能。如果外部依赖包正确导入到&lt;code&gt;NAMESPACE&lt;/code&gt;列表下，则可以避免多次使用&lt;code&gt;foo::fun()&lt;/code&gt;这样的代码。&lt;/p&gt;
&lt;p&gt;c.文件&lt;code&gt;DESCRIPTION&lt;/code&gt;和&lt;code&gt;NAMESPACE&lt;/code&gt;的关系。一方面，把需要提前安装的外部包都列在&lt;code&gt;DESCRIPTION&lt;/code&gt;文件的&lt;code&gt;Imports&lt;/code&gt;列表下，并建议明确地使用&lt;code&gt;foo::fun()&lt;/code&gt;进行函数编写，便于后期代码检查和维护。另一方面，所有在&lt;code&gt;DESCRIPTION&lt;/code&gt;文件&lt;code&gt;Imports&lt;/code&gt;列表下的外部依赖包，必须在文件&lt;code&gt;NAMESPACE&lt;/code&gt;中“完全”列出。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;简单说，只要用到的外部包都应该进入&lt;code&gt;NAMESPACE&lt;/code&gt;列表中，否则也别出现在&lt;code&gt;DESCRIPTION&lt;/code&gt;文件&lt;code&gt;Imports&lt;/code&gt;列表下！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;区分.rbuildignore和.gitignore&#34; class=&#34;section level2&#34; number=&#34;3.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; 区分&lt;code&gt;.Rbuildignore&lt;/code&gt;和&lt;code&gt;.gitignore&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;需要注意区分&lt;code&gt;.Rbuildignore&lt;/code&gt;和&lt;code&gt;.gitignore&lt;/code&gt;两个文件的目的和作用。简单说，&lt;code&gt;.Rbuildignore&lt;/code&gt;是为了协调&lt;strong&gt;包开发实践&lt;/strong&gt;与&lt;strong&gt;&lt;code&gt;CRAN&lt;/code&gt;包发布要求&lt;/strong&gt;之间的不同；而&lt;code&gt;.gitignore&lt;/code&gt;是为了满足&lt;strong&gt;版本控制&lt;/strong&gt;工具（如git）的特定需求。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;建议使用&lt;code&gt;usethis::use_build_ignore()&lt;/code&gt;来添加&lt;code&gt;.Rbuildignore&lt;/code&gt;忽略文件清单。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;区分rstudio-project和active-usethis-project&#34; class=&#34;section level2&#34; number=&#34;3.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.3&lt;/span&gt; 区分&lt;code&gt;RStudio Project&lt;/code&gt;和&lt;code&gt;active usethis project&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;需要注意的是&lt;code&gt;usethis&lt;/code&gt;包的函数不会明确知名路径，而是&lt;strong&gt;默认&lt;/strong&gt;在&lt;code&gt;active usethis project&lt;/code&gt;下，因此它也意味着默认它是与&lt;code&gt;RStudio Project&lt;/code&gt;同路径的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;建议使用&lt;code&gt;usethis::proj_sitrep()&lt;/code&gt;查看二者路径状态是否一致。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;usethis::proj_sitrep()

#   working_directory: &amp;#39;D:/github/xmerit&amp;#39;
# active_usethis_proj: &amp;#39;D:/github/xmerit&amp;#39;
# active_rstudio_proj: &amp;#39;D:/github/xmerit&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;注意load_all的使用&#34; class=&#34;section level2&#34; number=&#34;3.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.4&lt;/span&gt; 注意&lt;code&gt;load_all()&lt;/code&gt;的使用&lt;/h2&gt;
&lt;p&gt;开发或测试期间，如何转载或缓存一个开发包？&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;建议使用&lt;code&gt;pkgload::load_all()&lt;/code&gt;，Rstudio快捷键：&lt;code&gt;Ctrl + Shift + L&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当然，其他的方法还包括&lt;code&gt;devtools::load_all()&lt;/code&gt;等，具体差异可以见下面图&lt;a href=&#34;#fig:load-all&#34;&gt;3.1&lt;/a&gt;：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:load-all&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/xmetrics/load-all.png&#34; alt=&#34;R包开发阶段的若干调用方法&#34;  /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 3.1: R包开发阶段的若干调用方法
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;区分code-in-scripts和code-in-packages&#34; class=&#34;section level2&#34; number=&#34;3.5&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.5&lt;/span&gt; 区分&lt;code&gt;code in scripts&lt;/code&gt;和&lt;code id=&#34;landscape&#34;&gt;code in packages&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;区分脚本代码（code in scripts）和包代码（code in packages）的差异。&lt;/p&gt;
&lt;p&gt;（0）从代码存放位置来看：前者理论上可以存放在任意位置，而后者仅存放在&lt;code&gt;&#34;R/&#34;&lt;/code&gt;文件夹下。&lt;/p&gt;
&lt;p&gt;（1）从代码运行时点来看：对于脚本代码（code in scripts），一旦触发操作，它当即就已经“运行”；而对于包代码（code in packages），只有包建成（built），它才开始“运行”。&lt;/p&gt;
&lt;p&gt;（2）从代码使用方法来看：前者往往还在源代码阶段使用，例如&lt;code&gt;source(&#34;code-in-scripts.R&#34;)&lt;/code&gt;；后者在包建成后（built）添加该包&lt;code&gt;library(&#34;your-pkg&#34;)&lt;/code&gt;即可直接使用特定函数&lt;code&gt;your-pkg::fun_someone()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;（3）从R landscape（R环境风貌）来看：简单说一些操作会直接导致R landscape的改变。例如：转载某个包&lt;code&gt;library(&#34;your-pkg&#34;)&lt;/code&gt;、调整环境选项&lt;code&gt;options()&lt;/code&gt;、或修改工作文件夹&lt;code&gt;setwd()&lt;/code&gt;。这就意味着如果包代码（code in packages）里的一些函数涉及到上述操作，则它们会改变R landscape，从而引起对其他某些函数的新麻烦和问题。此外，我们也要避免使用牵扯到用户环境风貌（user’s landscape）的函数，例如&lt;code&gt;read.csv()&lt;/code&gt;就会与用户特定风貌相关的一个参数相关联。总之，包代码（code in packages）的若干具体建议如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;不要使用&lt;code&gt;library()&lt;/code&gt; 或者&lt;code&gt;require()&lt;/code&gt; 。它会改变搜索路径（search path）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;永远不要使用&lt;code&gt;source()&lt;/code&gt;。它会插入执行的代码结果，从而改变当前环境。实际上&lt;code&gt;load_all()&lt;/code&gt;能够更好地让你调用你想要的内部函数。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一些慎重使用的操作函数。包括：&lt;code&gt;options()&lt;/code&gt;、&lt;code&gt;par()&lt;/code&gt;
&lt;code&gt;setwd()&lt;/code&gt;、&lt;code&gt;Sys.setenv()&lt;/code&gt;、&lt;code&gt;Sys.setlocale()&lt;/code&gt;、&lt;code&gt;set.seed()&lt;/code&gt;等。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;概括起来，包代码（code in packages）会更加严格：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Any R code outside of a function is suspicious and should be carefully reviewed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;r编程技巧&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; R编程技巧&lt;/h1&gt;
&lt;div id=&#34;用styler包保持良好代码风格&#34; class=&#34;section level2&#34; number=&#34;4.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; 用&lt;code&gt;styler&lt;/code&gt;包保持良好代码风格&lt;/h2&gt;
&lt;p&gt;Hadley建议使用&lt;code&gt;tidyverse&lt;/code&gt;的代码风格（具体见节&lt;a href=&#34;https://r-pkgs.org/r.html#code-style&#34;&gt;7.3 Code style&lt;/a&gt;）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;建议使用&lt;code&gt;styler&lt;/code&gt;包来调整代码风格，而且Rstudio Addins菜单上会有相应插件。一些常见需求的风格调整包括：对整个包&lt;code&gt;styler::style_pkg()&lt;/code&gt;（注意使用带来的风险性）；对某个文件夹&lt;code&gt;styler::style_dir()&lt;/code&gt;；对某个文件&lt;code&gt;styler::style_file()&lt;/code&gt;；对字符向量&lt;code&gt;styler::style_text()&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;用withr包管理环境状态&#34; class=&#34;section level2&#34; number=&#34;4.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; 用&lt;code&gt;withr&lt;/code&gt;包管理环境状态&lt;/h2&gt;
&lt;p&gt;前面讲过&lt;a href=&#34;#landscape&#34;&gt;R landscape&lt;/a&gt;会因某些操作而改变，因而引发不必要的问题和错误。&lt;code&gt;withr&lt;/code&gt;包可以很好处理这个矛盾（具体见节&lt;a href=&#34;https://r-pkgs.org/r.html#manage-state-with-withr&#34;&gt;7.5.1 Manage state with withr&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;需要注意的是，&lt;code&gt;withr&lt;/code&gt;包的同一类操作分别给出了两个函数，二者作用范围各有不同：&lt;code&gt;with_*()&lt;/code&gt;函数主要实现临时性环境状态调整（有点像“阅后即焚”）；而&lt;code&gt;local_*()&lt;/code&gt;函数会将修改后的环境状态维持下去，直至本函数操作全部结束（有点像“夜更巡逻”）。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R包开发：xmetrics</title>
      <link>https://huhuaping.netlify.app/2021/02/01/pkg-xmerit/</link>
      <pubDate>Mon, 01 Feb 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/02/01/pkg-xmerit/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/02/01/pkg-xmerit/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#缘由&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 缘由&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#开发思路&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 开发思路&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#主要功能&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 主要功能&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#主要挑战&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 主要挑战&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#理论公式输出&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2.1&lt;/span&gt; 理论公式输出&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#数值公式输出&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2.2&lt;/span&gt; 数值公式输出&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#一些工具函数&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 一些工具函数&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#将xls文件高保真地转换为xlsx文件&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; 将xls文件高保真地转换为xlsx文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#df数据列元素进行快速粘合输出&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; df数据列元素进行快速粘合输出&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;缘由&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 缘由&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;R包&lt;code&gt;xmetrics&lt;/code&gt;定位于辅助计量经济学和统计学课程进行高效的、可重现的（reproducable）教学内容准备和演示。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;R包命名的原则应该坚持：a.词形或发音与表意一致性，也即与开发R包核心功能定位的一致；b.不能太范化或通用，避免后期用户搜索的混淆，或推广传播的混乱。&lt;/p&gt;
&lt;p&gt;拟定开发的R包命名&lt;code&gt;xmetrics&lt;/code&gt;，音近于计量经济学英文&lt;strong&gt;Econometrics&lt;/strong&gt;，&lt;code&gt;X&lt;/code&gt;也有多种用途或神通广大的含义，而且metrics本身就是测量或度量的含义。通过google搜索关键词“xmetrics”的重合度或范化度，仅发现一款游泳穿戴设备名为“Xmetrics”（见&lt;a href=&#34;https://swimswam.com/xmetrics-the-worlds-first-activity-tracker-for-swimmers/&#34;&gt;网页&lt;/a&gt;）。继续google搜索关键词“R xmetrics”，发现一个定位为机器学习（Machine Learning）的R包命名为“Metrics”（见&lt;a href=&#34;https://cran.r-project.org/web/packages/Metrics/index.html&#34;&gt;CRAN&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;功能类似R包主要有： &lt;code&gt;equatiomatic&lt;/code&gt;（见github仓库&lt;a href=&#34;https://github.com/datalorax/equatiomatic&#34;&gt;datalorax/equatiomatic&lt;/a&gt;）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The goal of &lt;code&gt;equatiomatic&lt;/code&gt; is to reduce the pain associated with writing LaTeX code from a fitted model. In the future, the package aims to support any model supported by &lt;code&gt;broom&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;优点：简单、容易上手；支持较多的几类计量模型。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不足：功能相对较少（见下面）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;开发思路&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 开发思路&lt;/h1&gt;
&lt;div id=&#34;主要功能&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 主要功能&lt;/h2&gt;
&lt;p&gt;math equation输出需要考虑的几个方面：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;支持纯latex符号公式（symbol equation）、模型结果数值化（value equation）以及二者的混合；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持计量经济学数学公式（math equation）的各类理论表达，如总体回归模型PRM、总体回归函数PRF、样本回归模型（SRM）、样本回归函数（SRF）等；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持多种数值结果形式输出，例如经典三行式（系数、标准误、t值），或者经典一行式（系数）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持多种latex美化效果，包括&lt;code&gt;align&lt;/code&gt;、&lt;code&gt;alignedat&lt;/code&gt;等排列对齐环境；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持灵活个性化的参数符号（如&lt;span class=&#34;math inline&#34;&gt;\(\alpha,\beta,\gamma,\cdots\)&lt;/span&gt;）和下标符号（如&lt;span class=&#34;math inline&#34;&gt;\(X_i, u_i, u_t\)&lt;/span&gt;）选择等；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;支持多种模型估计方法，包括OLS回归、虚拟变量回归（ANOVA）等；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;与通用R包保持接口一致，如包&lt;code&gt;broom&lt;/code&gt;等；&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;主要挑战&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 主要挑战&lt;/h2&gt;
&lt;p&gt;计量经济学的语言符号体系&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;符号体系的标准化和一致性问题【低难度】&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;数学证明和逻辑推导问题【工作强度大】。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;理论公式输出&#34; class=&#34;section level3&#34; number=&#34;2.2.1&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2.1&lt;/span&gt; 理论公式输出&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;X &amp;lt;- c(paste0(rep(c(&amp;quot;X&amp;quot;,&amp;quot;Z&amp;quot;),each=4),1:4), &amp;quot;fathedu&amp;quot;, &amp;quot;mothedu&amp;quot;)
Y &amp;lt;- &amp;quot;lwage&amp;quot;
Greek.g &amp;lt;- c(&amp;quot;alpha&amp;quot;,&amp;quot;beta&amp;quot;,&amp;quot;lambda&amp;quot;)
Greek.n &amp;lt;- c(4,4,2)
#type &amp;lt;- &amp;quot;srm&amp;quot;
Obs &amp;lt;- &amp;quot;i&amp;quot;
N.row &amp;lt;- 4
Cst &amp;lt;- F&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;总体回归模型PRM：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34; id=&#34;eq:prm&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
lwage_i&amp;amp;=&amp;amp;&amp;amp;\alpha_{1}X1_i+&amp;amp;&amp;amp;\alpha_{2}X2_i+&amp;amp;&amp;amp;\alpha_{3}X3_i+&amp;amp;&amp;amp;\alpha_{4}X4_i\\&amp;amp;+&amp;amp;&amp;amp;\beta_{1}Z1_i+&amp;amp;&amp;amp;\beta_{2}Z2_i+&amp;amp;&amp;amp;\beta_{3}Z3_i+&amp;amp;&amp;amp;\beta_{4}Z4_i\\&amp;amp;+&amp;amp;&amp;amp;\lambda_{1}fathedu_i+&amp;amp;&amp;amp;\lambda_{2}mothedu_i+&amp;amp;&amp;amp;u_i
\end{alignedat}
\tag{2.1}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;样本回归模型SRM：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;srm_test &amp;lt;- lx.psm(x =X, y = Y, greek.g = Greek.g, greek.n = Greek.n,
       type = &amp;quot;srm&amp;quot;, intercept = Cst, lm.label = &amp;quot;srm&amp;quot;, 
       obs = Obs, n.row = N.row)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34; id=&#34;eq:srm&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
lwage_i&amp;amp;=&amp;amp;&amp;amp;\hat{\alpha}_{1}X1_i+&amp;amp;&amp;amp;\hat{\alpha}_{2}X2_i+&amp;amp;&amp;amp;\hat{\alpha}_{3}X3_i+&amp;amp;&amp;amp;\hat{\alpha}_{4}X4_i\\&amp;amp;+&amp;amp;&amp;amp;\hat{\beta}_{1}Z1_i+&amp;amp;&amp;amp;\hat{\beta}_{2}Z2_i+&amp;amp;&amp;amp;\hat{\beta}_{3}Z3_i+&amp;amp;&amp;amp;\hat{\beta}_{4}Z4_i\\&amp;amp;+&amp;amp;&amp;amp;\hat{\lambda}_{1}fathedu_i+&amp;amp;&amp;amp;\hat{\lambda}_{2}mothedu_i+&amp;amp;&amp;amp;e_i
\end{alignedat}
\tag{2.2}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;样本回归函数SRF：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;srf_test &amp;lt;- lx.psm(x =X, y = Y,greek.g = Greek.g, greek.n = Greek.n,
       type = &amp;quot;srf&amp;quot;, intercept = Cst, lm.label = &amp;quot;srf&amp;quot;,
       obs = Obs, n.row = N.row )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34; id=&#34;eq:srf&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
\widehat{lwage}_i&amp;amp;=&amp;amp;&amp;amp;\hat{\alpha}_{1}X1_i+&amp;amp;&amp;amp;\hat{\alpha}_{2}X2_i+&amp;amp;&amp;amp;\hat{\alpha}_{3}X3_i+&amp;amp;&amp;amp;\hat{\alpha}_{4}X4_i\\&amp;amp;+&amp;amp;&amp;amp;\hat{\beta}_{1}Z1_i+&amp;amp;&amp;amp;\hat{\beta}_{2}Z2_i+&amp;amp;&amp;amp;\hat{\beta}_{3}Z3_i+&amp;amp;&amp;amp;\hat{\beta}_{4}Z4_i\\&amp;amp;+&amp;amp;&amp;amp;\hat{\lambda}_{1}fathedu_i+&amp;amp;&amp;amp;\hat{\lambda}_{2}mothedu_i
\end{alignedat}
\tag{2.3}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;数值公式输出&#34; class=&#34;section level3&#34; number=&#34;2.2.2&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2.2&lt;/span&gt; 数值公式输出&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(&amp;quot;wooldridge&amp;quot;)
mroz &amp;lt;- wooldridge::mroz %&amp;gt;%
  as_tibble() %&amp;gt;%
  select(lwage, educ,exper, 
         fatheduc,motheduc,everything()) %&amp;gt;%
  filter(!is.na(wage))

mod_origin &amp;lt;- formula(lwage ~ educ + nwifeinc +exper+I(exper^2) + I(exper^2*city)  )

ols_origin &amp;lt;- lm(formula = mod_origin, data = mroz)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;默认形式：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lx_out&amp;lt;- lx.est(lm.mod = mod_origin, lm.dt = mroz)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
\widehat{lwage}&amp;amp;=&amp;amp;&amp;amp;-0.53&amp;amp;&amp;amp;+0.10educ_i&amp;amp;&amp;amp;+0.01nwifeinc_i\\&amp;amp;(s)&amp;amp;&amp;amp;0.2011&amp;amp;&amp;amp;0.0148&amp;amp;&amp;amp;0.0032\\&amp;amp;(t)&amp;amp;&amp;amp;-2.61&amp;amp;&amp;amp;+6.67&amp;amp;&amp;amp;+1.59\\&amp;amp;(cont.)&amp;amp;&amp;amp;+0.04exper_i&amp;amp;&amp;amp;-0.00exper^2_i&amp;amp;&amp;amp;+0.00exper^2*city_i\\&amp;amp;(s)&amp;amp;&amp;amp;0.0132&amp;amp;&amp;amp;0.0004&amp;amp;&amp;amp;0.0002\\&amp;amp;(t)&amp;amp;&amp;amp;+3.23&amp;amp;&amp;amp;-2.19&amp;amp;&amp;amp;+0.79
\end{alignedat}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;srm形式：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lx_out&amp;lt;- lx.est(lm.mod = mod_origin, lm.dt = mroz, style = &amp;quot;srm&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
{lwage}&amp;amp;=&amp;amp;&amp;amp;-0.53&amp;amp;&amp;amp;+0.10educ_i&amp;amp;&amp;amp;+0.01nwifeinc_i\\&amp;amp;(s)&amp;amp;&amp;amp;0.2011&amp;amp;&amp;amp;0.0148&amp;amp;&amp;amp;0.0032\\&amp;amp;(t)&amp;amp;&amp;amp;-2.61&amp;amp;&amp;amp;+6.67&amp;amp;&amp;amp;+1.59\\&amp;amp;(cont.)&amp;amp;&amp;amp;+0.04exper_i&amp;amp;&amp;amp;-0.00exper^2_i&amp;amp;&amp;amp;+0.00exper^2*city_i&amp;amp;&amp;amp;+e_i\\&amp;amp;(s)&amp;amp;&amp;amp;0.0132&amp;amp;&amp;amp;0.0004&amp;amp;&amp;amp;0.0002\\&amp;amp;(t)&amp;amp;&amp;amp;+3.23&amp;amp;&amp;amp;-2.19&amp;amp;&amp;amp;+0.79
\end{alignedat}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;一行形式：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lx_out&amp;lt;- lx.est(lm.mod = mod_origin, lm.dt = mroz, style = &amp;quot;srm&amp;quot;, opt = c(&amp;quot;p&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{equation}
\begin{alignedat}{999}
{lwage}&amp;amp;=&amp;amp;&amp;amp;-0.53&amp;amp;&amp;amp;+0.10educ_i&amp;amp;&amp;amp;+0.01nwifeinc_i\\&amp;amp;(p)&amp;amp;&amp;amp;0.0093&amp;amp;&amp;amp;0.0000&amp;amp;&amp;amp;0.1116\\&amp;amp;(cont.)&amp;amp;&amp;amp;+0.04exper_i&amp;amp;&amp;amp;-0.00exper^2_i&amp;amp;&amp;amp;+0.00exper^2*city_i&amp;amp;&amp;amp;+e_i\\&amp;amp;(p)&amp;amp;&amp;amp;0.0014&amp;amp;&amp;amp;0.0288&amp;amp;&amp;amp;0.4322
\end{alignedat}
\end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;一些工具函数&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 一些工具函数&lt;/h1&gt;
&lt;div id=&#34;将xls文件高保真地转换为xlsx文件&#34; class=&#34;section level2&#34; number=&#34;3.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; 将xls文件高保真地转换为xlsx文件&lt;/h2&gt;
&lt;p&gt;参考资料1：&lt;a href=&#34;https://rdrr.io/github/KWB-R/kwb.geosalz/man/convert_xls_as_xlsx.html&#34;&gt;geosalz 源代码&lt;/a&gt;；参考资料2：&lt;a href=&#34;https://stackoverflow.com/questions/59248369/r-cannot-run-specific-cmd-code-that-converts-xls-to-xlsx&#34;&gt;“队长问答”&lt;/a&gt;；参考资料3：&lt;a href=&#34;http://justgeeks.blogspot.com/2014/08/&#34;&gt;博客文章&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;函数作用：将本地文件夹下的&lt;code&gt;.xls&lt;/code&gt;文件批量转换为&lt;code&gt;.xlsx&lt;/code&gt;文件。适用于windowns操作系统下，具体会调用Microsoft的本地电脑程序端。&lt;/p&gt;
&lt;p&gt;函数名称：&lt;code&gt;convert_xls_as_xlsx(input_dir, export_dir)&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;使用场景：“D:/github/article-west/R/xls2xlsx.R”；以及“D:/github/article-west/data-set-maintain.Rmd”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;convert_xls_as_xlsx(input_dir = &amp;quot;d:/github/article-west/data/v4-cost-revenue/01-raw/&amp;quot;,  
                    export_dir = &amp;quot;d:/github/article-west/data/v4-cost-revenue/001-out/&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注意可能的提示（message）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Found 2 versions of &amp;#39;excelcnv.exe&amp;#39;:
  C:/Program Files/Microsoft Office/Updates/Download/PackageFiles/8BB798B7-EFF4-4781-AD0F-DE53892ADC7D/root/Office16/excelcnv.exe
  C:/Program Files/Microsoft Office/root/Office16/excelcnv.exe&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;根据本地电脑的实际情况，很可能需要修改两个地方：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;本地电脑office的安装路径：&lt;code&gt;safe_office_folder()&lt;/code&gt;函数的路径参数&lt;code&gt;office_path = &#34;C:/Program Files/Microsoft Office&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可能有office更新版本：&lt;code&gt;get_excelcnv_exe()&lt;/code&gt;函数的输出结果&lt;code&gt;paths[2]&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;df数据列元素进行快速粘合输出&#34; class=&#34;section level2&#34; number=&#34;3.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; df数据列元素进行快速粘合输出&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Xaringan美化：CSS功夫</title>
      <link>https://huhuaping.netlify.app/2021/02/01/css-base-xaringan/</link>
      <pubDate>Mon, 01 Feb 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/02/01/css-base-xaringan/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/02/01/css-base-xaringan/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#css基础&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; CSS基础&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#css-selector&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.1&lt;/span&gt; CSS selector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#css-layout&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.2&lt;/span&gt; CSS layout&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的本质&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; Xaringan的本质&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的css美化&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Xaringan的CSS美化&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#layout-html&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; 头衬和底衬（header and footer）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#个性水印图片watermark&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; 个性水印图片（watermark）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#各类窗框notes-box&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.3&lt;/span&gt; 各类窗框（notes box）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#下一步需要处理的css问题&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 下一步需要处理的CSS问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#储备炫酷技能&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; 储备炫酷技能&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#灵活选用字体&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; 灵活选用字体&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#图文混排&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; 图文混排&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#todo清单&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4&lt;/span&gt; Todo清单&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#最后的若干思考和感受&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; 最后的若干思考和感受&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;css基础&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; CSS基础&lt;/h1&gt;
&lt;div id=&#34;css-selector&#34; class=&#34;section level2&#34; number=&#34;1.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.1&lt;/span&gt; CSS selector&lt;/h2&gt;
&lt;table&gt;
&lt;caption&gt;CSS selector&lt;/caption&gt;
&lt;colgroup&gt;
&lt;col width=&#34;60%&#34; /&gt;
&lt;col width=&#34;7%&#34; /&gt;
&lt;col width=&#34;17%&#34; /&gt;
&lt;col width=&#34;3%&#34; /&gt;
&lt;col width=&#34;10%&#34; /&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;含义&lt;/th&gt;
&lt;th&gt;子类&lt;/th&gt;
&lt;th&gt;语法&lt;/th&gt;
&lt;th&gt;示例&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;Simple selector&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ID&lt;/td&gt;
&lt;td&gt;#&lt;/td&gt;
&lt;td&gt;#para1 { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;class/name&lt;/td&gt;
&lt;td&gt;.&lt;/td&gt;
&lt;td&gt;.center{ }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Attribute selector&lt;/td&gt;
&lt;td&gt;[ ]&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Universal Selector&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;* { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Grouping Selector&lt;/td&gt;
&lt;td&gt;,&lt;/td&gt;
&lt;td&gt;h1, h2, p { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;Combinator selector&lt;/td&gt;
&lt;td&gt;relationship&lt;/td&gt;
&lt;td&gt;Descendant&lt;/td&gt;
&lt;td&gt;space&lt;/td&gt;
&lt;td&gt;div p { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Child&lt;/td&gt;
&lt;td&gt;&amp;gt;&lt;/td&gt;
&lt;td&gt;div &amp;gt; p { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Adjacent sibling&lt;/td&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;div + p { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;General sibling&lt;/td&gt;
&lt;td&gt;~&lt;/td&gt;
&lt;td&gt;div ~ p { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;a href=&#34;https://www.w3schools.com/css/css_pseudo_classes.asp&#34; title=&#34;All CSS Pseudo Classes&#34;&gt;Pseudo -class selector&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;state&lt;/td&gt;
&lt;td&gt;Mouse over/ visited link/focus&lt;/td&gt;
&lt;td&gt;:&lt;/td&gt;
&lt;td&gt;a:link {}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;a href=&#34;https://www.w3schools.com/css/css_pseudo_elements.asp&#34; title=&#34;All CSS Pseudo Elements&#34;&gt;Pseudo -element selector&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;part&lt;/td&gt;
&lt;td&gt;First letter/ line/ element&lt;/td&gt;
&lt;td&gt;::&lt;/td&gt;
&lt;td&gt;::first-line { }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Insert content before or after&lt;/td&gt;
&lt;td&gt;::&lt;/td&gt;
&lt;td&gt;p::after { }&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;css-layout&#34; class=&#34;section level2&#34; number=&#34;1.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.2&lt;/span&gt; CSS layout&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;布局：margin；border；padding&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;位置：position: static/relative/fixed/absolute/sticky&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;定位：top/right/bottom/left&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan的本质&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; Xaringan的本质&lt;/h1&gt;
&lt;p&gt;Xaringan背后是基于remark.js的。remark.js后台基本工作流程，就是采用JavaScript语言把markdown文档，&lt;strong&gt;映射&lt;/strong&gt;到html上，并形成独特的slide幻灯片样式。因此，还是很有必要了解一下remark.js的说明文档（见&lt;a href=&#34;https://github.com/gnab/remark/wiki&#34;&gt;Wiki页面&lt;/a&gt;）。那么Xaringan包又起到了什么作用呢？根据yihui的说法：它扩展支持了Rmarkdown语法以及R代码的直接运行！&lt;/p&gt;
&lt;p&gt;Xaringan本质上是以html形态呈现，并使用css样式进行style视觉美化。Xaringan的技术讨论和细节见其&lt;a href=&#34;https://github.com/yihui/xaringan/wiki&#34;&gt;wiki页面&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;归结起来这是对slide工具的一种选择，而且是选择了“未来感”的html呈现形态！那么CSS知识这是绕不过去的学习壁垒。html和css的学习至少也是需要在“三姑学院”（&lt;a href=&#34;https://www.w3schools.com/css/default.asp&#34;&gt;W3school&lt;/a&gt;）的汪洋里过水“捞一遍”（通读一遍）。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan的css美化&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Xaringan的CSS美化&lt;/h1&gt;
&lt;div id=&#34;layout-html&#34; class=&#34;section level2&#34; number=&#34;3.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; 头衬和底衬（header and footer）&lt;/h2&gt;
&lt;p&gt;调整header和footer视觉效果，主要是从某个slide开始里设定&lt;code&gt;layout: true&lt;/code&gt;，并按html语法设置header和footer样式。其完整的语法如下：&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;!---slide area with layout---&amp;gt;
---
layout: true

&amp;lt;div class=&amp;quot;my-header-h2&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;div class=&amp;quot;watermark1&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;div class=&amp;quot;watermark2&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;div class=&amp;quot;watermark3&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;div class=&amp;quot;my-footer&amp;quot;&amp;gt;&amp;lt;span&amp;gt;huhuaping@  &amp;amp;emsp;&amp;amp;emsp; &amp;lt;a href=&amp;quot;#chapter01&amp;quot;&amp;gt; 第01章 导论&amp;lt;/a&amp;gt;
&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;
&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;&amp;amp;emsp;
&amp;lt;a href=&amp;quot;#sec-process&amp;quot;&amp;gt;1.3 计量经济学分析过程&amp;lt;/a&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt; 
---&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;具体样式细节包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;heading文本居中设定。需要注意叠放层级参数&lt;code&gt;z-index&lt;/code&gt;的设置。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;.remark-slide-content h2, h3,h4,h5{
  position: relative;
  top: 0px;
  margin: 15px 0px 50px;
  width: 99%;
  text-shadow: 0px 0px;
  text-align: center;
  z-index: 5;
}&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;header背景色和渐变方式。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;div.my-header-h2 {
    background-color: #FFFFFF;
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#f77a00), color-stop(0%,#f77a00), color-stop(10%,red), color-stop(74%,#fbd0ac), color-stop(83%,#fbd0ac), color-stop(100%,#fddfc8));
    position: fixed;
    top: 0px;
    left: 0px;
    height: 86.92913px;
    width: 100%;
}&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;footer导航样式。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;div.my-footer {
    background-color: #272822;
    position: absolute;
    bottom: 0px;
    left: 0px;
    height: 20px;
    width: 100%;
}

div.my-footer span {
    font-size: 10pt;
    color: #F7F8FA;
    position: absolute;
    left: 15px;
    bottom: 2px;
}&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;footer的导航链接功能。先在css里设定链接文本的颜色，然后在slide里设定&lt;code&gt;layout: true&lt;/code&gt;（见前面完整&lt;a href=&#34;#layout-html&#34;&gt;语句块&lt;/a&gt;），并按html语法设定链接定位&lt;code&gt;#a-specify-id&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;/* link text color*/
div.my-footer a {
  color: white;
  background-color: transparent;
  text-decoration: none;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;个性水印图片watermark&#34; class=&#34;section level2&#34; number=&#34;3.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; 个性水印图片（watermark）&lt;/h2&gt;
&lt;p&gt;水印图片的个性化设定。首先需要设定css，然后在slide里设定&lt;code&gt;layout: true&lt;/code&gt;（见前面完整&lt;a href=&#34;#layout-html&#34;&gt;语句块&lt;/a&gt;），并按html语法依次设定三个水印图片，其中之一如&lt;code&gt;&amp;lt;div class=&#34;watermark1&#34;&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;/* water remark image */

.watermark1::after {
  content: &amp;quot;&amp;quot;;
  display: block;
  width: 30%;
  height: 20%;
  position: absolute;
  top: 150px;
  left: 100px;
  background-image: url(&amp;quot;vlog-nwsuaf.jpg&amp;quot;);
  background-size: 80%;
  background-position: 0px 20px;
  background-repeat: no-repeat;
  opacity: 0.04;  
  /* Rotate div */
 -ms-transform: rotate(-45deg); /* IE 9 */
 -moz-transform: rotate(-45deg); /* firefox */
 -webkit-transform: rotate(-45deg); /* Chrome, Safari, Opera */
 transform: rotate(-45deg);
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;各类窗框notes-box&#34; class=&#34;section level2&#34; number=&#34;3.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.3&lt;/span&gt; 各类窗框（notes box）&lt;/h2&gt;
&lt;p&gt;在多个写作场景下（如&lt;code&gt;xaringan&lt;/code&gt;、&lt;code&gt;blogdown&lt;/code&gt;、&lt;code&gt;rmarkdown&lt;/code&gt;），可能会用到各类提示窗框（notes box）。可以利用css设定获得个性化的提示窗框效果，具体可参看desirée de leon的博文&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://huhuaping.netlify.app/pic/div-tip-annotate.png&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;基本要点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;背后要用到html的&lt;code&gt;div&lt;/code&gt;语块&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可以借用R包&lt;code&gt;bookdown&lt;/code&gt;的&lt;code&gt;blocks&lt;/code&gt;代码块，进行快捷应用。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第一步：css文件（&lt;code&gt;/my-css/notes-tips.css&lt;/code&gt;）设定如下：&lt;/p&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;/* -----------div tips------------- */

div.puzzle, div.fyi, div.demo, div.notes {
    padding: 0.5em;
    margin: 0.5em 0;
    padding-left: 100px;
    background-size: 70px;
    background-repeat: no-repeat;
    background-position: 15px center;
    min-height: 100px;
    color: #1f5386;
    background-color: #bed3ec;
    border: solid 5px #dfedff;
}

div.notes {
  background-image: url(&amp;quot;notes-light-bulb-ff5500.png&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;style type=&#34;text/css&#34;&gt;
/* -----------div tips------------- */

div.puzzle, div.fyi, div.demo, div.notes {
    padding: 0.5em;
    margin: 0.5em 0;
    padding-left: 100px;
    background-size: 70px;
    background-repeat: no-repeat;
    background-position: 15px center;
    min-height: 100px;
    color: #1f5386;
    background-color: #bed3ec;
    border: solid 5px #dfedff;
}

div.notes {
  background-image: url(&#34;notes-light-bulb-ff5500.png&#34;);
}

&lt;/style&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：需要自己手动下载背景图片，免费的图片icon下载网站有：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://aiconica.net/&#34;&gt;aiconica.net&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://fontawesome.com/&#34;&gt;fontawesome.com&lt;/a&gt;。正文里还可使用R函数&lt;code&gt;fontawesome::fa(&#39;slideshare&#39;)&lt;/code&gt;。例如slide图标&lt;svg style=&#34;height:0.8em;top:.04em;position:relative;fill:blue;&#34; viewBox=&#34;0 0 512 512&#34;&gt;&lt;path d=&#34;M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z&#34;/&gt;&lt;/svg&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;第二步：在&lt;code&gt;.Rmd&lt;/code&gt;文件的&lt;code&gt;yaml&lt;/code&gt;区域引用上面的css文件路径。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;css: 
  - ../mycss/notes-tips.css&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;第三步：在&lt;code&gt;.Rmd&lt;/code&gt;文件下进行写作，并引用对应的css样式：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;` ``{block, type=&amp;#39;notes&amp;#39;, echo=T}

待完成：找到新数据，绘制一张条形图，但其不适合制作柱状图。

` ``&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;下一步需要处理的css问题&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 下一步需要处理的CSS问题&lt;/h1&gt;
&lt;div id=&#34;储备炫酷技能&#34; class=&#34;section level2&#34; number=&#34;4.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; 储备炫酷技能&lt;/h2&gt;
&lt;p&gt;提前准备好各类丰富slide功能的css实现方法。具体明确的一些炫酷功能，相关slide和css样板可以参看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Remark.js推荐的三个&lt;a href=&#34;https://github.com/gnab/remark/wiki/HTML-CSS-JS-samples&#34;&gt;Remark templates&lt;/a&gt;；尤其推荐Story模板&lt;a href=&#34;https://story.xaprb.com/slides/adirondack/#5&#34;&gt;Remark-Apron&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;另外，有空还要好好看看&lt;code&gt;xaringanthemer&lt;/code&gt;&lt;a href=&#34;https://github.com/gadenbuie/xaringanthemer&#34;&gt;R包&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://slides.earo.me/rladiesakl20/#39&#34;&gt;Earo Wang’s slide&lt;/a&gt;展示了很多炫酷技巧，包括Javascript交互实现动画效果等。源代码见其&lt;a href=&#34;https://github.com/earowang/rladiesakl20&#34;&gt;github&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://yongfu.name/slides/xaringan/#1&#34;&gt;Yongfu Liao’s slide&lt;/a&gt;，提供了简单的xaringan使用介绍。其源代码&lt;a href=&#34;https://github.com/liao961120/slides-old/tree/master/xaringan&#34;&gt;github&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://emitanaka.org/ninja-theme/themes/kunoichi/kunoichi-theme-example.html#1&#34;&gt;Emi Tanaka’s slide&lt;/a&gt;提供了关于页面布局的多种形式。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;灵活选用字体&#34; class=&#34;section level2&#34; number=&#34;4.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; 灵活选用字体&lt;/h2&gt;
&lt;p&gt;解决字体灵活选用问题。工作量理论上不是很大，主要是受到中文字体适用性和加载速度等的限制。目前暂时还不想去碰它，大众字体就大众字体，先忍一忍。具体看yihui的相关思考和说明。如&lt;a href=&#34;https://yihui.org/cn/2017/04/source-han-serif/&#34;&gt;思源宋体&lt;/a&gt; ；&lt;a href=&#34;https://yihui.org/cn/2017/02/kaiti/#fnref:-1&#34;&gt;楷体&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;图文混排&#34; class=&#34;section level2&#34; number=&#34;4.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; 图文混排&lt;/h2&gt;
&lt;p&gt;图文混排技巧。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;remark.js&lt;/code&gt;自带光环的边栏效果（side bar）&lt;code&gt;.left-column[]&lt;/code&gt;或者&lt;code&gt;.right-column[]&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;remark.js&lt;/code&gt;自带光环的两栏效果（two columns）&lt;code&gt;.pull-left[]&lt;/code&gt;或者&lt;code&gt;.pull-right[]&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;todo清单&#34; class=&#34;section level2&#34; number=&#34;4.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4&lt;/span&gt; Todo清单&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;页面布局。页面紧凑度和宽松度灵活调整。例如&lt;code&gt;remark-slide-content.roomy&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;前导符设定。正文符号列表的前导符设定问题。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;动画效果。see &lt;a href=&#34;https://slides.earo.me/rladiesakl20/#1&#34;&gt;Earo Wang’s slide&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;添加logo。see &lt;a href=&#34;https://www.garrickadenbuie.com/blog/xaringan-tip-logo-all-slides/&#34;&gt;xaringan Tip: Add A Logo to All of Your Slides&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;最后的若干思考和感受&#34; class=&#34;section level1&#34; number=&#34;5&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; 最后的若干思考和感受&lt;/h1&gt;
&lt;p&gt;这次对Xaringan 又一次发起冲锋，直接缘由是《计量经济学》双一流课程团队的视频录制。团队里其他人都不用R和Rmarkdown，更不要提Xaringan slide了。大家仍旧还是基于PowerPoint准备和制作授课幻灯片，有的老师甚至操作系统还是win7，office套件还是2010版！所以只能我事先用powerpoint设定好ppt模板，大家各自拿去制作自己的授课ppt（其实大部分团队老师甚至连ppt母版也不会用）。考虑到我自己的实际需求，我是希望能同时兼顾自己使用xaringan 和团队其他老师使用ppt的一致性——当然是不能奢求最后两者视觉效果的完全一样！目前在Xaringan上的设定调整，基本上达到了ppt模板类似效果的80%左右。&lt;/p&gt;
&lt;p&gt;事实上，Xaringan和ppt二者效果一致性的达成，并不是最大的挑战。基本上基于html的Xaringan slide，可以使用css技巧实现ppt里的几乎所有功能。而况Xaringan还有很多ppt无法实现的“现代的”以及“未来的”诸多功能！真正的挑战在于团队协作，尤其是对于非常技术守旧的团队（并不指技术之外的其他方面）。到此，我的基本态度就是：最低限度地在技术方面与其他人协作，重点是把协作任务下自己事情做完、基本ok即可！&lt;/p&gt;
&lt;p&gt;当然，这里面也还有一个在协作冲突中推动自己不断学习进步的问题。显然，如果没有这次的协作录制课程，我肯定还是会一如往常地坚持“最小化学习”策略：也即如无实际所需，绝不去茫然学习所谓的各种知识技能。这一次，我充分认识到了CSS对于Xaringan甚至对于Html的重要性，并且看到了一些文档协作、协作和输出的“未来”趋势和走向！&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://desiree.rbind.io/post/2019/making-tip-boxes-with-bookdown-and-rmarkdown/&#34;&gt;MAKING PRETTY NOTE BOXES: A div tip for all occasions&lt;/a&gt;&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>git版本控制实操技巧汇总</title>
      <link>https://huhuaping.netlify.app/2021/01/31/note-for-git-version-control-skills/</link>
      <pubDate>Sun, 31 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/01/31/note-for-git-version-control-skills/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#配置git&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 配置git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#常用操作&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 常用操作&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#合并分支branch&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 合并分支branch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#删除本地分支&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 删除本地分支&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#删除远程分支&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3&lt;/span&gt; 删除远程分支&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#gitbash常用文件及文件夹命令&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; gitbash常用文件及文件夹命令&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#常用git命令&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 常用git命令&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#git-新挑战&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; git 新挑战&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#超越github文件容量限制单个文件50m以上&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; 超越github文件容量限制（单个文件50M以上）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#忽略文件设置&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.2&lt;/span&gt; 忽略文件设置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#忽略文件无效的处理办法&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.3&lt;/span&gt; 忽略文件无效的处理办法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#无法把本地repo推送到远程repo&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.4&lt;/span&gt; 无法把本地repo推送到远程repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#分支push找不到上游分支&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.5&lt;/span&gt; 分支push找不到上游分支&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#回到远端状态&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.6&lt;/span&gt; 回到远端状态&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#放弃本地的修改未提交&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.7&lt;/span&gt; 放弃本地的修改（未提交）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#git-查看commit历史&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.8&lt;/span&gt; git 查看commit历史&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#删除已提交记录中的文件并添加到ignore列表&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.9&lt;/span&gt; 删除已提交记录中的文件并添加到ignore列表&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;git版本控制技巧集锦&lt;/p&gt;
&lt;div id=&#34;配置git&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 配置git&lt;/h1&gt;
&lt;p&gt;配置默认文本编辑器（text editor）。windows党还是自觉使用Notepad吧，免费又熟悉&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下载安装&lt;a href=&#34;https://notepad-plus-plus.org/&#34;&gt;Notepad++&lt;/a&gt;（默认安装路径）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打开GitBash，并输入如下代码&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;$ git config --global core.editor &amp;quot;&amp;#39;C:/Program Files (x86)/Notepad++/notepad++.exe&amp;#39; -multiInst -notabbar -nosession -noPlugin&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;配置合并检查工具（mergetool）。这个必须要图形化GUI的，p4merge就是一个不错的选择。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下载并安装&lt;a href=&#34;https://www.perforce.com/products/helix-core-apps/merge-diff-tool-p4merge&#34;&gt;p4merge&lt;/a&gt;。默认安装路径为&lt;code&gt;&#34;C:Program Files\Perforce\p4merge.exe&#34;&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打开GitBash，并输入如下代码：&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;$ git config --global diff.tool p4merge
$ git config --global difftool.p4merge.path &amp;#39;C:\Program Files\Perforce\p4merge.exe&amp;#39;

$ git config --global merge.tool p4merge
$ git config --global mergetool.p4merge.path &amp;#39;C:\Program Files\Perforce\p4merge.exe&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;常用操作&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 常用操作&lt;/h1&gt;
&lt;div id=&#34;合并分支branch&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 合并分支branch&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ git checkout master
$ git merge hotfix&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;删除本地分支&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 删除本地分支&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ git branch -d branch_name
$ git branch -D branch_name&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;删除远程分支&#34; class=&#34;section level2&#34; number=&#34;2.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3&lt;/span&gt; 删除远程分支&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ git push &amp;lt;remote_name&amp;gt; --delete &amp;lt;branch_name&amp;gt;
$ git push &amp;lt;remote_name&amp;gt; :&amp;lt;branch_name&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;gitbash常用文件及文件夹命令&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; gitbash常用文件及文件夹命令&lt;/h1&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;cd&lt;/code&gt;: change directory的简写，改变目录的意思，就是切换到哪个目录下， 如 cd e:切换 E 盘下面的fff 目录。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;cd ..&lt;/code&gt;: 回退到上一个目录。我们在写js，引入文件时，.. 表示的就是上一个目录, 所以 cd .. 回退到上一个目录就很好理解了。注意，cd 和两个点点..之间有一个空格,&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;pwd&lt;/code&gt;: print working directory, 打印工作目录，它会显示我们当前所在的目录路径。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ls&lt;/code&gt;: list, 列出当前目录中的所有文件， 只不过ll(两个ll)列出的内容更为详细。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;touch&lt;/code&gt;: 新建一个文件如 touch index.js就会在当前目录下新建一个index.js文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;rm&lt;/code&gt;: remove，删除一个文件, rm index.js 就会把index.js文件删除.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;mkdir&lt;/code&gt;: make directory 新建一个目录,就是新建一个文件夹. 如mkdir src 新建src 文件夹.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;rm -r&lt;/code&gt; : 删除一个文件夹， r (recusive 是递归的意思)， 删除用的就是递归，先删除文件夹里面的内容，再删除文件夹。 rm -r src 删除src目录。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;mv&lt;/code&gt; 移动文件, mv index.html src index.html 是我们要移动的文件, src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;reset&lt;/code&gt; 清屏，把git bash命令窗口中的所有内容清空。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;exit&lt;/code&gt; 可以直接退出窗口，&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;常用git命令&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 常用git命令&lt;/h1&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;视图化查看提交历史、各个分支的指向以及项目的分支分叉情况&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;$ git log --oneline --decorate --graph --all&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;git-新挑战&#34; class=&#34;section level1&#34; number=&#34;5&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; git 新挑战&lt;/h1&gt;
&lt;div id=&#34;超越github文件容量限制单个文件50m以上&#34; class=&#34;section level2&#34; number=&#34;5.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; 超越github文件容量限制（单个文件50M以上）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;挑战的问题&lt;/strong&gt;：git bash 命令push时，如果单个文件大于50M以上，则会提示推送失败。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考的解决办法&lt;/strong&gt;包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.community/t5/Support-Protips/Working-with-large-files-and-repositories/ba-p/9343&#34;&gt;Working with large files and repositories&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://help.github.com/en/articles/versioning-large-files&#34;&gt;Versioning large files&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实际的解决办法&lt;/strong&gt;为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载安装&lt;a href=&#34;https://git-lfs.github.com/&#34;&gt;git LFS软件&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# git bash下确认是否成功安装

$ git lfs install
&amp;gt; Git LFS initialized.
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;配置&lt;a href=&#34;https://help.github.com/en/articles/configuring-git-large-file-storage&#34;&gt;LFS存储策略&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 追踪大容量文件所在的文件夹
$ git lfs track &amp;quot;data-process/&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;提交并推送LFS&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 添加文件夹
$ git add data-process/

# 提交并推送
$ git commit -m &amp;quot;add LFS directory data-process/&amp;quot;
$ git push origin master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;忽略文件设置&#34; class=&#34;section level2&#34; number=&#34;5.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.2&lt;/span&gt; 忽略文件设置&lt;/h2&gt;
&lt;p&gt;工作思路是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在工作目录下新建&lt;code&gt;.gitigore&lt;/code&gt;文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;$ touch .gitignore
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;git bash调用文本编辑工具（windows死粉的notepad++），编辑并设置.gitignore文件&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 配置notepad（64bit system -windows）
$ alias notepad=&amp;quot;/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe&amp;quot;

# 打开编辑器，设置忽略规则
$ notepad .gitignore&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;忽略规则的一个样例&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# ignore the whole file directory

data-raw/

# ignore Rproj user info file

.Rproj.user
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;忽略文件无效的处理办法&#34; class=&#34;section level2&#34; number=&#34;5.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.3&lt;/span&gt; 忽略文件无效的处理办法&lt;/h2&gt;
&lt;p&gt;有时候.gitignore里虽然进行了修改设定，但并不会马上生效。&lt;/p&gt;
&lt;p&gt;此时，问题可能就出在缓存上（cash）（&lt;a href=&#34;https://bytefreaks.net/programming-2/my-gitignore-file-is-ignored-by-git-and-it-does-not-work&#34;&gt;参看My .gitignore file is ignored by git and it does not work&lt;/a&gt;，或者参看&lt;a href=&#34;https://appuals.com/fix-gitignore-is-not-working/&#34;&gt;Gitignore is not Working&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;解决办法是清理缓存-提交：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git rm -r --cached .
$ git add .
$ git commit -m &amp;quot;Untracked files issue resolved to fix .gitignore&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;场景实例：（两台设备上）git操作时反复出现&lt;code&gt;.Rproj.user/shared/notebooks/paths&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;处理办法（&lt;a href=&#34;https://stackoverflow.com/questions/36185456/gitignored-files-still-shown-in-rstudio&#34;&gt;参考&lt;/a&gt;）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# Once you add files to git, it will keep tracking them,  
# so we have to delete them and commit your deletion
git rm -r --cached .Rproj.user/**

# Commit the deleted files
git commit -m &amp;quot;Removed files....&amp;quot;

# now add it to the `.gitignore` and the files will be ignored
echo &amp;#39;.Rproj.user/**&amp;#39; &amp;gt; .gitignore&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;要点：&lt;code&gt;**&lt;/code&gt;表示文件夹。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;无法把本地repo推送到远程repo&#34; class=&#34;section level2&#34; number=&#34;5.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.4&lt;/span&gt; 无法把本地repo推送到远程repo&lt;/h2&gt;
&lt;p&gt;这种情形下，直接push会提示如下报错：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git error: failed to push some refs to &amp;#39;https://github.com/&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;问题可能有多个：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有进行远程设置。可以通过如下代码查看是否进行了远程设置。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 正常情况下显示结果如下：
$git remote -v
myOrigin ssh://git@example.com:1234/myRepo.git (fetch)
myOrigin ssh://git@example.com:1234/myRepo.git (push)


# 否则就应该进行远程设置：
$git remote add origin ssh://git@example.com:1234/myRepo.git
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;然后再进行推送：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# origin是远端，master是本地分支
$git push origin master&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;可能还会报错，比如提示远端在本地前面。因此需要pull-merge-mergetool，来实现更新步骤。下面给出处理办法（&lt;a href=&#34;https://help.github.com/en/articles/dealing-with-non-fast-forward-errors&#34;&gt;参看Dealing with non-fast-forward errors&lt;/a&gt;）：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 报错信息
 ! [rejected]        master -&amp;gt; master (non-fast-forward)
error: failed to push some refs to &amp;#39;git@github.com:huhuaping/netlify.git&amp;#39;
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: &amp;#39;git pull ...&amp;#39;) before pushing again.
hint: See the &amp;#39;Note about fast-forwards&amp;#39; in &amp;#39;git push --help&amp;#39; for details.
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;# 同步远端和本地
$ git pull origin master

# 如果显示冲突conflict，则利用合并工具处理
$ git mergetool
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;分支push找不到上游分支&#34; class=&#34;section level2&#34; number=&#34;5.5&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.5&lt;/span&gt; 分支push找不到上游分支&lt;/h2&gt;
&lt;p&gt;如果是本地新建分支，则需要设定上游分支，否则push就会报错：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 报错信息。
$ git push
fatal: The current branch dev has no upstream branch.
To push the current branch and set the remote as upstream, use&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;处理办法是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git push --set-upstream origin dev&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;回到远端状态&#34; class=&#34;section level2&#34; number=&#34;5.6&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.6&lt;/span&gt; 回到远端状态&lt;/h2&gt;
&lt;p&gt;回到远端状态（例如，本地已提交，但是push提示合并冲突时，想把本地pull为远端状态）。参看&lt;a href=&#34;https://stackoverflow.com/questions/5097456/throw-away-local-commits-in-git&#34;&gt;队长问答&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git reset --hard origin/&amp;lt;your branch&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;放弃本地的修改未提交&#34; class=&#34;section level2&#34; number=&#34;5.7&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.7&lt;/span&gt; 放弃本地的修改（未提交）&lt;/h2&gt;
&lt;p&gt;参看&lt;a href=&#34;https://stackoverflow.com/questions/52704/how-do-i-discard-unstaged-changes-in-git&#34;&gt;队长问答&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#删除remove所有untracked files
git clean -df

#清除clear 所有untracked files
git checkout -- .

#保存痕迹
git stash save --keep-index --include-untracked

# 不保存痕迹
git stash save --keep-index
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;git-查看commit历史&#34; class=&#34;section level2&#34; number=&#34;5.8&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.8&lt;/span&gt; git 查看commit历史&lt;/h2&gt;
&lt;p&gt;查看历史commit:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git log --pretty=oneline
git log --oneline --decorate --graph --all&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;删除已提交记录中的文件并添加到ignore列表&#34; class=&#34;section level2&#34; number=&#34;5.9&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.9&lt;/span&gt; 删除已提交记录中的文件并添加到ignore列表&lt;/h2&gt;
&lt;p&gt;参看&lt;a href=&#34;https://stackoverflow.com/questions/36185456/gitignored-files-still-shown-in-rstudio&#34;&gt;队长问答&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;First of all your files are already committed so you have to remove it from the repo:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;# Once you add files to git, it will keep tracking them,  
# so we have to delete them and commit your deletion
git rm -r --cached .Rproj.user/**

# Commit the deleted files
git commit -m &amp;quot;Removed files....&amp;quot;

# now add it to the `.gitignore` and the files will be ignored
echo &amp;#39;.Rproj.user/**&amp;#39; &amp;gt; .gitignore
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Netlify建站：主站与静态static资料的正确衔接</title>
      <link>https://huhuaping.netlify.app/2021/01/31/file-structure-witin-blog/</link>
      <pubDate>Sun, 31 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2021/01/31/file-structure-witin-blog/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2021/01/31/file-structure-witin-blog/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;https://huhuaping.netlify.app/2021/01/31/file-structure-witin-blog/index.en_files/fitvids/fitvids.min.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#netlify文件夹体系&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; netlify文件夹体系&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#dir-content&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.1&lt;/span&gt; netlify content文件系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#dir-static&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.2&lt;/span&gt; netlify static文件夹系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#netlify-public文件系统&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.3&lt;/span&gt; netlify public文件系统&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#netlify相关联的github仓库&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; netlify相关联的Github仓库&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan-slide的正确操作&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; Xaringan slide的正确操作&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan-slide的典型文件结构&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1.1&lt;/span&gt; xaringan slide的典型文件结构&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan-rmd调用本地图片文件&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1.2&lt;/span&gt; Xaringan Rmd调用&lt;strong&gt;本地&lt;/strong&gt;图片文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan-rmd代码块生成的graph&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1.3&lt;/span&gt; Xaringan Rmd代码块生成的graph&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#若干netlify对接技巧&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 若干netlify对接技巧&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#netlify内部相互链接&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; netlify内部相互链接&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#output&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; netlify指定Rmd输出格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#对接失败与报错&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 对接失败与报错&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#include_url服务器拒绝访问&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; include_url()服务器拒绝访问&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;netlify文件夹体系&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; netlify文件夹体系&lt;/h1&gt;
&lt;p&gt;使用blogdown进行netlify建站，下述三个文件夹及作用需要区分清楚：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;content&lt;/code&gt;文件夹，主要进行写作或者接口配置（链接等），对接包括：post、publication、course、project等&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;static&lt;/code&gt;文件夹，主要存放来自其他仓库的静态资料。例如，xaringan slide课件制作往往在我的另一个课程仓库（如&lt;code&gt;course-econometrics&lt;/code&gt;），相关文件资料（&lt;code&gt;html&lt;/code&gt;）需要提前拷贝到这个文件夹对应位置。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;public&lt;/code&gt;文件夹，是建站结果的最终目录树文件系统。netlify服务器网站可以方便国际用户访问，但国内访问速度较慢。&lt;code&gt;public/&lt;/code&gt;后期还要更新到本地另外一个域名服务器网站（方便国内访问）。（见之前的&lt;a href=&#34;https://huhuaping.netlify.app/2020/10/05/hugo-big-update/#double-site&#34;&gt;博客文章&lt;/a&gt;）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;dir-content&#34; class=&#34;section level2&#34; number=&#34;1.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.1&lt;/span&gt; netlify content文件系统&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;                            levelName
1  netlify                           
2   |--static                        
3   |--content                       
4   |   |--course-advanced-statistics
5   |   |--course-econometrics       
6   |   |   |--data                  
7   |   |   |--schedule-theory.Rmd   
8   |   |   °--schedule-theory.html  
9   |   |--post                      
10  |   |--project                   
11  |   °--publication               
12  |--public                        
13  |--config                        
14  °--netlify.Rproj                 &lt;/code&gt;&lt;/pre&gt;
&lt;!---
上述htmlwidgets会保存在本地，然后使用html标记语言插入该文件

&lt;iframe src=&#34;tree.html&#34;&gt;&lt;/iframe&gt; 

参看1[HTML widgets](https://bookdown.org/yihui/blogdown/html-widgets.html)

参看2[HTML Widgets not displaying](https://github.com/rstudio/blogdown/issues/20#issuecomment-269389360)


---&gt;
&lt;/div&gt;
&lt;div id=&#34;dir-static&#34; class=&#34;section level2&#34; number=&#34;1.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.2&lt;/span&gt; netlify static文件夹系统&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;                                    levelName
1  netlify                                   
2   |--static                                
3   |   |--course-advanced-statistics        
4   |   °--course-econometrics               
5   |       |--data                          
6   |       |--pic                           
7   |       |   |--chpt1-log.png             
8   |       |   °--chpt2-reg.png             
9   |       |--reading                       
10  |       |   |--cht01-history.files       
11  |       |   °--cht01-history.html        
12  |       |--01-introduction-slide.html    
13  |       °--02-simple-reg-basic-slide.html
14  |--content                               
15  |--public                                
16  |--config                                
17  °--netlify.Rproj                         &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;netlify-public文件系统&#34; class=&#34;section level2&#34; number=&#34;1.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.3&lt;/span&gt; netlify public文件系统&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;                                    levelName
1  netlify                                   
2   |--static                                
3   |--content                               
4   |--public                                
5   |   |--course-advanced-statistics        
6   |   °--course-econometrics               
7   |       |--schedule-theory               
8   |       |--data                          
9   |       |--pic                           
10  |       |   |--chpt1-log.png             
11  |       |   °--chpt2-reg.png             
12  |       |--01-introduction-slide.html    
13  |       °--02-simple-reg-basic-slide.html
14  |--config                                
15  °--netlify.Rproj                         &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;netlify相关联的github仓库&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; netlify相关联的Github仓库&lt;/h1&gt;
&lt;p&gt;目前而言，neglify主站相关联的主要github仓库有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;主站仓库：&lt;code&gt;netlify&lt;/code&gt;仓库，基于hugo-academic网站模板，集合了众多的其他仓库的展示材料&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;教学课程仓库：主要包括本科课程《计量经济学》&lt;code&gt;course-econometrics&lt;/code&gt;;本科课程《统计学原理》&lt;code&gt;course-statistics&lt;/code&gt;;研究生课程《中级计量经济学》&lt;code&gt;master-SEM&lt;/code&gt;等。主要关联材料包括：课件Xaringan slide；补充材料html；pdf等。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;研究项目仓库：包括各类开源的研究类仓库，如&lt;a href=&#34;https://github.com/huhuaping/agri-trade-open&#34;&gt;agri-trade-open&lt;/a&gt;；&lt;a href=&#34;https://github.com/huhuaping/team-students&#34;&gt;team-students&lt;/a&gt;等。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其他仓库&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;xaringan-slide的正确操作&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; Xaringan slide的正确操作&lt;/h2&gt;
&lt;p&gt;使用Xaringan制作教学slide。需要注意到Xaringan制作的slide是不能独立封装的（self-contained），也即它需要依赖各种必要组件或资源。&lt;/p&gt;
&lt;div id=&#34;xaringan-slide的典型文件结构&#34; class=&#34;section level3&#34; number=&#34;2.1.1&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1.1&lt;/span&gt; xaringan slide的典型文件结构&lt;/h3&gt;
&lt;p&gt;课程仓库下xaringan slide制作的典型文件结构：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;                                levelName
1  course-econometrics                   
2   |--data                              
3   |--pic                               
4   |   |--chpt1-log.png                 
5   |   °--chpt1-curve-points.png        
6   |--01-class-instruction              
7   |--02-lab-exercise                   
8   |--03-slide-class                    
9   |   |--libs                          
10  |   |   |--crosstalk-1.1.1           
11  |   |   |--htmlwidgets-1.5.3         
12  |   |   |   °--htmlwidgets.js        
13  |   |   °--remark-latest.min.js      
14  |   |--01-introduction-slide_files   
15  |   |   °--figure-html               
16  |   |       |--unnamed-chunk-14-1.png
17  |   |       °--unnamed-chunk-15-1.png
18  |   |--01-introduction-slide.html    
19  |   °--01-introduction-slide.Rmd     
20  |--template                          
21  |--EViews                            
22  |--mycss                             
23  |--public                            
24  °--course-econometrics.Rproj         &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan-rmd调用本地图片文件&#34; class=&#34;section level3&#34; number=&#34;2.1.2&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1.2&lt;/span&gt; Xaringan Rmd调用&lt;strong&gt;本地&lt;/strong&gt;图片文件&lt;/h3&gt;
&lt;p&gt;值得注意的是Xaringan Rmd使用&lt;strong&gt;本地&lt;/strong&gt;图片文件（存放在&lt;code&gt;pic/&lt;/code&gt;文件夹下），应该使用相对路径，而不是绝对路径（参看&lt;a href=&#34;https://github.com/yihui/xaringan/issues/145%3E&#34;&gt;the full path approach doesn’t work&lt;/a&gt;）。也即意味着：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;不能使用绝对路径&lt;code&gt;D:/github/course-econometrics/pic/chpt1-log.png&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;同时也不能使用&lt;code&gt;here::here(&#34;pic&#34;,&#34;chpt1-log.png&#34;)&lt;/code&gt;，因为它也会给出绝对路径&lt;code&gt;&#34;D:/github/course-econometrics/pic/chpt1-log.png&#34;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;那么Rmd文件&lt;code&gt;01-introduction-slide.Rmd&lt;/code&gt;对上述本地图片的函数化引用应该设为相对路径形式，如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;markdown&lt;/code&gt;语法：&lt;code&gt;![](&#34;../pic/chpt1-log.png&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;或者&lt;code&gt;knitr&lt;/code&gt;语法：&lt;code&gt;include_graphics(&#34;../pic/chpt1-log.png&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总结起来，图片绝对路径和相对路径的差异比较如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;绝对路径直接无法渲染出图形&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;相对路径可以渲染出图形，而且可以使用chrome浏览器开发工具看到html元素&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;# html develop tool view

&amp;lt;div class=&amp;quot;figure&amp;quot; style=&amp;quot;text-align: center&amp;quot;&amp;gt;
  &amp;lt;img src=&amp;quot;../pic/chpt1-log.png&amp;quot; alt=&amp;quot;一份样本数据&amp;quot; width=&amp;quot;693&amp;quot;&amp;gt;
  &amp;lt;p class=&amp;quot;caption&amp;quot;&amp;gt;一份样本数据&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan-rmd代码块生成的graph&#34; class=&#34;section level3&#34; number=&#34;2.1.3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1.3&lt;/span&gt; Xaringan Rmd代码块生成的graph&lt;/h3&gt;
&lt;p&gt;Rmd使用代码块生成的图片这会自动存放在同名文件夹下的一个文件夹内。如&lt;code&gt;01-introduction-slide.Rmd&lt;/code&gt;，则代码块&lt;code&gt;chunk-14&lt;/code&gt;制图将存放在自动生成的文件夹&lt;code&gt;01-introduction-slide_files/figure-html/unnamed-chunk-14-1.png&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;例如，R代码块14如下：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# r code chunk 14


ggplot(data.frame(x = seq(from = -5, to=5,length =500 )), aes(x = x)) +
  stat_function(fun = dnorm, args = list(0,1),
                aes(color = &amp;quot;mean=0, sd=1&amp;quot;)) +
  stat_function(fun = dnorm, args = list(0.5,2),
                aes(color = &amp;quot;mean=0.5, sd=2&amp;quot;)) +
  scale_colour_manual(&amp;quot;期望和标准差&amp;quot;, values = c(&amp;quot;red&amp;quot;, &amp;quot;blue&amp;quot;))+
  scale_y_continuous(name = &amp;quot;概率值(probability)&amp;quot;) +
  theme(legend.text = element_text(size=16), legend.title = element_text(size=16))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以使用chrome浏览器开发工具看到其对应的html元素：&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;!--- html develop tool view---&amp;gt;

&amp;lt;div class=&amp;quot;figure&amp;quot; style=&amp;quot;text-align: center&amp;quot;&amp;gt;
&amp;lt;img src=&amp;quot;01-introduction-slide_files/figure-html/unnamed-chunk-14-1.png&amp;quot; alt=&amp;quot;正态分布(n=500)&amp;quot;&amp;gt;
&amp;lt;p class=&amp;quot;caption&amp;quot;&amp;gt;正态分布(n=500)&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;若干netlify对接技巧&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 若干netlify对接技巧&lt;/h1&gt;
&lt;div id=&#34;netlify内部相互链接&#34; class=&#34;section level2&#34; number=&#34;3.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; netlify内部相互链接&lt;/h2&gt;
&lt;p&gt;如果要直接在&lt;code&gt;/content/course-econometrics&lt;/code&gt;下用Rmd文件生成.html，然后再别处来调用这个内部的html文件？&lt;/p&gt;
&lt;p&gt;1.基于主站的相对链接引用（已测试）。参看“队长”问答&lt;a href=&#34;https://stackoverflow.com/questions/55930617/linking-to-another-post-in-blogdown&#34;&gt;Linking to another post in blogdown&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设置基准地址，修改&lt;code&gt;config.toml&lt;/code&gt;参数：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# config.toml

baseurl = &amp;quot;https://yourdomain.netlify.app/&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;设定内部引用规则，修改&lt;code&gt;config.toml&lt;/code&gt;参数：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;toml&#34;&gt;&lt;code&gt;# config.toml

[permalinks]
  # If only creating events which are talks, we can optimize event URLs for talks.
  event = &amp;quot;/talk/:slug/&amp;quot;
  # Workaround Hugo publishing taxonomy URLs as plurals - consistently use singular across Academic.
  tags = &amp;quot;/tag/:slug/&amp;quot;
  categories = &amp;quot;/category/:slug/&amp;quot;
  publication_types = &amp;quot;/publication-type/:slug/&amp;quot;
  post = &amp;quot;/:year/:month/:day/:slug/&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Rmd内部链接1：对于&lt;strong&gt;hugo标准模块&lt;/strong&gt;内容的链接。所谓hugo&lt;strong&gt;标准模块内容&lt;/strong&gt;，一般包括hugo版本内置好的&lt;code&gt;post&lt;/code&gt;、&lt;code&gt;publication&lt;/code&gt;、&lt;code&gt;tags&lt;/code&gt;等，可以通过上述&lt;code&gt;config.toml&lt;/code&gt;的参数块&lt;code&gt;[permalinks]&lt;/code&gt;看到其影子。因此，对于hugo标准模块内容的链接引用，都需要在这里指定链接的参数形式。值得说明的是：a.务必要按前述各个模块的链接地址规则进行url设定。b.不要画蛇添足&lt;code&gt;/2020/10/05/hugo-big-update/index.en.html&lt;/code&gt;（哪怕文件夹下有这个html文件）；c.只要设定了refer ID（如&lt;code&gt;{#your-section-refer}&lt;/code&gt;），就可以进行更进一步的链接。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;例如，以链接其他博文post为例，见之前的一篇博客文章谈到的&lt;a href=&#34;https://huhuaping.netlify.app/2020/10/05/hugo-big-update/#double-site&#34;&gt;“双服务器建站需求”&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其背后具体代码如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# note your can refer the section ID as your have set

例如，以链接其他博文post为例，见之前的一篇博客文章谈到的[&amp;quot;双服务器建站需求&amp;quot;](/2020/10/05/hugo-big-update/#double-site)。&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;当然，博文内部章节或任意内容的自我链接（需要事先设定为&lt;code&gt;{#a-ref-id}&lt;/code&gt;）也是一种常见的引用方式。此时对同一篇博文post内部ref ID的引用，则可以直接采用&lt;code&gt;[link-text](#a-ref-id)&lt;/code&gt;的形式。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;例如，请查看前面的content文件系统&lt;a href=&#34;#dir-content&#34;&gt;树形图&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其背后代码为：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 需要事先设定好引用指针
# you should specify the reference ID before link it

例如，请查看前面的content文件系统[树形图](#dir-content)。&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Rmd内部链接2：对于&lt;strong&gt;非hugo标准模块&lt;/strong&gt;内容的链接。与上述对应，非hugo标准模块内容一般指用户根据hugo空白模板&lt;code&gt;widget = &#34;blank&#34;&lt;/code&gt;设定的页面。主站的课程系列（包括course-econometrics、course-advanced-statistics等）的内容（各种课程的文件结构可以参看前面提及的content文件系统&lt;a href=&#34;#dir-content&#34;&gt;树形图&lt;/a&gt;）就是基于hugo空白模板&lt;code&gt;widget = &#34;blank&#34;&lt;/code&gt;生成的。具体模板参数可以逐层追溯看到，例如先查看&lt;code&gt;netlify/content/course-econometrics/_index.md&lt;/code&gt;的yaml参数区域，然后进一步追溯其继承至&lt;code&gt;netlify/config/_default/menus.toml&lt;/code&gt;的toml参数区域，最后发现它的模板是&lt;code&gt;netlify/content/home/teaching.md&lt;/code&gt;ymal参数区域指定的&lt;code&gt;widget = &#34;blank&#34;&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此时，如果要链接在外部拷贝的一个特定静态网页文件，其存放路径&lt;code&gt;netlify/static/course-econometrics/reading/cht01-history.html&lt;/code&gt;（具体可参看前面提到的netlify static文件夹系统&lt;a href=&#34;#dir-static&#34;&gt;树形图&lt;/a&gt;）。此时路径指向应精准和明确。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;例如，请点击查看《计量经济学》课程扩展阅读资料&lt;a href=&#34;https://huhuaping.netlify.app/course-econometrics/reading/cht01-history.html&#34;&gt;计量经济学的前世今生&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其背后的具体代码为：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 路径指向应精准和明确，包含了后缀.html
# specify the file with full path

例如，请点击查看《计量经济学》课程扩展阅读资料[计量经济学的前世今生](/course-econometrics/reading/cht01-history.html)。
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.利用hugo的shortcode特性（未测试）。参看yihui提到的&lt;a href=&#34;https://bookdown.org/yihui/blogdown/content.html-shortcode&#34;&gt;Shortcode方法&lt;/a&gt;。正文行内引用方式：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[第一章](r blogdown::shortcodex(&amp;quot;relref&amp;quot;, &amp;quot;chapter01-introduction.html&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;需要注意的是不能直接引用&lt;code&gt;chapter01-introduction.Rmd&lt;/code&gt;；但是可以直接引用&lt;code&gt;chapter01-introduction.md&lt;/code&gt;或者&lt;code&gt;chapter01-introduction.html&lt;/code&gt;。此外还要注意引用路径是相对的。例如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[博客文章提到](r blogdown::shortcodex(&amp;quot;relref&amp;quot;, &amp;quot;../post/2019-02-24-xaringan-for-course-slide.html&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;output&#34; class=&#34;section level2&#34; number=&#34;3.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; netlify指定Rmd输出格式&lt;/h2&gt;
&lt;p&gt;用.Rmd生成的文档能不能有其他的输出格式呢？还能做些别的么？&lt;/p&gt;
&lt;pre class=&#34;yaml&#34;&gt;&lt;code&gt;# add this in yaml area

output:
  blogdown::html_page:
    toc: true
    number_sections: true&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;对接失败与报错&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 对接失败与报错&lt;/h1&gt;
&lt;div id=&#34;include_url服务器拒绝访问&#34; class=&#34;section level2&#34; number=&#34;4.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; include_url()服务器拒绝访问&lt;/h2&gt;
&lt;p&gt;报错内容：使用&lt;code&gt;knitr::include_url()&lt;/code&gt;函数后，hugo或blogdown渲染网站，都无法显示对本地静态（&lt;code&gt;&#34;static/course/slide.html&#34;&lt;/code&gt;）文件&lt;code&gt;Xaringan slide&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;具体报错内容如下&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;本地预览下，&lt;code&gt;include_url(&#39;/path/to/file.html&#39;)&lt;/code&gt;则显示报错&lt;code&gt;localhost 拒绝了我们的连接请求。&lt;/code&gt;。markdown语法&lt;code&gt;[](/path/to/file.html)&lt;/code&gt;则只显示为纯文本。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;netlify built&lt;/code&gt;在线建站后，&lt;code&gt;include_url(&#39;/path/to/file.html&#39;)&lt;/code&gt;则显示服务器&lt;code&gt;.netlify.app 拒绝了我们的连接请求。&lt;/code&gt;。但是markdown语法&lt;code&gt;[](/path/to/file.html)&lt;/code&gt;则显示正常。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;chrome开发工具显示：&lt;code&gt;&amp;lt;div id=&#34;main-frame-error class=&#34;interstitial-wrapper&#34; &amp;lt;/div&amp;gt;&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1.use markdown syntax（link Ok）。课件（Xaringan slide）&lt;svg style=&#34;height:17;fill:blue;&#34; viewBox=&#34;0 0 512 512&#34;&gt;&lt;path d=&#34;M187.7 153.7c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7s61.7-26 61.7-57.7c0-32-27.7-57.7-61.7-57.7zm143.4 0c-34 0-61.7 25.7-61.7 57.7 0 31.7 27.7 57.7 61.7 57.7 34.3 0 61.7-26 61.7-57.7.1-32-27.4-57.7-61.7-57.7zm156.6 90l-6 4.3V49.7c0-27.4-20.6-49.7-46-49.7H76.6c-25.4 0-46 22.3-46 49.7V248c-2-1.4-4.3-2.9-6.3-4.3-15.1-10.6-25.1 4-16 17.7 18.3 22.6 53.1 50.3 106.3 72C58.3 525.1 252 555.7 248.9 457.5c0-.7.3-56.6.3-96.6 5.1 1.1 9.4 2.3 13.7 3.1 0 39.7.3 92.8.3 93.5-3.1 98.3 190.6 67.7 134.3-124 53.1-21.7 88-49.4 106.3-72 9.1-13.8-.9-28.3-16.1-17.8zm-30.5 19.2c-68.9 37.4-128.3 31.1-160.6 29.7-23.7-.9-32.6 9.1-33.7 24.9-10.3-7.7-18.6-15.5-20.3-17.1-5.1-5.4-13.7-8-27.1-7.7-31.7 1.1-89.7 7.4-157.4-28V72.3c0-34.9 8.9-45.7 40.6-45.7h317.7c30.3 0 40.9 12.9 40.9 45.7v190.6z&#34;/&gt;&lt;/svg&gt;&lt;a href=&#34;https://huhuaping.netlify.app/course-statistics/03-slide-class/01-introduction.html&#34;&gt;第01章-绪论.html&lt;/a&gt; 。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[第01章-绪论.html](/course-statistics/03-slide-class/03-visualization.html)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.try local graphic（graph OK）。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_graphics(&amp;quot;/pic/facet-multiple-geom.png&amp;quot;, error = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://huhuaping.netlify.app/pic/facet-multiple-geom.png&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;3.test the &lt;code&gt;include_url()&lt;/code&gt; （error）：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# out.extra=&amp;#39;style=&amp;quot;border: none;&amp;quot;&amp;#39;, out.width=&amp;#39;80%&amp;#39;
knitr::include_url(&amp;quot;/course-statistics/03-slide-class/03-visualization.html&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;iframe src=&#34;https://huhuaping.netlify.app/course-statistics/03-slide-class/03-visualization.html&#34; width=&#34;80%&#34; height=&#34;400px&#34; style=&#34;border: none;&#34;&gt;
&lt;/iframe&gt;
&lt;p&gt;4.try iframe html tag（error）:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;iframe seamless src=&amp;quot;/course-statistics/03-slide-class/03-visualization.html&amp;quot; width=&amp;quot;100%&amp;quot; height=&amp;quot;500&amp;quot;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;iframe seamless src=&#34;https://huhuaping.netlify.app/course-statistics/03-slide-class/03-visualization.html&#34; width=&#34;100%&#34; height=&#34;500&#34;&gt;
&lt;/iframe&gt;
&lt;p&gt;5.test &lt;code&gt;xaringanExtra::embed_xaringan()&lt;/code&gt;（error）:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;xaringanExtra::embed_xaringan(
  url = &amp;quot;/course-statistics/03-slide-class/03-visualization.html&amp;quot;,
  ratio = &amp;quot;16:9&amp;quot;
)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;shareagain&#34; style=&#34;min-width:300px;margin:1em auto;&#34;&gt;
&lt;iframe src=&#34;https://huhuaping.netlify.app/course-statistics/03-slide-class/03-visualization.html&#34; width=&#34;1600&#34; height=&#34;900&#34; style=&#34;border:2px solid currentColor;&#34; loading=&#34;lazy&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;script&gt;fitvids(&#39;.shareagain&#39;, {players: &#39;iframe&#39;});&lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;排除可能的问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;win10 系统防火墙&lt;a href=&#34;https://stackoverflow.com/questions/64252065/problem-rendering-hugo-lithium-theme-blogdown-acess-denied&#34;&gt;设置&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;chrome隐私&lt;a href=&#34;https://stackoverflow.com/questions/51634998/cannot-get-iframe-to-appear-on-static-html-page-after-knitting-through-rmarkdown&#34;&gt;设置&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;knitr::include_url()&lt;/code&gt;函数是否正确，包括&lt;code&gt;chunk option&lt;/code&gt;设定。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;url地址是否正确。外部绝对url地址显示正确。本地相对地址则报错。但使用&lt;code&gt;knitr::include_graphic()&lt;/code&gt;加载本地图片则能正确显示图片。排除url地址误写。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用&lt;code&gt;iframe tag&lt;/code&gt;方法，仍旧报错。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用&lt;code&gt;xaringanExtra::embed_xaringan()&lt;/code&gt;，仍旧报错。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;怀疑的可能原因：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;根据hugo团队的观点，它们会原生支持&lt;code&gt;rveal.js&lt;/code&gt;，但不是&lt;code&gt;remark.js&lt;/code&gt;。（见&lt;a href=&#34;&#34;&gt;队长讨论&lt;/a&gt;）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;win10操作系统静默升级，改变了hugo的链接访问权限？？&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Netlify&lt;/code&gt;的建站规则发生了变化？&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;knitr&lt;/code&gt;包的bug（iframe id失效）？&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>自动化数据抓取技术(V)：APACHA人机验证机制</title>
      <link>https://huhuaping.netlify.app/2020/12/05/web-scraping-tech-vision-volidation/</link>
      <pubDate>Sat, 05 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/12/05/web-scraping-tech-vision-volidation/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#apacha人机验证的类型&#34;&gt;APACHA人机验证的类型&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#视觉识别ocr技术&#34;&gt;视觉识别OCR技术&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#传统的tesseract识别包&#34;&gt;传统的tesseract识别包&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#google-vision-云平台api&#34;&gt;google vision 云平台API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;apacha人机验证的类型&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;APACHA人机验证的类型&lt;/h1&gt;
&lt;p&gt;APACHA是一种人机验证机制，对于网络爬虫而言，大家更熟悉的是网站采用APACHA机制来设置“防爬虫”门槛，也即各类验证码、滑块验证。这种验证机制比较成熟和严谨，应用场景十分广泛。如何有效识别和破解成为现实一大难题。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;视觉识别ocr技术&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;视觉识别OCR技术&lt;/h1&gt;
&lt;p&gt;实际上视觉识别已经发展到多个领域，包括图片标记、面孔和地标检测、光学字符识别 (OCR)等。&lt;/p&gt;
&lt;div id=&#34;传统的tesseract识别包&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;传统的tesseract识别包&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;tesseract&lt;/code&gt;包专门用于从图片中提取文本&lt;a href=&#34;https://github.com/ropensci/tesseract&#34;&gt;github repo&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;优点：独立算法，简单快速，本地即可运行，无需联网。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;缺点：算法比较老旧，识别准确率不太高。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体代码示例如下：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install.packages(&amp;quot;tesseract&amp;quot;)
library(&amp;quot;tesseract&amp;quot;)
dir_gray &amp;lt;- here::here(&amp;quot;pic&amp;quot;, &amp;quot;zhuyun&amp;quot;, &amp;quot;valid-img-gray.png&amp;quot;)
eng &amp;lt;- tesseract(&amp;quot;eng&amp;quot;)
txt &amp;lt;- tesseract::ocr(image = dir_gray, engine = eng) %&amp;gt;% str_extract(&amp;quot;\\d{4}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;google-vision-云平台api&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;google vision 云平台API&lt;/h2&gt;
&lt;p&gt;google cloud platform 提供了Vision API，可以完成各类视觉识别任务。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：识别技术强大，识别准确率高。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;缺点&lt;/strong&gt;：（国内）需要网络和网速支持。另外就是有使用量的限制，需要支付结算进行扩容使用量。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R用户的具体实现：&lt;/p&gt;
&lt;p&gt;1.申请google vision API接入授权。具体：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;登陆google开发者控制台（&lt;a href=&#34;https://console.cloud.google.com/&#34;&gt;Google’s developer console&lt;/a&gt;）进行申请和授权。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;创建project，并申请开通Vision的API服务。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设置&lt;code&gt;OAuth 2.0&lt;/code&gt;客户端和OAuth同意屏幕。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2.下载安装&lt;code&gt;RoogleVision&lt;/code&gt;包（&lt;a href=&#34;https://github.com/cloudyr/RoogleVision&#34;&gt;github repo&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;具体代码示例如下：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install.packages(&amp;quot;RoogleVision&amp;quot;, repos = c(getOption(&amp;quot;repos&amp;quot;), &amp;quot;http://cloudyr.github.io/drat&amp;quot;))
if (!require(&amp;quot;devtools&amp;quot;)) {
    install.packages(&amp;quot;ghit&amp;quot;)
}
devtools::install_github(&amp;quot;cloudyr/RoogleVision&amp;quot;)

library(&amp;quot;RoogleVision&amp;quot;)

### plugin your credentials
options(&amp;quot;googleAuthR.client_id&amp;quot; = keyring::key_get(&amp;quot;id&amp;quot;, keyring = &amp;quot;gg-vision2&amp;quot;))
options(&amp;quot;googleAuthR.client_secret&amp;quot; = keyring::key_get(&amp;quot;secret&amp;quot;, keyring = &amp;quot;gg-vision2&amp;quot;))

## use the fantastic Google Auth R package
### define scope!
options(&amp;quot;googleAuthR.scopes.selected&amp;quot; = c(&amp;quot;https://www.googleapis.com/auth/cloud-platform&amp;quot;))

googleAuthR::gar_auth()


#Basic: you can provide both, local as well as online images:
txt &amp;lt;- getGoogleVisionResponse(imagePath=&amp;quot;pic/zhuyun/valid-img-gray.png&amp;quot;, feature=&amp;quot;TEXT_DETECTION&amp;quot;,numResults = 1)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>自动化数据抓取技术(IV)：正则表达Regex</title>
      <link>https://huhuaping.netlify.app/2020/12/04/web-scraping-tech-regex/</link>
      <pubDate>Fri, 04 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/12/04/web-scraping-tech-regex/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#学习教程和文档&#34;&gt;学习教程和文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#常见问题场景&#34;&gt;常见问题场景&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#任意中文字符&#34;&gt;任意中文字符&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#指定出现次数&#34;&gt;指定出现次数&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#杂谈&#34;&gt;杂谈&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#中文半破折号&#34;&gt;中文半破折号&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;学习教程和文档&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;学习教程和文档&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Regex Cheat Sheet&lt;/strong&gt;。参看rexegg.com网站教程](&lt;a href=&#34;https://www.rexegg.com/regex-quickstart.html#lookarounds&#34; class=&#34;uri&#34;&gt;https://www.rexegg.com/regex-quickstart.html#lookarounds&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;regular-expressions.info&lt;/strong&gt;。参看&lt;a href=&#34;https://www.regular-expressions.info/tutorial.html&#34;&gt;网站教程&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;常见问题场景&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;常见问题场景&lt;/h2&gt;
&lt;div id=&#34;任意中文字符&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;任意中文字符&lt;/h3&gt;
&lt;p&gt;具体请&lt;a href=&#34;https://stackoverflow.com/questions/56723142/regex-to-match-any-chinese-character-in-r&#34;&gt;参看&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;v=c(&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;,&amp;quot;中&amp;quot;,&amp;quot;e&amp;quot;,&amp;quot;文&amp;quot;)
    grep(&amp;quot;[\\p{Han}]&amp;quot;, v, value = T, perl = T)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;中&amp;quot; &amp;quot;文&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;指定出现次数&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;指定出现次数&lt;/h3&gt;
&lt;p&gt;具体请参看&lt;a href=&#34;https://stackoverflow.com/questions/13874777/regex-exactly-n-or-m-times&#34;&gt;参看&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;?, ??&lt;/code&gt; : 0 or 1 occurrences (&lt;code&gt;??&lt;/code&gt; is lazy, &lt;code&gt;?&lt;/code&gt; is greedy)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;*, *?&lt;/code&gt; : any number of occurrences&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;+, +?&lt;/code&gt; : at least one occurrence&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n}&lt;/code&gt; : exactly n occurrences&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n,m}&lt;/code&gt; : n to m occurrences, inclusive&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n,m}?&lt;/code&gt; : n to m occurences, lazy&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n,}, {n,}?&lt;/code&gt; : at least n occurrence&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例子：&lt;/p&gt;
&lt;p&gt;To get “exactly N or M”, you need to write the quantified regex twice, unless m,n are special:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;X{n,m} if m = n+1
(?:X{n}){1,2} if m = 2n
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;杂谈&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;杂谈&lt;/h2&gt;
&lt;div id=&#34;中文半破折号&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;中文半破折号&lt;/h3&gt;
&lt;p&gt;通过regex查找替换&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(\d{4})-(\d{4})  替换为 \1—\2&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>自动化数据抓取技术(III)：网页元素处理</title>
      <link>https://huhuaping.netlify.app/2020/12/03/web-scraping-tech-webelem/</link>
      <pubDate>Thu, 03 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/12/03/web-scraping-tech-webelem/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#常见问题场景及处理方法&#34;&gt;常见问题场景及处理方法&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#中文乱码问题&#34;&gt;中文乱码问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#nodes节点选择&#34;&gt;nodes节点选择&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#利用chrome浏览器查看json数据&#34;&gt;利用chrome浏览器查看json数据&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;常见问题场景及处理方法&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;常见问题场景及处理方法&lt;/h2&gt;
&lt;div id=&#34;中文乱码问题&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;中文乱码问题&lt;/h3&gt;
&lt;p&gt;中文乱码问题再次出现，见各种乱码问题。编码问题详解可以参看&lt;a href=&#34;https://kunststube.net/encoding/&#34;&gt;What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;1.快捷办法，直接抓取网页表格，无论如何都显示乱码。只能放弃。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# look for table element
tableElem &amp;lt;- remDr$findElement(using = &amp;quot;id&amp;quot;, &amp;quot;courseTable&amp;quot;)

txt &amp;lt;- tableElem$getElementAttribute(&amp;quot;outerHTML&amp;quot;)[[1]]

table &amp;lt;- XML::readHTMLTable(txt, header=F, as.data.frame=TRUE)[[1]]&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;暴力抓取网页元素总，虽然颇为费劲，但总是可行。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# scrape the date and room 
v_date &amp;lt;- txt %&amp;gt;% read_html() %&amp;gt;%  xml_nodes(&amp;quot;tbody&amp;quot;) %&amp;gt;% xml_nodes(&amp;quot;td:nth-child(2)&amp;quot;) %&amp;gt;% xml_text()

v_room &amp;lt;- txt %&amp;gt;% read_html() %&amp;gt;%  xml_nodes(&amp;quot;tbody&amp;quot;) %&amp;gt;% xml_nodes(&amp;quot;td:nth-child(4)&amp;quot;) %&amp;gt;% xml_text()

# tidy data.frame
info &amp;lt;- data.frame(date=v_date, room =v_room) %&amp;gt;%
  separate(col = &amp;quot;date&amp;quot; , into = c(&amp;quot;date&amp;quot;,&amp;quot;week&amp;quot;, &amp;quot;weekday&amp;quot;, &amp;quot;slot&amp;quot;), sep = &amp;quot; &amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;nodes节点选择&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;nodes节点选择&lt;/h3&gt;
&lt;p&gt;如何选择和提取网页多个节点tr下第n个元素td下的文本text。参看&lt;a href=&#34;https://stackoverflow.com/questions/56782998/how-to-extract-text-in-second-p-element-inside-div&#34;&gt;网络解答&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;    txt %&amp;gt;% 
  read_html() %&amp;gt;%  
  xml_nodes(&amp;quot;tbody&amp;quot;) %&amp;gt;% 
  xml_nodes(&amp;quot;td:nth-child(2)&amp;quot;) %&amp;gt;% 
  xml_text()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;利用chrome浏览器查看json数据&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;利用chrome浏览器查看json数据&lt;/h3&gt;
&lt;p&gt;具体参看&lt;a href=&#34;https://stackoverflow.com/questions/31775176/scraping-javascript-in-r-with-rselenium&#34;&gt;资料&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Using Chrome: Right-click &amp;gt; Inspect; navigate to Network tab &amp;gt; type in .json &amp;gt; Search &amp;gt; Refresh Site (to catch calls made prior) &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>自动化数据抓取技术(II)： RSelenium</title>
      <link>https://huhuaping.netlify.app/2020/12/02/web-scraping-tech-rselenium/</link>
      <pubDate>Wed, 02 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/12/02/web-scraping-tech-rselenium/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#学习材料&#34;&gt;学习材料&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#经常碰到的爬虫场景和处理方法&#34;&gt;经常碰到的爬虫场景和处理方法&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#正确关闭rselenium-server&#34;&gt;正确关闭Rselenium server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#在浏览器窗口之间进行自由切换&#34;&gt;在浏览器窗口之间进行自由切换&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#鼠标相关操作&#34;&gt;鼠标相关操作&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#选择不可见的勾选框&#34;&gt;选择不可见的勾选框&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#日历和下拉菜单操作&#34;&gt;日历和下拉菜单操作&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#悬置鼠标唤出下级菜单&#34;&gt;悬置鼠标唤出下级菜单&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;学习材料&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;学习材料&lt;/h2&gt;
&lt;p&gt;RSelenium包在CRAN的官方&lt;a href=&#34;https://cran.r-project.org/web/packages/RSelenium/vignettes/basics.html#introduction&#34;&gt;文档&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;常用的操作，可以参考中文&lt;a href=&#34;https://blog.csdn.net/weixin_40628687/article/details/79008995&#34;&gt;教程&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;经常碰到的爬虫场景和处理方法&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;经常碰到的爬虫场景和处理方法&lt;/h2&gt;
&lt;p&gt;下面列出一些常碰到的爬虫场景和处理办法。&lt;/p&gt;
&lt;div id=&#34;正确关闭rselenium-server&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;正确关闭Rselenium server&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;remDr$closeServer()
remDr$close()
rm(remDr)
rm(driver)
gc()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;在浏览器窗口之间进行自由切换&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;在浏览器窗口之间进行自由切换&lt;/h3&gt;
&lt;p&gt;具体见github issue社区互动 &lt;a href=&#34;https://github.com/ropensci/RSelenium/issues/143&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;myswitch &amp;lt;- function (remDr, windowId) 
{
  qpath &amp;lt;- sprintf(&amp;quot;%s/session/%s/window&amp;quot;, remDr$serverURL, 
                   remDr$sessionInfo[[&amp;quot;id&amp;quot;]])
  remDr$queryRD(qpath, &amp;quot;POST&amp;quot;, qdata = list(handle = windowId))
}

Sys.sleep(1)
windows_handles &amp;lt;- remDr$getWindowHandles()
Sys.sleep(1)
#remDr$switchToWindow(windows_handles[[2]])

myswitch(remDr = remDr, windowId = windows_handles[[2]])&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;鼠标相关操作&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;鼠标相关操作&lt;/h3&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;移动鼠标到指定位置 并点击&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;xpath_submit &amp;lt;- &amp;quot;//*[@id=&amp;#39;loginform-1&amp;#39;]/div[4]/input&amp;quot;
webelm &amp;lt;- remDr$findElement(using = &amp;quot;xpath&amp;quot;, value = xpath_submit)
loc &amp;lt;- remDr$mouseMoveToLocation(webElement = webelm)
remDr$click(1)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;选择不可见的勾选框&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;选择不可见的勾选框&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;参考&lt;a href=&#34;https://stackoverflow.com/questions/46253566/selenium-cant-click-specific-checkbox&#34;&gt;网络问答&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对于一些网站，有时候存在肉眼不可见的网页元素。具体图示如下：&lt;/p&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:unnamed-chunk-5&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/check-box-invisible.png&#34; alt=&#34;一个示例&#34;  /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: 一个示例
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;这时，我们需要使用&lt;code&gt;remDr$executeScript()&lt;/code&gt;函数来执行&lt;code&gt;java&lt;/code&gt;操作。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;webelem &amp;lt;- remDr$findElement(using = &amp;quot;xpath&amp;quot;, &amp;quot;//*[@id=&amp;#39;ztcountryCode_273_check&amp;#39;]&amp;quot;)

remDr$executeScript(&amp;quot;arguments[0].click()&amp;quot;, args = list(webelem))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;日历和下拉菜单操作&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;日历和下拉菜单操作&lt;/h3&gt;
&lt;p&gt;一个比较全的&lt;a href=&#34;https://towardsdatascience.com/climbing-mt-whitney-with-web-browser-automation-and-r-b11dcf9353b2&#34;&gt;示例&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;悬置鼠标唤出下级菜单&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;悬置鼠标唤出下级菜单&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/37307379/how-to-click-a-link-in-a-hover-menu-with-selenium-webdriver&#34;&gt;见示例&lt;/a&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>自动化数据抓取技术(I)：基础准备</title>
      <link>https://huhuaping.netlify.app/2020/11/30/web-scraping-tech-basic/</link>
      <pubDate>Mon, 30 Nov 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/11/30/web-scraping-tech-basic/</guid>
      <description>
&lt;link href=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#环境和安装&#34;&gt;环境和安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#一些必要设置&#34;&gt;一些必要设置&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#docker设置&#34;&gt;docker设置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tightvnc配置&#34;&gt;TightVNC配置&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#docker常用操作&#34;&gt;docker常用操作&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;环境和安装&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;环境和安装&lt;/h2&gt;
&lt;p&gt;1.下载安装docker desk&lt;a href=&#34;https://www.docker.com/products/docker-desktop&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;win10用户需要注意一个操作系统的坑。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Win10的&lt;strong&gt;专业版用户&lt;/strong&gt;(professional version)，可以直接安装docker desk。但是也需要需要启用hyper-V 虚拟服务。可以ctrl+shift+delete查看cpu性能，能看到是否已经启用。具体启用办法：进bios –&amp;gt; system security，记得按F10确认启用。（ps. 2020版win10开始有了性的服务支持，主要是liniux模块的加入，可以进一步提升docker的运行性能。）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Win10&lt;strong&gt;家庭版用户&lt;/strong&gt;(home version)不支持docker desk，只能使用安装Install Docker Toolbox&lt;a href=&#34;https://docs.docker.com/toolbox/toolbox_install_windows/&#34;&gt;官网下载&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2.下载安装TightVNC用于查看实时交互。&lt;/p&gt;
&lt;p&gt;下载安装TightVNC用于查看实时交互。&lt;a href=&#34;https://www.tightvnc.com/&#34;&gt;官网&lt;/a&gt;。一份说明供学习：&lt;a href=&#34;https://cran.r-project.org/web/packages/RSelenium/vignettes/docker.html#debugging-using-vnc&#34;&gt;Debugging Using VNC&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3.Rstudio安装RSelenium包。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;一些必要设置&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;一些必要设置&lt;/h2&gt;
&lt;div id=&#34;docker设置&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;docker设置&lt;/h3&gt;
&lt;p&gt;1.注册docker hub账号。（此步骤可忽略）。&lt;/p&gt;
&lt;p&gt;2.配置国内镜像站点。速度明显改观！docker desk软件里设置修改：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;RegistryMirror&amp;quot;: [
                &amp;quot;https://hub-mirror.c.163.com&amp;quot;,
                &amp;quot;https://mirror.baidubce.com&amp;quot;
                ]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果是Docker toolbox则需要修改配置文件&lt;code&gt;C:\Users\&amp;lt;user&amp;gt;\.docker\machine\machines\default\config.json&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;tightvnc配置&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;TightVNC配置&lt;/h3&gt;
&lt;p&gt;参看&lt;a href=&#34;https://gist.github.com/HanjoStudy/aeb331b7a277be9639f3cfb3bf875ba2&#34;&gt;资料1&lt;/a&gt;，或Youtube视频&lt;a href=&#34;https://www.youtube.com/watch?v=OxbvFiYxEzI&#34;&gt;资料2&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;第一步，docker命令行，拉取chrome。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ docker run --name chrome -v /dev/shm:/dev/shm -d -p 4445:4444 -p 5901:5900 selenium/standalone-chrome-debug:latest&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上命令主要内容是，创建chrome实例，并分别打开两类端口。其中第一类端口&lt;code&gt;4445:4444&lt;/code&gt;是分配给chrome通信；第二类端口&lt;code&gt;5901:5900&lt;/code&gt;是分配给下面的TightVNC通信。&lt;/p&gt;
&lt;p&gt;第二步，配置TightVNC Viewer【注意：不是server】。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;端口：127.0.0.1:5901   【option 里面要设置port为5901】
密码：secret&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;docker常用操作&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;docker常用操作&lt;/h2&gt;
&lt;p&gt;1.docker命令拉取selenium -chrome镜像。&lt;/p&gt;
&lt;p&gt;标准模式：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ docker run -d -p 4445:4444 selenium/standalone-chrome
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;诊断模式：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ docker run -d -p 4445:4444 selenium/standalone-chrome-debug
$ docker run -d -p 5901:5900 -p 192.168.31.135:4445:4444 --link http-server selenium/standalone-chrome-debug
  &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.docker常见操作&lt;a href=&#34;https://stackoverflow.com/questions/45395849/cant-execute-rsdriver-connection-refused&#34;&gt;参看资料&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3.Docker与jave version的匹配&lt;/p&gt;
&lt;p&gt;查看java 版本。&lt;a href=&#34;https://stackoverflow.com/questions/49189913/how-to-check-java-version-of-the-docker-container&#34;&gt;参考&lt;/a&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ docker exec 【containerId】 java -version
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Docker 设置jave_home环境变量。&lt;a href=&#34;https://stackoverflow.com/questions/46277631/change-java-home-in-docker/56035653&#34;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ docker  ENV JAVA_HOME /path/to/java
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>问题集和方法荟萃</title>
      <link>https://huhuaping.netlify.app/2020/11/30/issue-collection-tem/</link>
      <pubDate>Mon, 30 Nov 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/11/30/issue-collection-tem/</guid>
      <description>
&lt;link href=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.js&#34;&gt;&lt;/script&gt;


&lt;div id=&#34;r提醒程序執行完成&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R提醒程序執行完成&lt;/h2&gt;
&lt;p&gt;R提醒程序執行完成 &lt;a href=&#34;http://lc-research.blogspot.com/2015/02/r.html&#34;&gt;参看&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一是beepr這個package，執行後電腦會發出聲音提醒你程式已經跑完。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(beepr)
beep(sound=8)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You just have to wrap it into a function like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;options(error = function() {beep(9)})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;最终方案：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;beep_on_error(expr, sound = 1)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;blogdown-的文件位置和关系&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;blogdown 的文件位置和关系&lt;/h2&gt;
&lt;p&gt;具体参看 &lt;a href=&#34;https://blogdown-demo.rbind.io/2018/02/27/r-file-paths/#place-file-in-your-post-folder&#34;&gt;Adding and reading local data files in R Markdown posts&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Xaringan效率：底层与简洁</title>
      <link>https://huhuaping.netlify.app/2020/11/28/xaringan-slide-efficiency/</link>
      <pubDate>Sat, 28 Nov 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/11/28/xaringan-slide-efficiency/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan底层逻辑&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; Xaringan底层逻辑&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的渲染方式&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.1&lt;/span&gt; Xaringan的渲染方式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#共用文件夹的情形&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.2&lt;/span&gt; 共用文件夹的情形&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#测试和发现&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.3&lt;/span&gt; 测试和发现&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan效率方法&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; Xaringan效率方法&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#减少系统复杂性&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 减少系统复杂性&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#提高代码复用性&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 提高代码复用性&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#修改预览实时化&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3&lt;/span&gt; 修改预览实时化&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#选用一个好模板&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.4&lt;/span&gt; 选用一个好模板&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#定制个性化模板&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.5&lt;/span&gt; 定制个性化模板&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#结论&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.6&lt;/span&gt; 结论&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;xaringan底层逻辑&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; Xaringan底层逻辑&lt;/h1&gt;
&lt;div id=&#34;xaringan的渲染方式&#34; class=&#34;section level2&#34; number=&#34;1.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.1&lt;/span&gt; Xaringan的渲染方式&lt;/h2&gt;
&lt;p&gt;Xaringan slide的渲染方式主要有两类&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;静态渲染方式：Rstudio菜单knit&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;实时渲染有两种方式（live preview）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rstudio里插件 “Infinite Moon Reader”&lt;/li&gt;
&lt;li&gt;console里调用xaringan::xaringan::inf_mr()&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;共用文件夹的情形&#34; class=&#34;section level2&#34; number=&#34;1.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.2&lt;/span&gt; 共用文件夹的情形&lt;/h2&gt;
&lt;p&gt;mycss：假定课程里全部slide都使用同样的css风格。&lt;/p&gt;
&lt;p&gt;pic：假定课程slide里的本地图片都放在pic文件夹下。&lt;/p&gt;
&lt;p&gt;若干可能的文件体系结构及面临的主要问题&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;体系1“全部一起堆放”：随着Rmd文件数的增加，一级目录下会有很多文件！&lt;code&gt;chn-chpt01.Rmd; chn-chpt02.Rmd；……；eng-chpt01.Rmd; eng-chpt02.Rmd；……&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;体系2“分模块堆放”：比较合理。但是在实时渲染时，将面临如何管理css和pic等问题。子文件夹1：&lt;code&gt;Slide-chn：chn-chpt01.Rmd; chn-chpt02.Rmd；……&lt;/code&gt;;子文件夹2：&lt;code&gt;Slide-eng：eng-chpt01.Rmd; eng-chpt02.Rmd；……&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;测试和发现&#34; class=&#34;section level2&#34; number=&#34;1.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.3&lt;/span&gt; 测试和发现&lt;/h2&gt;
&lt;p&gt;测试：比较合理的体系2“分模块对方”下，进行实时渲染&lt;/p&gt;
&lt;p&gt;css问题：xaringan包已经解决此问题。只要确保css文件和Rmd文件在同一个work directory下即可。&lt;/p&gt;
&lt;p&gt;pic问题：假定pic文件夹与模块文件夹(slide-chn; slide-eng)并列&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;静态渲染方式下，图片引用可以使用“相对路径”&lt;code&gt;(&#34;../pic/a.png&#34;)&lt;/code&gt;或“绝对路径”（&lt;code&gt;here::here(&#34;pic&#34;, &#34;a.png&#34;)&lt;/code&gt;）引用的任何一种来实现正常显示。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;实时渲染方式下，图片引用只能使用“相对路径”(“../pic/a.png”)来实现正常显示。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan效率方法&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; Xaringan效率方法&lt;/h1&gt;
&lt;div id=&#34;减少系统复杂性&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 减少系统复杂性&lt;/h2&gt;
&lt;p&gt;Yongfu的&lt;a href=&#34;https://yongfu.name/2019/04/29/xaringan_tips.html&#34;&gt;博客文章&lt;/a&gt;Tips to Reduce the Complexity of Slide Making with Xaringan，比较详细地介绍了如何减少xaringan制作复杂性的一些方法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用子文档（child document）架构（see rmarkdown cookbook: &lt;a href=&#34;https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html&#34;&gt;16.4 Child documents&lt;/a&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;提高代码复用性&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 提高代码复用性&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;引用代码块。前后slide如果要多次（2次及以上）用到同样的代码块，则可以使用代码块标签索引（see rmarkdown cookbook: &lt;a href=&#34;https://bookdown.org/yihui/rmarkdown-cookbook/reuse-chunks.html&#34;&gt;reference labels&lt;/a&gt;）。具体有两种操作情形：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;简单重复引用代码块。先定义label，然后直接使用相同标签的代码块头即可。&lt;/li&gt;
&lt;li&gt;组合引用多个代码块。先定义label，然后设定&lt;code&gt;ref.label=&lt;/code&gt;参数进行引用即可。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 简单重复引用代码块
`` `{r, chunk-one, eval=TRUE} # def

some long content balabala 

`` `{r, chunk-one, eval=TRUE} # use
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 组合引用多个代码块

`` `{r chunk-a} # def1

some long content balabala 

`` `{r chunk-b} # def2

some long content balabala 

`` `{r chunk-a, ref.label=c(&amp;#39;chunk-c&amp;#39;, &amp;#39;chunk-b&amp;#39;)} # use
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;修改预览实时化&#34; class=&#34;section level2&#34; number=&#34;2.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3&lt;/span&gt; 修改预览实时化&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;赶紧去看Yihui的blog，&lt;a href=&#34;https://yihui.name/en/2019/02/ultimate-inf-mr/&#34;&gt;The Ultimate Infinite Moon Reader for xaringan Slides&lt;/a&gt;。赶快安装更新包：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;remotes::install_github(&amp;#39;yihui/xaringan&amp;#39;, upgrade = TRUE)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;而且是Windows用户的又一个福音啊。前面刚说Rstudio里不能Viewer预览，但是更新Xaringan包后发现Chrome浏览器竟然可以“实时”同步预览了！yoo！&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;定制自己的字体大小：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在Rmd文档里添加代码：(参看&lt;a href=&#34;https://stackoverflow.com/questions/53481699/customize-font-size-for-all-the-slides-in-xaringan&#34;&gt;Customize font size for all the slides in xaringan&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;style type=&amp;quot;text/css&amp;quot;&amp;gt;
.remark-slide-content {
    font-size: 30px;
    padding: 1em 4em 1em 4em;
}
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;选用一个好模板&#34; class=&#34;section level2&#34; number=&#34;2.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.4&lt;/span&gt; 选用一个好模板&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;比如我使用的杜克大学模板：&lt;a href=&#34;https://johnlittle.info/dukeslides/&#34;&gt;Slide Template for Duke University&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;初学者最好先不要删除模板的内容，里面的示例说明可以很好地参考。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;定制个性化模板&#34; class=&#34;section level2&#34; number=&#34;2.5&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.5&lt;/span&gt; 定制个性化模板&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;关于动画设置。并不是ppt的专利。可以实现的，请参看&lt;a href=&#34;https://www.garrickadenbuie.com/blog/animate-xaringan-slide-transitions/&#34;&gt;Animate Xaringan Slide Transitions&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关于定制样式。世界另一头，总有一个大牛，已经做好了包供你使用，具体请看&lt;a href=&#34;https://www.garrickadenbuie.com/project/xaringanthemer/&#34;&gt;xaringanthemer&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;结论&#34; class=&#34;section level2&#34; number=&#34;2.6&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.6&lt;/span&gt; 结论&lt;/h2&gt;
&lt;p&gt;xaringan实时渲染方式，会调用servr package来搭建本地网页服务[参看官方文档] (&lt;a href=&#34;https://bookdown.org/yihui/rmarkdown/xaringan-preview.html&#34; class=&#34;uri&#34;&gt;https://bookdown.org/yihui/rmarkdown/xaringan-preview.html&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;因此实时渲染下：本地服务会寻找一个根目录（root directory），从而会引发上述的图片渲染问题。libs文件夹总是会和.Rmd文件并列&lt;/p&gt;
&lt;p&gt;总之，使用相对路径引用图片是比较保险的方式。具体的地方包括&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;remark.js背景图：&lt;code&gt;background-image: url(&#34;../pic/a.png&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;R函数正文图：&lt;code&gt;include_graphics(&#34;../pic/a.png&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;markdown行内图：&lt;code&gt;![](&#34;../pic/a.png&#34;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其次，css的yaml设置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;css: 
      - default
      - default-fonts
      - duke-blue
      - hygge-duke
      - ../mycss/my-custom.css&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>使用Zotero实现文献引用的自动化Rmarkdown写作</title>
      <link>https://huhuaping.netlify.app/2020/10/09/rmarkdown-zotero-rbbt/</link>
      <pubDate>Fri, 09 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/10/09/rmarkdown-zotero-rbbt/</guid>
      <description>


&lt;blockquote&gt;
&lt;p&gt;Rmarkdown写作环境下，Zotero + rbbt的方式，基本上实现了比较满意的文献管理和引用流程。Zotero具有免费和相对开放性。Zotero对bibTeX和中文情景比较友好。此外，R包rbbt函数实现了对Zotero的实时联系，引用流程更加自动化。使用者需要正确理解Rmd渲染输出、.bib文件状态和Zotero条目库的关系。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;zotero环境准备&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;zotero环境准备&lt;/h1&gt;
&lt;div id=&#34;安装zotero和扩展插件zotero-better-bibtex&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;安装zotero和扩展插件zotero-better-bibtex。&lt;/h2&gt;
&lt;p&gt;安装文献管理软件zotero和浏览器插件 。&lt;a href=&#34;https://www.zotero.org/&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;软件本体Zotero 5.0 for Windows &lt;a href=&#34;https://www.zotero.org/download/client/dl?channel=release&amp;amp;platform=win32&amp;amp;version=5.0.89&#34;&gt;下载&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;浏览器插件Zotero Connector &lt;a href=&#34;https://chrome.google.com/webstore/detail/ekhagklcjbdpajgpjgmbionohlpdbjgc&#34;&gt;chrome 浏览器插件下载&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装Zotero扩展插件zotero-better-bibtex &lt;a href=&#34;https://retorque.re/zotero-better-bibtex/&#34;&gt;开发者网站&lt;/a&gt;。zotero-better-bibtex-5.2.78.xpi &lt;a href=&#34;https://github.com/retorquere/zotero-better-bibtex/releases&#34;&gt;下载安装&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;设定citekey的形式默认形式太冗长&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;设定Citekey的形式（默认形式太冗长）。&lt;/h2&gt;
&lt;p&gt;具体修改&lt;a href=&#34;https://retorque.re/zotero-better-bibtex/citing/&#34;&gt;方法&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;设定citekey形式：打开Zotero&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 编辑&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 首选项&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Better Bibtex（插件菜单&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Citation keys。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;更新citekey值：Zotero&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 选中文献条目&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt;鼠标右键 &lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Better Bibtex&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; refresh Bibtex key。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;r环境准备&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;R环境准备&lt;/h1&gt;
&lt;div id=&#34;zotero导出.bib文件&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;zotero导出.bib文件&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;选定需要的Zotero的文献组(group)，直接导出为.bib文件&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将.bib文件保存在写作文件.Rmd路径中&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;写作文件.Rmd的yaml区域指明对.bib的关联关系&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;bibliography: 
  - bib-west.bib
  - west-agri.bib&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;写作文件.Rmd的yaml区域设定文献列出样式（csl style）及关联关系&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;biblio-style: &amp;quot;nnsfc.csl&amp;quot;
csl: &amp;quot;nnsfc.csl&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;安装rbbt包并进行文献搜索和引用&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;安装&lt;code&gt;rbbt&lt;/code&gt;包，并进行文献搜索和引用&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# remotes::install_github(&amp;quot;paleolimbot/rbbt&amp;quot;)
#require(&amp;quot;rbbt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R包&lt;code&gt;rbbt&lt;/code&gt;的主要作用&lt;a href=&#34;https://github.com/paleolimbot/rbbt&#34;&gt;见github&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;与Zotero文献库直接关联，方便引用。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;与.Rmd文件头yaml区域指定的.bib文件关联，实现“参考文献”列出。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;主要过程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装&lt;code&gt;rbbt&lt;/code&gt;包。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# remotes::install_github(&amp;quot;paleolimbot/rbbt&amp;quot;)
require(&amp;quot;rbbt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Rstudio&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 点击Addins&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Insert Zotero Citation。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;总结及注意事项&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;总结及注意事项&lt;/h1&gt;
&lt;p&gt;Rmarkdown写作环境下，Zotero + &lt;code&gt;rbbt&lt;/code&gt;的方式，基本上实现了比较满意的文献管理和引用流程，&lt;strong&gt;优点&lt;/strong&gt;如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Zotero的免费和相对开放性。免费+插件扩展。对很多网站的文章citation能够快速识别并导入到Zotero库里去，而且还能自动下载关联pdf！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Zotero对bibTeX的友好性。因为Rmarkdown对bibTeX的要求，而Zotero的相关操作极为便捷简单。此外，Zotero对中文文献情景也比较友好。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;R包&lt;code&gt;rbbt&lt;/code&gt;函数实现了对Zotero的实时联系，引用流程更加自动化。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;重要提示&lt;/strong&gt;：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;正确理解Rmd渲染输出、.bib文件状态和Zotero条目库的关系。简单说：a) Rmd的输出最终只会引用.bib文件里的文献条目。b)R引用包（&lt;code&gt;rbbt&lt;/code&gt;）与Zotero可以实时联系（通过zotero-better-bibtex扩展插件），但是这&lt;strong&gt;并不&lt;/strong&gt;意味着Rmd渲染输出也是与Zotero实时联系的。c).因此，在写作草稿阶段，可以暂时不用关心.bib，只需要保持与Zotero实时联系即可（完成实时搜索和插入条目）。但是在最后完稿之前，务必需要及时更新调整.bib文件（从Zotero 中导出文献为.bib文件，替换更新原来的.bib旧文件即可）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Zotero中Citekey的设置是一个关键步骤，我们需要做出合理的权衡。这是因为一方面&lt;code&gt;@nameYear&lt;/code&gt;的引用便捷性，要求每条文献的citekey必须要简单易用；但是另一方面，Zotero往往会管理海量的文献条目，从而又要求文献的citekey不能重复——不然就没办法精确引用文献了。不过Zotero考虑并提供了选择，可以用动态key（dynamic key），也可以用锁定key（pined key）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为文献条目中可能包含了abstract等长文本域，为了避免Zotero导出.bib后，R包citr识别报错的问题。最好把Zotero 软件的Better Bibtex（插件菜单）做出如下导出设定。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设定导出规则：打开Zotero&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 编辑&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 首选项&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Better Bibtex（插件菜单）&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Export&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Fields&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; Fields to omit frome export&lt;span class=&#34;math inline&#34;&gt;\(\Rightarrow\)&lt;/span&gt; 输入abstract等（逗号分隔）&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>建站平台hugo-academic大升级</title>
      <link>https://huhuaping.netlify.app/2020/10/05/hugo-big-update/</link>
      <pubDate>Mon, 05 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/10/05/hugo-big-update/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/2020/10/05/hugo-big-update/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#hugo的大变革&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; hugo的大变革&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#本地开发预览一条思路填平若干个坑&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 本地开发预览：一条思路填平若干个坑&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#云端开发预览netlify的断点&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 云端开发预览：netlify的断点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#后续故事&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 后续故事&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#double-site&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; 双服务器建站需求&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#更新hugo-extend&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; 更新hugo extend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#获得public文件夹&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; 获得&lt;code&gt;public/&lt;/code&gt;文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#升级的副效应&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4&lt;/span&gt; 升级的副效应&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#rstudio插件addinsnew-post的正确使用&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4.1&lt;/span&gt; RStudio插件(addins)New post的正确使用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#knitrinclude_graphics函数调用图片可能会报错&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4.2&lt;/span&gt; knitr::include_graphics函数调用图片可能会报错&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#netlify开发报错的验证与修复&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4.3&lt;/span&gt; netlify开发报错的验证与修复&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#一次意外报错&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.5&lt;/span&gt; 一次意外报错&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#blogdown的升级支持&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; blogdown的升级支持&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#hugo模板微调&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; hugo模板微调&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#基本原理&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.1&lt;/span&gt; 基本原理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#给post博文添加floating-toc&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2&lt;/span&gt; 给post博文添加floating toc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;对于搭建个人网站，曾经有一句经典的忠告摆在我的面前：
永远不要使用复杂的模板，否则总有一天会掉入网站迁移漩涡，甚至万劫不复的境地。 ————nobody&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这种事，总算是被我赶上了一遭。&lt;/p&gt;
&lt;p&gt;采用hugo-academic模板搭建个人网站，2020年9月3日以后，面临一次建站流程的全新大换代升级。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Convert an old Academic Kickstarter site If you have an existing site based on the Academic Kickstarter Template that was created before 3rd September 2020, it may need converting to use Hugo’s new modular system.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在学习测试两天后，总算是跌跌撞撞地完成了网站的升级更新。截至写这篇博文，针对哪些blogdown用户，网络上还并没有足够完整和清晰的升级操作攻略。这里先记录一二，或许对于急迫升级的人有些许帮助。&lt;/p&gt;
&lt;p&gt;事先说明一下我的环境：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Win 10操作系统&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;R环境 R version 4.0.3 (2020-10-10)。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;升级后hugo version: &lt;code&gt;Hugo Static Site Generator v0.75.1/extended windows/amd64 BuildDate: unknown&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;netlify 关联 github的仓库，自动激活建站开发。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;hugo的大变革&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; hugo的大变革&lt;/h1&gt;
&lt;p&gt;hugo academic的大换血，变革了什么？后面复杂的flow、原理之类东东我也没有完全明白。不过基本按照官方的提示，是可以完成网站升级的，完全可以忽略下面这些什么go module之类的工具或概念。&lt;/p&gt;
&lt;p&gt;对于windowns党，你大概需要本地安装一些工具：&lt;a href=&#34;https://wowchemy.com/docs/install-locally/&#34;&gt;Edit your site on your PC&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://gohugo.io/getting-started/installing/&#34;&gt;Hugo Extended&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://golang.org/dl/&#34;&gt;Go installed&lt;/a&gt; 用于执行hugo modules命令&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;git bash 这个不用多说了&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不过按照官方的说法，此次最大的变革是实现了“模块化”建站流程。&lt;/p&gt;
&lt;p&gt;就我个人后面的感受而言，比前一代思路确实更加简洁，最关键的是建站速度贼快。&lt;/p&gt;
&lt;p&gt;倒是让我收获了一个很深刻的领悟：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;平时我可能只关心hugo的建站工具性，从来不想了解背后的最基本的指导思想和运行原理（尽管可能还是会一知半解，技术细节确实可以完全忽视）。现在看来，既然把身家大计（网站）都托付给了它，起码不能完全对其漠然无知。工具性导向很容易误人误事！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;本地开发预览一条思路填平若干个坑&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 本地开发预览：一条思路填平若干个坑&lt;/h1&gt;
&lt;p&gt;现在简单说一下blogdown用户，如何从早前一代的“hugo-academic”升级到新一代的“Wowchemy Hugo Module”流程。&lt;/p&gt;
&lt;p&gt;先说&lt;strong&gt;一条思路&lt;/strong&gt;——实际上我们完全可以用两种方法来实现academic模板的建站。如果按官方说明正确安装软件、工具和环境，则可以：&lt;/p&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;p&gt;blogdown+hugo建站。如果默认安装，hugo执行程序应该在&lt;code&gt;C:\Users\yourname\AppData\Roaming\Hugo\hugo.exe&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Scoop+hugo建站。如果默认安装，hugo执行程序应该在&lt;code&gt;C:\Users\yourname\scoop\shims\hugo.exe&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;两种方式应该可以同时建站。如果报错，则建议把其中之一的hugo.exe修改为不可识别的（如hugo.exex）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我相信对于大部分blogdown用户而言，应该不太关心后一种。不过在目前的跨代升级中，这一条却是非常重要。因为前者的一些流程，需要后者来援助！&lt;/p&gt;
&lt;p&gt;下面列几个要点，跳开这几个坑应该就可以完成&lt;code&gt;blogdown+hugo&lt;/code&gt;建站升级过程：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;一定记得提前备份网站！（git用户表示窃喜中）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;首先下载&lt;code&gt;starter-academica&lt;/code&gt;模板到本地，解压缩&lt;strong&gt;备用&lt;/strong&gt;。&lt;a href=&#34;https://github.com/wowchemy/starter-academic/archive/master.zip&#34;&gt;Download Academic Template&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;处理旧版网站的项目文件。如下操作删除旧模板。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;git submodule deinit themes/hugo-academic    
git rm themes -r&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;同时记得手动删除旧网站项目文件下的&lt;code&gt;public/&lt;/code&gt;文件夹。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;4&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;把新模板&lt;code&gt;starter-academic&lt;/code&gt;中的如下文件，拷贝或替换旧版网站项目文件：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;模板文件，整个&lt;code&gt;exampleSite&lt;/code&gt;文件夹&lt;/li&gt;
&lt;li&gt;配置文件，整个&lt;code&gt;config&lt;/code&gt;文件夹&lt;/li&gt;
&lt;li&gt;两个go文件，&lt;code&gt;go.sum&lt;/code&gt;和&lt;code&gt;go.mod&lt;/code&gt;文件&lt;/li&gt;
&lt;li&gt;其他&lt;code&gt;starter-academic&lt;/code&gt;有，而旧项目文件里没有的文件。&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在win power shell命令窗口中执行go操作&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;cd 命令进入到旧项目根文件夹下（此步骤自行脑补吧）&lt;/li&gt;
&lt;li&gt;go 命令执行建站：&lt;code&gt;hugo server&lt;/code&gt;（如果顺利，可以直接预览渲染的网站）；或者&lt;code&gt;hugo&lt;/code&gt;（如果顺利，可以得到渲染后的public/文件夹）&lt;/li&gt;
&lt;li&gt;如果不能顺利进行go建站渲染，则按提示修改其中的升级跃迁断点问题（break issues）。我碰到的断点问题主要是：&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;callout&lt;/code&gt;问题。按报错依次找到文件，替换参数即可。&lt;/li&gt;
&lt;li&gt;jpg图片问题。按照toml里参数的提示，把文件夹路径更换即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;6&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;网站内容的维护和调整。具体包括：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;code&gt;config.toml&lt;/code&gt;参数的更新调整（地址等）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content/&lt;/code&gt;文件夹各个.md的核查&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果在go建站预览下如果基本没有问题，则可以如常使用blogdown的&lt;code&gt;blogdown::serve_site()&lt;/code&gt;进行独立的建站渲染。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;最后，blogdown可能还是会报出提示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;WARN 2020/10/05 21:08:20 Module &amp;quot;github.com/wowchemy/wowchemy-hugo-modules/wowchemy&amp;quot; is not compatible with this Hugo version; run &amp;quot;hugo mod graph&amp;quot; for more information.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;不过，好在网站本地开发预览，总算是升级正常啦！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;云端开发预览netlify的断点&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 云端开发预览：netlify的断点&lt;/h1&gt;
&lt;p&gt;尽管前面的网站本地开发预览已经OK，但是云端自动开发流程我们还没有进行配置。——我几乎又花费了一个早上来查找问题，直到最后成功。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心提示&lt;/strong&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果仍旧采用旧版网站的netlify开发流程，则云端开发会一直提示fail。所以需要采用新的netlify开发流程。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;netlify新开发流程，官方说是采用了CMS管理平台——里面的原理暂时没有深究。如果注意比较新旧流程开发同样的网站代码，会发现主要的区别是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;开放工具链（tool chain）中，部分工具的版本新旧，如ruby、go等的调用&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开发速度上，新流程明显完成得更快&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了解决这个新旧流程得断点（break point）问题，暂时摸索出来的办法如下：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;新建一个netlify开发网站&lt;/strong&gt;。根据starter-academic的官方说明，利用github账号接入netlify的api，创建一个基于starter-academic模板的github repo（称之为repo-B）。netlify预览网站（称之为website-B）应该是正常的。——这里纯粹是为了获得新流程的CMS平台。后面的话，这个repo可以直接不用。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;准备好本地开发成功的网站项目&lt;/strong&gt;。首先，准备工作。把本地开发预览正常的网站项目（称之为repo-A），推送到github远端（remote）。当然，关联给netlify云端的开发预览网站（称之为website-A）是不会成功更新的。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;修改新旧网站的链接关系&lt;/strong&gt;。此时，我们有两个netlify网站（website-B和website-A）以及对应的两个github repo（repo-B和repo-A）。新流程下的website-B网站是完全可以云端正常自动开发的，但是旧流程下的website-A网站则是无法自动激发云端开发的。关键步骤就是“嫁接替换法”：&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;将website-B关联的github仓库，修改为repo-A。netlify操作过程：&lt;code&gt;https://app.netlify.com/sites/huhuaping-kick/settings/deploys#continuous-deployment&lt;/code&gt; –》build settings –》 edit setting –》reopsitory –》Link a different repository&lt;/li&gt;
&lt;li&gt;将website-B的域名修改为原来website-A的域名。netlify操作过程：&lt;code&gt;https://app.netlify.com/sites/huhuaping/settings/general&lt;/code&gt; –》sitede tails –》site information –》 change site name&lt;/li&gt;
&lt;li&gt;“嫁接替换”完成后，netlify就在CMS新流程下，开发了原来的repo-A的网站代码内容。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;至此，我们只需要继续维护本地更新升级后的repo-A，并持续推送给github，那么每次commit提交就会自动激活netlify使用新流程开发渲染网站内容啦！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;后续故事&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 后续故事&lt;/h1&gt;
&lt;p&gt;考虑到后期可能还会面临hugo academic升级的问题。相关升级问题记录如下：&lt;/p&gt;
&lt;div id=&#34;double-site&#34; class=&#34;section level2&#34; number=&#34;4.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; 双服务器建站需求&lt;/h2&gt;
&lt;p&gt;我的特殊“双服务器”建站需求。简单说，首先我会使用blogdown+hugo+github+netlify工作流建立一个服务器在netlify的网站（A服务器网站），同时会得到该网站的一个&lt;code&gt;public&lt;/code&gt;文件夹。因为netlify服务器在国外，国际友人访问自然没有问题，但是国内访问速度明显就不行了。因此，我必须为国内访问用户搭建一个服务器在国内的同步“复刻网站”（B服务器网站），这时我只需要将前面的&lt;code&gt;public/&lt;/code&gt;文件夹同步上去即可。因此，“双服务器”建站需求，并不是我个人有什么极客级别的建站癖好，纯粹只是出于“简单性”和“可用性”原则。以上双服务器网站的差异性和联系：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;二者是几乎是“完全复制”的。但就网站更新频率和时间先后而言，后者更新频率更低而且会滞后于前者。下面说原因！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;netlify网站（A服务器网站）是基于自动化工作流的（automate workflow），只需要github提交（commit）即可后台自动更新整个网站。因此是时效性最强的。而且可以基于git分支进行测试（如feature 分支），即兴写博客post或测试新功能，简直是指哪打哪，顺服得不要不要的。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;国内网站（B服务器网站）采用的是goodsync的FTP自动上传同步功能。尽管也可以完全设定自动同步（例如，可以设定goodsync规则为：一旦&lt;code&gt;public、&lt;/code&gt;有文件修改就自动上传），但是因为不具备git那样的分枝提交功能，会导致同步正在测试阶段的网站，从而导致用户访问失败或页面错乱。最要命的是goodsync的FTP上传速度很慢，对于我这个相对庞杂的网站，要完成一次完整的网站同步，大概需要4-6个小时才能完成（家里稳定网速下）。简单说，我不能让B服务器网站“实时同步”，而且只能在网站版本稳定后才“手动”进行goodsync同步（一般在晚上进行这个同步动作）。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;更新hugo-extend&#34; class=&#34;section level2&#34; number=&#34;4.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; 更新hugo extend&lt;/h2&gt;
&lt;p&gt;注意hugo extend与hugo存在一定差异性，简单说hugo extend似乎功能性要更多一点（参看&lt;a href=&#34;https://github.com/gohugoio/hugoDocs/issues/1152#issuecomment-646284959&#34;&gt;社区问答&lt;/a&gt;）。建议windows用户下载使用hugo extend。原因很简单：因为hugo extend能够让我顺利生成网站的本地&lt;code&gt;public/&lt;/code&gt;文件夹，而hugo则会报错无法生成&lt;code&gt;public/&lt;/code&gt;文件夹！更新hugo extend基本上有两种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;方法一（已测试）&lt;/strong&gt;：手动下载hugo extend版本进行升级更新。具体做法进入官方版本&lt;a href=&#34;https://github.com/gohugoio/hugo/releases&#34;&gt;下载界面&lt;/a&gt;，下载后解压缩并放到指定本地电脑路径下！还是要注意blogdown和scoop两种渲染网站的hugo路径是不同的。（见前面说过的这两种渲染方式。）&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# hugo extended
hugo_extended_0.80.0_Windows-64bit.zip

# target directory path for blogdown
C:\Users\huhua\AppData\Roaming\Hugo\0.80.0\hugo.exe

# target directory path for scoop
C:\Users\huhua\scoop\shims\hugo.exe&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;方法二（未测试过）&lt;/strong&gt;：在windows 命令行里进行hugo升级（见&lt;a href=&#34;https://wowchemy.com/docs/update/&#34;&gt;官方说明&lt;/a&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Update to get the very latest developments:
hugo mod get -u ./...

# Alternatively, update to the latest official release:
hugo mod get -u
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;获得public文件夹&#34; class=&#34;section level2&#34; number=&#34;4.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; 获得&lt;code&gt;public/&lt;/code&gt;文件夹&lt;/h2&gt;
&lt;p&gt;更新blogdown包。照常使用Rstudio addins &lt;code&gt;serv site&lt;/code&gt;。需要注意的是新的hugo流程默认是在缓存里渲染网站，也就意味着&lt;code&gt;public/&lt;/code&gt;文件夹默认不会随着渲染而自动更新。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;解决方案1（已测试）：那么需要blogdown执行的是&lt;strong&gt;本地渲染&lt;/strong&gt;（参看 &lt;a href=&#34;https://stackoverflow.com/questions/64500959/problem-with-rendering-hugo-blogdown-site&#34;&gt;网络问答&lt;/a&gt;）。（尽管如此，blogdown本地预览会优先使用&lt;code&gt;public/&lt;/code&gt;文件夹，所以好像必须要删除&lt;code&gt;public/&lt;/code&gt;才能获得实时修改更新，这似乎是一个bug啊！目前对这个问题也是纠结中。因为它带来了goodsync的一个同步问题，每次获得blogdown方法下的&lt;code&gt;public/&lt;/code&gt;文件夹里的每一个文件都是全新的、不同于原同步文件（生成时间或内容改变了），这将意味着goodsync每次同步都必须上传&lt;code&gt;public/&lt;/code&gt;的所有文件！——而实际上我只是小步调更改了网站的部分内容！）&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::build_site(local=TRUE)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;解决方案2（已测试）：直接在windows命令视窗里指定hugo生成&lt;code&gt;public/&lt;/code&gt;文件夹。具体参看blogdown社区&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/495&#34;&gt;讨论&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;hugo -d ./public
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;升级的副效应&#34; class=&#34;section level2&#34; number=&#34;4.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4&lt;/span&gt; 升级的副效应&lt;/h2&gt;
&lt;div id=&#34;rstudio插件addinsnew-post的正确使用&#34; class=&#34;section level3&#34; number=&#34;4.4.1&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4.1&lt;/span&gt; RStudio插件(addins)New post的正确使用&lt;/h3&gt;
&lt;p&gt;使用RStudio插件(addins)中blogdown下的&lt;code&gt;New post&lt;/code&gt;暂时还会带来困扰（参看&lt;a href=&#34;https://stackoverflow.com/questions/64688201/blogdown-new-post-addin-creates-but-not-loads-new-file&#34;&gt;“stackoverflow队长”问答&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;按照hugo的新流程，每个blog都会建立自己的对应的文件夹（参看&lt;a href=&#34;https://ropensci.org/technotes/2020/04/23/rmd-learnings/&#34;&gt;网页&lt;/a&gt;）。当然，其背后的原因是hugo新版本（Hugo version 0.32以上）引入了“页面束捆”（&lt;a href=&#34;https://gohugo.io/content-management/page-bundles/&#34;&gt;Page Bundles&lt;/a&gt;）特性。具体文件夹结构如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;                                          levelName
1  post                                            
2   |--data                                        
3   |   |--fultonfish.rda                          
4   |   |--fultonfish.xlsx                         
5   |   °--other-data-file.dat                     
6   |--pic                                         
7   |   |--check-box-invisible.png                 
8   |   °--other-image-file.jpeg                   
9   |--2020-12-05-web-scraping-tech-webelem.en.Rmd 
10  |--2020-12-05-web-scraping-tech-webelem.en.html
11  °--2021-01-31-new-post                         
12      |--index.en_file                           
13      |--index.en.Rmd                            
14      °--index.en.html                           &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;blogdown这样的new-post文件夹系统变化带来的一个影响效应是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;新旧文件夹体系的不一致性（见上面树形结构图）。虽然只是视觉上的差异，但是还是不够“一致”！当然，也可以关闭这样的新文件夹体系（“页面束捆”），具体需要在&lt;code&gt;.Rprofile&lt;/code&gt;文件设定 &lt;code&gt;options(blogdown.new_bundle = FALSE)&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;致命的影响是Rmarkdown引以为傲的直接R代码块功能。新体系下，可以丝滑般得到正常的R代码块运行效果（已测试。这得益于新文件系统下的self-contained理念）；旧体系下则无法运行。而且经测试，新文件夹体系下，不会影响图片&lt;code&gt;/pic/.png&lt;/code&gt;和数据文件&lt;code&gt;/data/.rds&lt;/code&gt;的调用。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!---

- 困扰2：默认情况下，yaml区域不会自动指定输出样式，从而导致报错。因此需要在yaml区域手动添加如下参数：

```r
output:
  blogdown::html_page:
    toc: true
```
---&gt;
&lt;/div&gt;
&lt;div id=&#34;knitrinclude_graphics函数调用图片可能会报错&#34; class=&#34;section level3&#34; number=&#34;4.4.2&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4.2&lt;/span&gt; knitr::include_graphics函数调用图片可能会报错&lt;/h3&gt;
&lt;p&gt;使用&lt;code&gt;knitr::include_graphics&lt;/code&gt;函数调用图片，需要额外设定参数&lt;code&gt;error = FALSE&lt;/code&gt;。（参看&lt;a href=&#34;https://stackoverflow.com/questions/60292022/knitr-cannot-find-img-files-in-static-folder&#34;&gt;网络问答&lt;/a&gt;）&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#knitr::include_graphics(here::here(&amp;quot;static&amp;quot;,&amp;quot;pic&amp;quot;,&amp;quot;check-box-invisible.png&amp;quot;))

#knitr::include_graphics(&amp;quot;../../static/img/check-box-invisible.png&amp;quot;)
knitr::include_graphics(&amp;quot;/pic/check-box-invisible.png&amp;quot;, error = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://huhuaping.netlify.app/pic/check-box-invisible.png&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;netlify开发报错的验证与修复&#34; class=&#34;section level3&#34; number=&#34;4.4.3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4.3&lt;/span&gt; netlify开发报错的验证与修复&lt;/h3&gt;
&lt;p&gt;有时候本地预览显示正常，但netlify网站开发仍可能出错（Deploy failed），导致无法更新云端网站，此时则建议：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;登陆&lt;a href=&#34;https://app.netlify.com/&#34;&gt;netlify&lt;/a&gt;账户，立即查看开发日志（Deploy log）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rstudio里利用&lt;code&gt;blogdown::check_site()&lt;/code&gt;函数进行网站检查，并根据提示做出修改调整。具体参看blogdown&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/576#issuecomment-768379160&#34;&gt;社区问答&lt;/a&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面是我的Rstudio里的一个网站检查结果和建议清单：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::check_site()

# here my check result
― Running a series of automated checks for your blogdown website project...
----------------------------------------------------------------------------------------------
○ A successful check looks like this.
● [TODO] A check that needs your attention looks like this.
| Let&amp;#39;s check out your blogdown site!
----------------------------------------------------------------------------------------------
― Checking config.toml
| Checking &amp;quot;baseURL&amp;quot; setting for Hugo...
○ Found baseURL = &amp;quot;https://huhuaping.netlify.app/&amp;quot;; nothing to do here!
| Checking &amp;quot;ignoreFiles&amp;quot; setting for Hugo...
● [TODO] Add these items to the &amp;quot;ignoreFiles&amp;quot; setting: &amp;quot;\\.knit\\.md$&amp;quot;, &amp;quot;\\.utf8\\.md$&amp;quot;
| Checking setting for Hugo&amp;#39;s Markdown renderer...
○ All set! Found the &amp;quot;unsafe&amp;quot; setting for goldmark.
― Check complete: config.toml

― Checking .gitignore
| Checking for items to remove...
○ Nothing to see here - found no items to remove.
| Checking for items to change...
● [TODO] Change items in .gitignore: blogdown -&amp;gt; /blogdown, public/ -&amp;gt; /public/
| Checking for items you can safely ignore...
● [TODO] You can safely add to .gitignore: .DS_Store, Thumbs.db
| Checking for items to ignore if you build the site on Netlify...
● [TODO] When Netlify builds your site, you can safely add to .gitignore: /public/, /resources/
| Checking for files required by blogdown but not committed...
● [TODO] Found 1 file that should be committed in GIT:

  layouts/shortcodes/blogdown/postref.html
― Check complete: .gitignore

― Checking Hugo
| Checking Hugo version...
○ Found 4 versions of Hugo. You are using Hugo 0.80.0.
| Checking .Rprofile for Hugo version used by blogdown...
| Hugo version not set in .Rprofile.
● [TODO] Set options(blogdown.hugo.version = &amp;quot;0.80.0&amp;quot;) in .Rprofile and restart R.
― Check complete: Hugo

― Checking netlify.toml...
○ Found HUGO_VERSION = 0.80.0 in [build] context of netlify.toml.
| Checking that Netlify &amp;amp; local Hugo versions match...
○ It&amp;#39;s a match! Blogdown and Netlify are using the same Hugo version (0.80.0).
| Checking that Netlify &amp;amp; local Hugo publish directories match...
○ Good to go - blogdown and Netlify are using the same publish directory: public
― Check complete: netlify.toml

― Checking content files
| Checking for validity of YAML metadata in posts...
○ All YAML metadata appears to be syntactically valid.
| Checking for previewed content that will not be published...
○ Found 0 files with future publish dates.
● [TODO] Found 2 files marked as drafts. To un-draft, run the command:

  blogdown::edit_draft(c(
  &amp;quot;content/privacy.md&amp;quot;,
  &amp;quot;content/terms.md&amp;quot;
  ))

  and change a file&amp;#39;s YAML from &amp;#39;draft: true&amp;#39; to &amp;#39;draft: false&amp;#39; or delete it
| Checking your R Markdown content...
○ All R Markdown files have been knitted.
● [TODO] Found 2 R Markdown files to update by re-rendering:

  content/post/2019-04-10-note-for-git-version-control-skills.Rmd
  content/post/2020-10-05-hugo-big-update/index.en.Rmd

  To update a file, re-knit or use blogdown::build_site(build_rmd = &amp;#39;timestamp&amp;#39;)
| Checking for .html/.md files to clean up...
○ Found 0 duplicate .html output files.
○ Found 0 incompatible .html files to clean up.
| Checking for the unnecessary &amp;#39;content/&amp;#39; directory in theme...
○ Great! Your theme does not contain the content/ directory.
― Check complete: Content&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;具体调整如下：&lt;/p&gt;
&lt;p&gt;调整1：根据建议，&lt;code&gt;config.toml&lt;/code&gt;需要调整&lt;code&gt;ignoreFiles&lt;/code&gt;参数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Checking &amp;quot;ignoreFiles&amp;quot; setting for Hugo...
[TODO] Add these items to the &amp;quot;ignoreFiles&amp;quot; setting: &amp;quot;\\.knit\\.md$&amp;quot;, &amp;quot;\\.utf8\\.md$&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;调整2：根据建议，&lt;code&gt;.gitignore&lt;/code&gt;需要调整参数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[TODO] Change items in .gitignore: blogdown -&amp;gt; /blogdown, public/ -&amp;gt; /public/&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;调整3：根据建议，&lt;code&gt;.Rprofilee&lt;/code&gt;需要调整hugo版本参数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Hugo version not set in .Rprofile.
[TODO] Set options(blogdown.hugo.version = &amp;quot;0.80.0&amp;quot;) in .Rprofile and restart R.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;调整4：根据建议，部分Rmd文件需要重新渲染更新，可采用函数&lt;code&gt;blogdown::build_site(build_rmd = &#39;timestamp&#39;)&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[TODO] Found 2 R Markdown files to update by re-rendering:

  content/post/2019-04-10-note-for-git-version-control-skills.Rmd
  content/post/2020-10-05-hugo-big-update/index.en.Rmd

  To update a file, re-knit or use blogdown::build_site(build_rmd = &amp;#39;timestamp&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;一次意外报错&#34; class=&#34;section level2&#34; number=&#34;4.5&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.5&lt;/span&gt; 一次意外报错&lt;/h2&gt;
&lt;p&gt;实在莫名其妙，无论&lt;code&gt;hugo&lt;/code&gt;渲染网站（powershell命令下&lt;code&gt;hugo server&lt;/code&gt;），还是&lt;code&gt;blogdown&lt;/code&gt;渲染网站（&lt;code&gt;server_site&lt;/code&gt;）分别出现如下报错。&lt;/p&gt;
&lt;p&gt;1.报错信息1：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: from config: failed to resolve output format &amp;quot;WebAppManifest&amp;quot; from site config&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.报错信息2：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: from config: failed to resolve output format &amp;quot;headers&amp;quot; from site config&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;两次报错，如同官网提到的&lt;a href=&#34;https://wowchemy.com/docs/guide/troubleshooting/#error-failed-to-resolve-output-format&#34;&gt;“Error: failed to resolve output format”&lt;/a&gt;：&lt;/p&gt;
&lt;p&gt;最后按照官方处理办法：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;config.toml&lt;/code&gt;的&lt;code&gt;[outputs]&lt;/code&gt;清单中暂时先删除&lt;code&gt;&#34;RSS&#34;, &#34;JSON&#34;, &#34;WebAppManifest&#34;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后在&lt;code&gt;powershell&lt;/code&gt;命令窗口中依次输入如下命令：&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;hugo mod clean
hugo mod get -u ./...
hugo mod tidy&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;完成上述操作后，再把&lt;code&gt;&#34;RSS&#34;, &#34;JSON&#34;, &#34;WebAppManifest&#34;&lt;/code&gt;补回原处即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;blogdown的升级支持&#34; class=&#34;section level1&#34; number=&#34;5&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; blogdown的升级支持&lt;/h1&gt;
&lt;p&gt;由于&lt;code&gt;hugo&lt;/code&gt;在建站流程上做了很大的改变，&lt;code&gt;blogdown&lt;/code&gt;包也在2021年1月迭代到了&lt;code&gt;v1.0&lt;/code&gt;版本，显然这次是大版本升级以支持&lt;code&gt;hugo&lt;/code&gt;，具体可以参看包作者的声明&lt;a href=&#34;https://blog.rstudio.com/2021/01/18/blogdown-v1.0/&#34;&gt;“Announcing blogdown v1.0”&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;其中一些包函数值得关注：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;blogdown::built_site()&lt;/code&gt;函数，涉及到是否产生&lt;code&gt;/public&lt;/code&gt;文件夹和如何渲染&lt;code&gt;.Rmd&lt;/code&gt;文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;blogdown::check_.()&lt;/code&gt;类函数，主要用于核查和比对&lt;code&gt;blogdown&lt;/code&gt;与&lt;code&gt;hugo&lt;/code&gt;在配置等方面是否一致。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;blogdown::find_hugo(&#39;all&#39;)&lt;/code&gt;函数，方便掌握自己正在（或曾经）使用的hugo版本。为稳定hugo版本，可以设定&lt;code&gt;.Rprofile&lt;/code&gt;文件，具体可设定为例如&lt;code&gt;options(blogdown.hugo.version = &#34;0.79.0&#34;)&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;blogdown::remove_hugo()&lt;/code&gt;函数，可以删除未使用的hugo版本。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;hugo模板微调&#34; class=&#34;section level1&#34; number=&#34;6&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; hugo模板微调&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;劝君更进一杯酒，模板莫要闲折腾。——somebody&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果使用blogdown开发课程内容，网上有人提醒慎重升级&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;不要升级&lt;code&gt;hugo&lt;/code&gt;（包括&lt;code&gt;hugo extend&lt;/code&gt;）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不要更新&lt;code&gt;hugo theme&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;课程开发期间，不要升级任何东西！&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;基本原理&#34; class=&#34;section level2&#34; number=&#34;6.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.1&lt;/span&gt; 基本原理&lt;/h2&gt;
&lt;p&gt;考虑到&lt;code&gt;hugo-academic&lt;/code&gt;模板会不断升级，如果用户想要对模板进行个性化调整，因此&lt;code&gt;hugo&lt;/code&gt;开发了一套&lt;strong&gt;模板查找顺位机制&lt;/strong&gt;（&lt;a href=&#34;https://gohugo.io/templates/lookup-order/&#34;&gt;template lookup&lt;/a&gt;）。用户可以在不直接修改&lt;code&gt;hugo-academic&lt;/code&gt;官方模板文件下，独立地进行个性化修改和微调。当然用户的任何个性化修改，都需要在约定文件路径下，且使用&lt;code&gt;go&lt;/code&gt;&lt;a href=&#34;https://gohugo.io/hugo-modules/&#34;&gt;语法&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;优点：官方模板文件和用户个性化修改文件互相分离和独立，保证了二者并行不悖。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;缺点：用户需要熟悉&lt;code&gt;go&lt;/code&gt;语法。此外，因为官方模板会不断迭代变化，用户个性化修改可能会失效，因而需要不断去配合官方的迭代步骤！&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;给post博文添加floating-toc&#34; class=&#34;section level2&#34; number=&#34;6.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2&lt;/span&gt; 给post博文添加floating toc&lt;/h2&gt;
&lt;p&gt;官方模板下，默认的&lt;code&gt;post&lt;/code&gt;是基于&lt;code&gt;widget: pages&lt;/code&gt;样式。其视觉效果特点是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在pc端，&lt;code&gt;chrome&lt;/code&gt;浏览器下post博文正文宽度为720px，如果显示器分辨率为&lt;code&gt;1920*1080&lt;/code&gt;，那么正文的宽度占比为37.5%。按照时兴的说法就是“屏占比”太低！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在移动手机端，post博文正文宽度显示不错。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;默认情况下，是没有目录导航的（toc）。当然也可以通过添加yaml参数&lt;code&gt;toc: true&lt;/code&gt;来添加目录导航，但是toc显示在正文之前（而且没有“目录”字样）。对于分节较多的长篇博文，非常不利于读者阅读定位和前后对照。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;因此，对于分节较多的长篇博文，自然就有了“侧边浮动目录”（sidebar floating toc）的个性化页面样式修订念头。yihui&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/375#issuecomment-476332000&#34;&gt;建议&lt;/a&gt;可以通过JavaScript或CSS进行设定。Xiaoou WANG也提供了一个hugo语法下的&lt;a href=&#34;https://xiaoouwang.github.io/post/add_a_float_toc_to_academic_theme/&#34;&gt;实现方法&lt;/a&gt;，但是有不少bug。又比如CharlieLeee的&lt;a href=&#34;https://github.com/wowchemy/wowchemy-hugo-modules/issues/1520#issuecomment-601982609&#34;&gt;方法&lt;/a&gt;，只是对于&lt;code&gt;.md&lt;/code&gt;格式的写作有效，而对&lt;code&gt;.Rmd&lt;/code&gt;格式的写作&lt;a href=&#34;https://github.com/wowchemy/wowchemy-hugo-modules/issues/1520#issuecomment-610210353&#34;&gt;无效&lt;/a&gt;。因此，最后的忠告就是专注于内容写作：劝君更进一杯酒，模板莫要闲折腾。&lt;/p&gt;
&lt;!---footnote---&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://rstudio-education.github.io/sharing-short-notice/#148&#34;&gt;blogdown advice&lt;/a&gt;&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Endnote参考文献及Rmarkdown引用问题</title>
      <link>https://huhuaping.netlify.app/2020/10/03/bib-and-cite-on-research-article/</link>
      <pubDate>Sat, 03 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/10/03/bib-and-cite-on-research-article/</guid>
      <description>


&lt;p&gt;使用Rmarkdown写科学论文，自然避免不了管理和使用参考文献，以及文献输出样式。&lt;/p&gt;
&lt;div id=&#34;endnote和流程&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;EndNote和流程&lt;/h1&gt;
&lt;p&gt;目前为止，我的唯一文献工具是&lt;strong&gt;EndNote&lt;/strong&gt;（版本X9）。掐指一算，差不多已经坚持使用了近13年了。多年来攒下的一个文献库.enl里，文献条目多达3500条（多半是存而不读的啦）。&lt;/p&gt;
&lt;p&gt;在使用Rmarkdown写文章后，工作流程总是免不了受这个多年的工具牵连。可行的办法如下：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;查找学术文献。利用谷歌学术查找文献，导入EndNote。（google学术设置里拉选一下默认导入工具）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改定制EndNote软件。Endnote里一番神设置（具体见后），获得文献条目的BibTex格式。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;集中注意力写文章的地方。Rmarkdown文档&lt;code&gt;.Rmd&lt;/code&gt;里写文章，同时新建一个&lt;code&gt;.bib&lt;/code&gt;的附带文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;管理BibTex文献的地方。把BibTex格式的文献条目，复制到&lt;code&gt;.bib&lt;/code&gt;文件里面去。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;管理正文里文献引用显示和以及&lt;code&gt;参考文献&lt;/code&gt;的输出样式。与&lt;code&gt;.Rmd&lt;/code&gt;并行配置一个&lt;code&gt;.csl&lt;/code&gt;文档。关于引用样式语言——Citation Style Language (CSL) ，后面再说。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;目前的流程是没有可行的，但是几个问题仍旧存在：&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;p&gt;EndNote重度使用的后遗症。一是要手动把EndNote文献条目的BibTeX内容复制到&lt;code&gt;.bib&lt;/code&gt;里面去，太费手啦！二是，EndNote文献条目的BibTeX内容中，引用ID需要手动调整，这个也是很费手！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;文献管理存档的主副之争。EndNote文献条目，跟&lt;code&gt;.bib&lt;/code&gt;里的文献条目是无法关联的。意味着，要同时管理两个家伙！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;引用样式语言Citation Style Language (CSL) 文档，可能需要定制化修改！&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;先不说这些血泪控诉的坑吧，下面把基本过程里的小九九暂时给记录下来。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;配置endnote软件windows系统&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;配置EndNote软件（Windows系统）&lt;/h1&gt;
&lt;p&gt;修改定制EndNote软件。具体可以参考&lt;a href=&#34;https://www.rhizobia.co.nz/latex/convert&#34;&gt;攻略&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;基本步骤大概是：
- 下载style模板，导入并保存模板；然后选用此模板
- 修改Preferences ： “modify reference types”
- 修改display fields： “Custom1”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;endnote里编辑条目&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;EndNote里编辑条目&lt;/h1&gt;
&lt;p&gt;编辑文献条目。独立设置ID ：BibTeX里编辑。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;定制输出和显示样式&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;定制输出和显示样式&lt;/h1&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;准备好输出显示样式。cls样式可以参看&lt;a href=&#34;https://github.com/citation-style-language/styles&#34;&gt;样式库&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设置&lt;code&gt;.Rmd&lt;/code&gt;文档的yaml参数，示例如下：&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;# 一级yaml参数

biblio-style: &amp;quot;nnsfc.csl&amp;quot;
csl: &amp;quot;nnsfc.csl&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;文献引用&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;文献引用&lt;/h1&gt;
&lt;p&gt;直接使用条目的唯一标识。例如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;研究发现，balabalabala[@Birthal2011]。
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>风语者：计量经济学语言</title>
      <link>https://huhuaping.netlify.app/2020/04/05/econometrics-language/</link>
      <pubDate>Sun, 05 Apr 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/04/05/econometrics-language/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#孩时的方言事件&#34;&gt;孩时的方言事件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#计量经济学的疯言风语&#34;&gt;计量经济学的疯言风语&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#计量经济学疯言风语1数学符号语言母语&#34;&gt;计量经济学“疯言风语”1：数学符号语言（母语）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#计量经济学疯言风语2回归报告语言暗语&#34;&gt;计量经济学“疯言风语”2：回归报告语言（暗语）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#计量经济学疯言风语3矩阵语言matrix狂语&#34;&gt;计量经济学“疯言风语”3：矩阵语言matrix（狂语）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#后话语言障碍还是心理障碍&#34;&gt;后话：语言障碍还是心理障碍&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;孩时的方言事件&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;孩时的方言事件&lt;/h2&gt;
&lt;p&gt;打小时起，我就对各种村落方言带来的困惑感受至深。我的故乡，属于典型的南方村落。古时是被算作南蛮之地的，外族异性零落杂居。虽然还不至于一村一俗，但是一村一个方言那是十分常见。我们村周边，3里地范围内，大概分布4个村落，就存在4种方言。好在距离不是太远，自小接触融通，还不至于听不懂。这种方言的差异，不是普通人想象的口音上的差异。就我而言，也仅限于听懂而已，要是模仿发音，那实在是难于上青天。&lt;/p&gt;
&lt;p&gt;我的家庭里就有两种方言，母亲带来了4里远的外婆家族的方言。大姨嫁到离我家约6里地远的村子，那种村落语言对于小时候的我简直就是外星语一般的存在。因为暑假或春节会到大姨家待上一阵子，我总有一种被那个村落完全隔绝的感觉。因为无法跟这个村里其他小孩对话沟通，我大多数情况都是跟在表哥的屁股后面，生怕落单。有一次，村里一个热心的小孩看到我一个人在路边独自玩得起劲，就凑过来打招呼，可能是希望加入一起玩耍的意思。但是他的方言发音咿咿呀呀，我一个字都不懂。再加上这小孩神情诡谲，动作夸张，我飞一般地赶紧逃离是非之地，躲进大姨家里半天没出门。表哥知道后，找来那小孩问明来由，一通翻译，真相大白，大家笑得肚疼。因为这事，小孩这句接头暗话，都是目前为止我唯一能说出来而且知道意思的该村方言了，真是印象至深。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;小孩的方言发音（此处纯粹表达出发音）:&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;“哟斯呗嗟嘎？哈粤郭。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;我当时理解的意思是：&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;“你是北京来的？唱个歌吧。”（我天生五音不全！）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;表哥翻译的结果是：&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;“你是哪里来的？一起玩喽。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个事情让我知道，语言不通还要一起好好玩耍，简直就是个灾难！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;计量经济学的疯言风语&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;计量经济学的疯言风语&lt;/h2&gt;
&lt;p&gt;有一部经典的二战电影《风语者》，讲的是战争双方的密码攻防。美军为了通讯安全，专门雇请神秘的印第安部落纳瓦霍人参军，使用纳瓦霍人的语言进行通讯。因为纳瓦霍语是一种没有文字，只通过世世代代口耳相传，极其复杂的语言，可以说就是不为人知的、偏远地带的“鸟语”。由于他们的语言发音来自于大自然，所以给他们的外号就叫做“风语者”。&lt;/p&gt;
&lt;p&gt;哪怕具备了一定的统计学知识，我相信大部分人一开始学习《计量经济学》时也会语言障碍。就好比是日本通讯兵在听美军用纳瓦霍语发送的电报，一头雾水，根本就不带人玩耍的节奏。&lt;/p&gt;
&lt;p&gt;下面我就分三个方面来罗列一下计量经济学的三类“疯言风语”：&lt;/p&gt;
&lt;div id=&#34;计量经济学疯言风语1数学符号语言母语&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;计量经济学“疯言风语”1：数学符号语言（母语）&lt;/h3&gt;
&lt;p&gt;数学符号是计量经济学的母语，一点都不为过。其中数学符号主要是搭建了一套共同的语言规则，把社会经济分析中各种含混的概念、术语、各种情景用清晰无误的数学语言表达出来。这样，那些仍旧坚持说自己“方言”的经济学家，自然就不能跟别的小朋友好好玩耍了。&lt;/p&gt;
&lt;p&gt;以计量经济学最基础的总体和样本模型定义和内涵为例：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;总体回归函数PRF:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{align}
E(Y|X_i) &amp;amp;= \beta_1 +\beta_2X_i &amp;amp;&amp;amp; \text{(PRF)}
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;总体回归模型PRM:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{align}
Y_i &amp;amp;=  \beta_1 +\beta_2X_i + u_i &amp;amp;&amp;amp; \text{(PRM)}
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;样本回归函数SRF:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{align}
\hat{Y}_i =\hat{\beta}_1 + \hat{\beta}_2X_i &amp;amp;&amp;amp; \text{(SRF)}
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;样本回归模型SRM:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{align}
Y_i &amp;amp;= \hat{\beta}_1 + \hat{\beta}_2X_i +e_i &amp;amp;&amp;amp; \text{(SRM)}
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;看似一堆数学符号，里面乾坤可大着呐。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;英文字母表示&lt;strong&gt;变量&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;希腊字母表示&lt;strong&gt;参数&lt;/strong&gt;，戴个帽子就表示参数对应的&lt;strong&gt;估计量&lt;/strong&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;同样是&lt;span class=&#34;math inline&#34;&gt;\(Y_i\)&lt;/span&gt;，在总体回归模型（PRM）里和样本回归模型（SRM）却是不等价的（为什么？）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;总体回归模型里的&lt;strong&gt;随机干扰项&lt;/strong&gt;要用&lt;span class=&#34;math inline&#34;&gt;\(u_i\)&lt;/span&gt;表达，但是到了样本回归模型里的&lt;strong&gt;残差&lt;/strong&gt;则要用&lt;span class=&#34;math inline&#34;&gt;\(e_i\)&lt;/span&gt;表达。为什么呢？而且最糟糕的是，国内还有著者习惯把随机干扰项表达成希腊字母&lt;span class=&#34;math inline&#34;&gt;\(\mu_i\)&lt;/span&gt;，这个简直就是计量经济学语言世界里最容易引起小伙伴惶恐的、不规范的“鸟语方言”！为什么这么说呢？因为大家在概率论与数理统计里都学过了，正态分布由期望和方差两个参数决定&lt;span class=&#34;math inline&#34;&gt;\(Z_i \sim N(\mu, \sigma^2)\)&lt;/span&gt;。还记得我们前面说好的么：希腊字母表示参数的啊，语言规范可不能说变就变的吧！试想一下，如果你要表达“随机干扰项服从正态分布”，那岂不是一个捉急！（&lt;span class=&#34;math inline&#34;&gt;\(\mu_i \sim N(\mu, \sigma^2)\)&lt;/span&gt;!!!!）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;简言之，计量经济学语言用数学符号来规范用语，并形成普遍共识，大家理解起来就不会相互打架。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;计量经济学疯言风语2回归报告语言暗语&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;计量经济学“疯言风语”2：回归报告语言（暗语）&lt;/h3&gt;
&lt;p&gt;好吧，只要数学符号能让计量经济语言更加精准一直，大家似乎也能稍微接受这些“枯燥”的数学记号和“不为常人所知”的表达规则了。&lt;/p&gt;
&lt;p&gt;不过我们还会碰到第二个语言拦路虎！那就非属哪些惊为天书般的“计量经济分析报告”了！你见过医院里化验科或检验科出具的哪些成沓的身体检查单没？对，就是这些外人看不懂的鬼画符天书！！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;先来看一个EViews软件出具的多元回归分析报告吧：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/chpt11-mroz2-eq-2sls-adj.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;一个多元回归分析Eviews报告&lt;/p&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;再来看一个R软件出具的两阶段最小二乘法（2SLS）回归分析报告吧：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;
systemfit results 
method: 2SLS 

         N  DF     SSR  detRCov   OLS-R2 McElroy-R2
system 222 213 109.612 0.107301 0.094242  -0.597812

      N  DF     SSR      MSE     RMSE       R2   Adj R2
eq1 111 105 52.0903 0.496098 0.704342 0.139124 0.098130
eq2 111 108 57.5218 0.532610 0.729801 0.049360 0.031755

The covariance matrix of the residuals
         eq1      eq2
eq1 0.496098 0.396138
eq2 0.396138 0.532610

The correlations of the residuals
         eq1      eq2
eq1 1.000000 0.770653
eq2 0.770653 1.000000


2SLS estimates for &amp;#39;eq1&amp;#39; (equation 1)
Model Formula: lquan ~ lprice + mon + tue + wed + thu
Instruments: ~mon + tue + wed + thu + stormy

              Estimate Std. Error  t value   Pr(&amp;gt;|t|)    
(Intercept)  8.5059113  0.1661669 51.18896 &amp;lt; 2.22e-16 ***
lprice      -1.1194169  0.4286450 -2.61152  0.0103334 *  
mon         -0.0254022  0.2147742 -0.11827  0.9060766    
tue         -0.5307694  0.2080001 -2.55177  0.0121574 *  
wed         -0.5663511  0.2127549 -2.66199  0.0089895 ** 
thu          0.1092673  0.2087866  0.52334  0.6018373    
---
Signif. codes:  0 &amp;#39;***&amp;#39; 0.001 &amp;#39;**&amp;#39; 0.01 &amp;#39;*&amp;#39; 0.05 &amp;#39;.&amp;#39; 0.1 &amp;#39; &amp;#39; 1

Residual standard error: 0.704342 on 105 degrees of freedom
Number of observations: 111 Degrees of Freedom: 105 
SSR: 52.090321 MSE: 0.496098 Root MSE: 0.704342 
Multiple R-Squared: 0.139124 Adjusted R-Squared: 0.09813 


2SLS estimates for &amp;#39;eq2&amp;#39; (equation 2)
Model Formula: lquan ~ lprice + stormy
Instruments: ~mon + tue + wed + thu + stormy

               Estimate  Std. Error  t value Pr(&amp;gt;|t|)    
(Intercept)  8.62835440  0.38897023 22.18256  &amp;lt; 2e-16 ***
lprice       0.00105931  1.30954697  0.00081  0.99936    
stormy      -0.36324606  0.46491248 -0.78132  0.43632    
---
Signif. codes:  0 &amp;#39;***&amp;#39; 0.001 &amp;#39;**&amp;#39; 0.01 &amp;#39;*&amp;#39; 0.05 &amp;#39;.&amp;#39; 0.1 &amp;#39; &amp;#39; 1

Residual standard error: 0.729801 on 108 degrees of freedom
Number of observations: 111 Degrees of Freedom: 108 
SSR: 57.521843 MSE: 0.53261 Root MSE: 0.729801 
Multiple R-Squared: 0.04936 Adjusted R-Squared: 0.031755 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上两个分析报告，局外人自然是云山雾罩，头大不已，真是应了那句老话“隔行如隔山”！&lt;/p&gt;
&lt;p&gt;简言之，计量经济学充满了此类“暗语”——各类计算软件的统计分析报告。他们是在各种精致的计量理论下，衍生出来的各类分析方法、诊断工具、统计手段的软件结果的视觉呈现！这里面有蕴含着诸多数学家、统计学家、经济学家大神们的天才设计、神思妙想。然后我们借助神奇的“计算机”，分分钟把天才们的洞见给呈现出来了。这个暗语难于解读，主要在于两点：（1）天才们的思想我们难以领会，或者天才们太多，或者天才的奇思妙想太多！所谓机关算尽，不达目的誓不休！（2）计算分析软件种类繁多，呈现方式各异，处处都是“技术黑箱”（blackbox），无疑又是新手们需要面对的一个个“巨坑”！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;计量经济学疯言风语3矩阵语言matrix狂语&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;计量经济学“疯言风语”3：矩阵语言matrix（狂语）&lt;/h3&gt;
&lt;p&gt;看过以上两条计量经济学“疯言风语”，估计暗地里给自己使劲加油，必须要鼓足满满的学习勇气了！而下面这第三条计量经济学“疯言风语”，对于很多人而言，简直就是不可逾越的“认知障碍”！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;传说计量经济学家都开始抓狂痴怪了，上帝说他们需要清净一下！于是给了计量经济学家一件法宝，那就是“矩阵理论”。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;计量经济学“疯言风语”3——矩阵语言matrix（狂语）。矩阵理论运用在计量经济学中，能把高维繁杂的代数问题，转换为紧凑简洁的矩阵语言。这既是语言形式上的一次完美变身，更是思维视野上的一次大跳跃！矩阵点睛，化石成金！&lt;/p&gt;
&lt;p&gt;难的是各种矩阵术语和关系式表达扑面而来：矩阵、方阵
对角阵、行列式、秩、列满秩、特征根、转置、逆矩阵、内积和外积、正定矩阵……。&lt;/p&gt;
&lt;p&gt;下面给大家展示二元回归下，分别用代数语言和矩阵语言分别求解回归系数的结果。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;总体回归模型为，待估计参数包括&lt;span class=&#34;math inline&#34;&gt;\(\beta_1,\beta_2, \beta_3\)&lt;/span&gt;，假定它们的OLS估计值分别为&lt;span class=&#34;math inline&#34;&gt;\(\hat{\beta}_1,\hat{\beta}_2, \hat{\beta}_3\)&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin {align} 
Y_{i}=\beta_{1}+\beta_{2} X_{2 i}+\beta_{3} X_{3 i}+u_{i}
\end {align}\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下面是用代数语言下OLS的求解结果：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{cases}
  \begin {align} 
  \hat{\beta}_{1} &amp;amp;=\overline{Y}-\hat{\beta}_{2} \overline{X}-\hat{\beta}_{3} \overline{X}_{3} \\ 
  \hat{\beta}_{2} &amp;amp;=\frac{\left(\sum y_{i} x_{2 i}\right)\left(\sum x_{3 i}^{2}\right)-\left(\sum y_{i} x_{3 i}\right)\left(\sum x_{2 i} x_{3 i}\right)}{\left(\sum x_{2 i}^{2}\right)\left(\sum x_{3 i}^{2}\right)-\left(\sum x_{2 i} x_{3 i}\right)^{2}} \\ 
  \hat{\beta}_{3} &amp;amp;=\frac{\left(\sum y_{i} x_{3 i}\right)\left(\sum x_{2 i}^{2}\right)-\left(\sum y_{i} x_{2 i}\right)\left(\sum x_{2 i} x_{3 i}\right)}{\left(\sum x_{2 i}^{2}\right)\left(\sum x_{3 i}^{2}\right)-\left(\sum x_{2 i} x_{3 i}\right)^{2}} 
  \end {align}
\end{cases}\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下面是则是矩阵语言下OLS的求解结果：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{align}
\boldsymbol{\hat{\beta}} &amp;amp;=\boldsymbol{(X&amp;#39;X)^{-1}X&amp;#39;y} 
\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;二者谁更简洁？两个世界，那个更清净？相信一上台即有分晓。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;后话语言障碍还是心理障碍&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;后话：语言障碍还是心理障碍&lt;/h2&gt;
&lt;p&gt;与计量经济学的交锋，往往同时夹杂着计量经济学的“疯言风语”语言障碍，以及抽象数学、众多经济理论等的认知心理障碍。&lt;/p&gt;
&lt;p&gt;然而，随着计量经济学理论的规范化和互联网信息获取的开源化、便利化，学习上的认知障碍和成本正在逐步消减，而“疯言风语”的语言障碍，则需要假以时日，反复训练（跟学英语或者学计算机语言，大抵相似！）。&lt;/p&gt;
&lt;p&gt;总之，计量经济学有其一套独特的科学语言，背后更是有无数天才的智慧和思想闪光，需要大家去沉下心去认真感受和领略！&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ggplot2绘图细节及美化技巧</title>
      <link>https://huhuaping.netlify.app/2020/03/07/ggplot2-refined-adjustment-skills/</link>
      <pubDate>Sat, 07 Mar 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/03/07/ggplot2-refined-adjustment-skills/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#调整轴题与轴标签之间的间距&#34;&gt;调整轴题与轴标签之间的间距&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#geom_text如何控制字体大小&#34;&gt;geom_text()如何控制字体大小&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#如何给geom_hline添加图例&#34;&gt;如何给geom_hline()添加图例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#保持读取csv编码正确&#34;&gt;保持读取csv编码正确&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#facet_grid-实现多种图形并存&#34;&gt;facet_grid() 实现多种图形并存&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;调整轴题与轴标签之间的间距&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;调整轴题与轴标签之间的间距&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/14487188/increase-distance-between-text-and-title-on-the-y-axis&#34;&gt;Increase distance between text and title on the y-axis&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ggplot(mpg, aes(cty, hwy)) + geom_point()+
  theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;geom_text如何控制字体大小&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;geom_text()如何控制字体大小&lt;/h1&gt;
&lt;p&gt;首先，geom_text()的size是按mm计量的。所以并不是跟font size一样的计量规则。所以不要混同二者的度量尺度。（参看&lt;a href=&#34;https://github.com/tidyverse/ggplot2/issues/1828&#34;&gt;The size in geom_text is not a font size&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;其次，ggplot中字体控制的关系如下。简言之：geom_text()是单独控制字体的！！（参看：&lt;a href=&#34;https://stackoverflow.com/questions/25061822/ggplot-geom-text-font-size-control&#34;&gt;ggplot geom_text font size control&lt;/a&gt;）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;p &amp;lt;- p + theme(axis.text = element_text(size = 15)) # changes axis labels

p &amp;lt;- p + theme(axis.title = element_text(size = 25)) # change axis titles

p &amp;lt;- p + theme(text = element_text(size = 10)) # this will change all text size 
                                                             # (except geom_text)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;如何给geom_hline添加图例&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;如何给geom_hline()添加图例&lt;/h1&gt;
&lt;p&gt;给geom_hline&lt;a href=&#34;https://stackoverflow.com/questions/39119917/how-to-add-a-legend-to-hline&#34;&gt;添加图例&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;保持读取csv编码正确&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;保持读取csv编码正确&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/46996501/readrread-csv-issue-chinese-character-becomes-messy-codes&#34;&gt;编码正确&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;facet_grid-实现多种图形并存&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;facet_grid() 实现多种图形并存&lt;/h1&gt;
&lt;p&gt;facet_grid()可以同时绘制多个子图，但是默认情况下每个子图都是同一种类型，如都是line，或都是point。&lt;/p&gt;
&lt;p&gt;下面是多个子图不同类型的实现思路&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; &lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;保持数据为long format data格式&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设定一个factor作为子图分类。 factor levels 将决定子图的个数。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;绘制空白图p1。含有factor levels个数的子图，data为全数据集。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;通过subset()函数选定数据子集，并分别叠加绘制在p1上,直至所有空白子图都绘制完成。子图的geom_xxx()可以各不相同。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个样本案例可以参照：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# for column select
got_vars &amp;lt;- c(&amp;quot;bigtractor&amp;quot;,&amp;quot;bigtractor1&amp;quot;, &amp;quot;smalltractor&amp;quot;, &amp;quot;smalltractor1&amp;quot;, &amp;quot;match_big&amp;quot;, &amp;quot;match_small&amp;quot;)

# gather for facet
smry_tractor &amp;lt;- smry %&amp;gt;%
  filter(region_pro == &amp;quot;旱区&amp;quot;) %&amp;gt;%
  select(one_of(c(&amp;quot;year&amp;quot;, &amp;quot;region_pro&amp;quot;, got_vars))) %&amp;gt;%
  gather(key=&amp;quot;variables&amp;quot;, value=&amp;quot;value&amp;quot;, bigtractor:match_small) %&amp;gt;%
  mutate(mark = as.factor(if_else(str_detect(variables, &amp;quot;bigtractor.?&amp;quot;), 
                        &amp;quot;bigtractor&amp;quot;,
                        if_else(str_detect(variables, &amp;quot;^smalltractor&amp;quot;),
                                &amp;quot;smalltractor&amp;quot;,
                                if_else(str_detect(variables, &amp;quot;^match&amp;quot;),
                                        &amp;quot;match&amp;quot;,
                                        &amp;quot;NA&amp;quot;))))) %&amp;gt;%
  mutate(mark= fct_relevel(mark,&amp;quot;bigtractor&amp;quot;, &amp;quot;smalltractor&amp;quot;, &amp;quot;mathch&amp;quot;))

# list for facet labels                       
list_chn &amp;lt;- c(bigtractor=&amp;quot;中大型及配套(万台)&amp;quot;,
              smalltractor=&amp;quot;小型及配套(万台)&amp;quot;, 
              match=&amp;quot;配套比(%)&amp;quot;)

# base plot
p0 &amp;lt;-  ggplot(smry_tractor, aes(factor(year), value)) +
  facet_grid(mark~., 
              scales = &amp;quot;free&amp;quot;,
              labeller = labeller(mark = list_chn)) +
  labs(x =&amp;quot;年份&amp;quot;, y=&amp;quot;&amp;quot;) +
  theme(axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)),
        strip.text.y = element_text(size = 8)) # tune facet label font size

# raw 1 plot 
list_big &amp;lt;- c(&amp;quot;bigtractor&amp;quot;, &amp;quot;bigtractor1&amp;quot;) # for subset
list_text &amp;lt;- c(&amp;quot;中大型&amp;quot;, &amp;quot;中大型配套&amp;quot;, &amp;quot;小型&amp;quot;, &amp;quot;小型配套&amp;quot;) # for legend text
p1 &amp;lt;-  p0 +
   geom_bar( subset(smry_tractor, variables %in% list_big),
             mapping = aes(fill = variables),
             stat = &amp;quot;identity&amp;quot;, position = &amp;quot;stack&amp;quot;) +
  geom_text( subset(smry_tractor, variables %in% list_big),
             mapping = aes(label = round(value,0)),
             position = position_stack(vjust = 0.7), size =3) +
  scale_fill_discrete(name = &amp;quot;&amp;quot;, labels = list_text)

# raw 2 plot 
list_small &amp;lt;- c(&amp;quot;smalltractor&amp;quot;, &amp;quot;smalltractor1&amp;quot;) # for subset
p2 &amp;lt;- p1 +
  geom_bar( subset(smry_tractor, variables %in% list_small),
            mapping = aes(fill = variables),
            stat = &amp;quot;identity&amp;quot;, position = &amp;quot;stack&amp;quot;) +
  geom_text( subset(smry_tractor, variables %in% list_small),
             mapping = aes(label = round(value,0)),
             position = position_stack(vjust = 0.7), size =3) +
  scale_fill_discrete(name = &amp;quot;&amp;quot;, labels = list_text)

# raw 3 plot  
list_match &amp;lt;- c(&amp;quot;match_big&amp;quot;, &amp;quot;match_small&amp;quot;) # for subset
list_text &amp;lt;- c(&amp;quot;中大型&amp;quot;, &amp;quot;小型&amp;quot;)  # for legend text
p3 &amp;lt;- p2 +
   geom_line( subset(smry_tractor, variables %in% list_match),
              mapping = aes(linetype = variables, group = variables)) +
   geom_point( subset(smry_tractor, variables %in% list_match),
               mapping = aes(color = variables, group = variables)) +
   geom_text_repel( subset(smry_tractor, variables %in% list_match),
                    mapping = aes(label = formatC(value,1, format = &amp;quot;f&amp;quot;)), 
                    direction =&amp;quot;both&amp;quot;, size =3) +
  scale_linetype_discrete(name = &amp;quot;&amp;quot;, labels = list_text) +
  scale_color_discrete(name = &amp;quot;&amp;quot;, labels = list_text) +
  guides(fill = guide_legend(order = 1))  # tune legend order
 
 p3&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:unnamed-chunk-1&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;pic/facet-multiple-geom.png&#34; alt=&#34;include_graphics函数方法插入图片&#34; width=&#34;826&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: include_graphics函数方法插入图片
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://learnr.wordpress.com/2009/05/18/ggplot2-three-variable-time-series-panel-chart/&#34;&gt;ggplot2: Three Variable Time Series Panel Chart&lt;/a&gt;&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://statbandit.wordpress.com/2011/07/29/a-ggplot-trick-to-plot-different-plot-types-in-facets/&#34;&gt;A GGPLOT TRICK TO PLOT DIFFERENT PLOT TYPES IN FACETS&lt;/a&gt;&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>面板数据学习书籍清单</title>
      <link>https://huhuaping.netlify.app/2020/02/20/pannel-data-books-collection/</link>
      <pubDate>Thu, 20 Feb 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/02/20/pannel-data-books-collection/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#专著类&#34;&gt;专著类&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#编著类&#34;&gt;编著类&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;专著类&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;专著类&lt;/h1&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Wooldridge, J. M. Econometric Analysis of Cross Section and Panel Data [M], MIT press, 2010.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Baltagi, B. H. Econometric analysis of panel data [M]. Chichester (West Sussex), John Wiley &amp;amp; Sons, Inc., 2013.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Tsounis, N. and A. Vlachvei. ADVANCES IN PANEL DATA ANALYSIS IN APPLIED ECONOMIC RESEARCH [M], SPRINGER, 2017.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Erik, B. Econometrics of panel data : methods and applications [M], Oxford University Press, 2017.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Croissant, Y. and G. Millo. Panel data econometrics with R [M]. Hoboken, John Wiley &amp;amp; Sons, 2019.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;R编程建模实现，与Baltagi的专著相呼应。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;编著类&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;编著类&lt;/h1&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Baltagi, B. H. The Oxford handbook of panel data [M], Oxford press, 2015.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Tsionas, M. Panel Data Econometrics: Theory [M], Academic Press, 2019.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Tsionas, M. Panel Data Econometrics: Empirical Applications [M], Academic Press, 2019.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>给github帐号添加SSH key</title>
      <link>https://huhuaping.netlify.app/2020/02/15/ssh-key-for-github/</link>
      <pubDate>Sat, 15 Feb 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/02/15/ssh-key-for-github/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#确认是否本地存有密钥&#34;&gt;确认是否本地存有密钥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#生成ssh-key&#34;&gt;生成SSH key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#查看并拷贝密钥&#34;&gt;查看并拷贝密钥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#把密钥添加到github账号&#34;&gt;把密钥添加到github账号&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;许多 Git 服务器都使用 SSH 公钥进行认证。为了向Git服务器提供SSH公钥，如果某系统用户尚未拥有密钥，必须事先为其生成一份。简单说，如果本地电脑采用SSH key来与服务器对话，就能省去繁复的账号密码输入过程。&lt;/p&gt;
&lt;div id=&#34;确认是否本地存有密钥&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;确认是否本地存有密钥&lt;/h2&gt;
&lt;p&gt;首先，你需要确认自己是否已经拥有密钥。默认情况下，用户的SSH密钥存储在其~/.ssh目录下。进入该目录并列出其中内容，你便可以快速确认自己是否已拥有密钥：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cd ~/.ssh
$ ls&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;生成ssh-key&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;生成SSH key&lt;/h2&gt;
&lt;p&gt;打开gitbash，输入如下代码:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ssh-keygen -t rsa -b 4096 -C &amp;quot;your_email@example.com&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;用自己的github账号邮箱替换上面的邮箱&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果提示文件夹，默认即可，直接按Enter&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果提示密码，不设密码的话，也直接按Enter&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;确保已经运行密钥：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ eval $(ssh-agent -s)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;把密钥添加到本地代理：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ssh-add ~/.ssh/id_rsa&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;查看并拷贝密钥&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;查看并拷贝密钥&lt;/h2&gt;
&lt;p&gt;默认生成路径下，可以输入如下代码查看密钥：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cat ~/.ssh/id_rsa.pub
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;拷贝到剪贴板：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ clip &amp;lt; ~/.ssh/id_rsa.pub
# Copies the contents of the id_rsa.pub file to your clipboard&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;把密钥添加到github账号&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;把密钥添加到github账号&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;账号登陆github&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;点击头像，下拉点击setting&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;点击SSH and GPG keys&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;点击New SSH key 或者 Add SSH key&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;粘贴密钥&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;title命名备注&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;点击 Add SSH key&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R&#43;docker进行动态网页数据抓取</title>
      <link>https://huhuaping.netlify.app/2020/02/09/dynamic-web-scraping/</link>
      <pubDate>Sun, 09 Feb 2020 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2020/02/09/dynamic-web-scraping/</guid>
      <description>
&lt;link href=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/anchor-sections/anchor-sections.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#工具和准备&#34;&gt;工具和准备&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#安装工具软件&#34;&gt;安装工具软件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#docker配置准备&#34;&gt;docker配置准备&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#rselenium相关操作&#34;&gt;RSelenium相关操作&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#一个实例抓取并下载智慧教学云平台资料&#34;&gt;一个实例：抓取并下载智慧教学云平台资料&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#案例数据抓取的目标&#34;&gt;案例数据抓取的目标&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#案例数据抓取的特点&#34;&gt;案例数据抓取的特点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#r代码实现&#34;&gt;R代码实现&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;工具和准备&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;工具和准备&lt;/h1&gt;
&lt;div id=&#34;安装工具软件&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;安装工具软件&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下载安装docker &lt;a href=&#34;https://www.docker.com/&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个教程供学习：&lt;a href=&#34;https://docker-curriculum.com/&#34;&gt;A Docker Tutorial for Beginners&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rstudio中安装RSelenium包 &lt;a href=&#34;https://github.com/ropensci/RSelenium&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# install.packages(&amp;quot;devtools&amp;quot;)
devtools::install_github(&amp;quot;ropensci/RSelenium&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下载安装TightVNC用于查看实时交互。&lt;a href=&#34;https://www.tightvnc.com/&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一份说明供学习：&lt;a href=&#34;https://cran.r-project.org/web/packages/RSelenium/vignettes/docker.html#debugging-using-vnc&#34;&gt;Debugging Using VNC&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;docker配置准备&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;docker配置准备&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;注册docker hub账号（非必须）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置国内镜像站点（强烈建议）。速度将明显改观！具体参看&lt;a href=&#34;https://yeasy.gitbooks.io/docker_practice/install/mirror.html&#34;&gt;材料&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用docker命令拉取selenium -chrome镜像（请根据自己的浏览器选择，chrome或者firefox）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在Rstudio的Terminal窗口中执行如下命令！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;启动docker服务：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;bash&#34;&gt;&lt;code&gt;$ docker run -d -p 4445:4444 selenium/standalone-chrome&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;rselenium相关操作&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;RSelenium相关操作&lt;/h2&gt;
&lt;p&gt;使用RSelenium包控制浏览器主要依靠remoteDriver系列函数。简单操作命令如下。可参考&lt;a href=&#34;https://blog.csdn.net/weixin_40628687/article/details/79008995&#34;&gt;网络材料&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(RSelenium)
remDr &amp;lt;- remoteDriver(browserName =&amp;quot;chrome&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 打开浏览器
remDr$open()
# 关闭浏览器
remDr$quit()  # 直接退出
remDr$close()  # close用于关闭当前会话，也可以用作关闭浏览器&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 打开网页
url &amp;lt;- &amp;#39;http://www.baidu.com&amp;#39;
remDr$navigate(url)
# 关闭网页
remDr$closeWindow()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 打开网页
url &amp;lt;- &amp;#39;http://www.baidu.com&amp;#39;
remDr$navigate(url)
# 定位
xpath &amp;lt;- &amp;#39;//*[@id=&amp;quot;su&amp;quot;]&amp;#39;
btn &amp;lt;- remDr$findElement(using = &amp;#39;xpath&amp;#39;, value = xpath)
# 单击
btn$clickElement()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;一个实例抓取并下载智慧教学云平台资料&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;一个实例：抓取并下载智慧教学云平台资料&lt;/h1&gt;
&lt;div id=&#34;案例数据抓取的目标&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;案例数据抓取的目标&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;目标是获得全部视频（83x3= 249）的下载地址。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;整理各个视频的基本信息，用于下载视频后期的准确重命名（下载地址url是一串字符而已）。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;登录后的&lt;strong&gt;目标页面&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://huhuaping.netlify.app/pic/web-scrape-AI-room-vedio-list.png&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;案例数据抓取的特点&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;案例数据抓取的特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;需要账号/密码登陆&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;动态网页：可能会碰到JavaScript、下拉选择等操作&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;网站可能随时调整：例如视频材料定期清除&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;r代码实现&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R代码实现&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# useful packages
library(RSelenium)
library(wdman)
library(&amp;quot;XML&amp;quot;)
library(&amp;quot;tidyverse&amp;quot;)
library(xml2)
library(rvest)

# remote driver
remDr &amp;lt;- RSelenium::remoteDriver(remoteServerAddr = &amp;quot;localhost&amp;quot;,
                                 port = 4445L,
                                 browserName = &amp;quot;chrome&amp;quot;)
remDr$open()

# navigate to the website of interest
remDr$navigate(&amp;quot;http://172.26.3.11:8080/&amp;quot;)

# check on there
remDr$screenshot(display = TRUE)

# login info
remDr$findElement(&amp;quot;id&amp;quot;, &amp;quot;username&amp;quot;)$sendKeysToElement(list(&amp;quot;your-id&amp;quot;))
remDr$findElement(&amp;quot;id&amp;quot;, &amp;quot;password&amp;quot;)$sendKeysToElement(list(&amp;quot;your-password&amp;quot;))
remDr$findElement(&amp;quot;css&amp;quot;, &amp;quot;.login-aside input[type=&amp;#39;submit&amp;#39;]&amp;quot;)$clickElement()

# check again
remDr$screenshot(display = TRUE)

# click my video
remDr$navigate(&amp;quot;https://ylb.nwafu.edu.cn/ICloudRecordPlay/teacherVideoManagement&amp;quot;)

# click one year (avoid random jump)
remDr$findElement(using = &amp;quot;css&amp;quot;, &amp;quot;#body &amp;gt; div.mod-filter &amp;gt; dl:nth-child(1) &amp;gt; dd &amp;gt; a:nth-child(1)&amp;quot;)$clickElement()

# click page 2
remDr$findElement(using = &amp;quot;css&amp;quot;, &amp;quot;#body &amp;gt; div.bootstrap-table &amp;gt; div.fixed-table-container &amp;gt; div.fixed-table-pagination &amp;gt; div.pull-right.pagination &amp;gt; ul &amp;gt; li:nth-child(3) &amp;gt; a&amp;quot;)$clickElement()
remDr$screenshot(display = TRUE)

# set page number css (number 1 begin with par 2)
page_total &amp;lt;- 6
page_css &amp;lt;- paste0(&amp;quot;#body &amp;gt; div.bootstrap-table &amp;gt; div.fixed-table-container &amp;gt; div.fixed-table-pagination &amp;gt; div.pull-right.pagination &amp;gt; ul &amp;gt; li:nth-child(&amp;quot;, 1:page_total+1, &amp;quot;) &amp;gt; a&amp;quot;)


# set download page (click &amp;quot;下载&amp;quot;)
item_total &amp;lt;- 15
pos &amp;lt;- paste(&amp;quot;#courseTable &amp;gt; tbody &amp;gt; tr:nth-child(&amp;quot;, 1:item_total,&amp;quot;) &amp;gt; td:nth-child(6) &amp;gt; a:nth-child(2)&amp;quot;, sep =&amp;quot;&amp;quot;)


pageinfo &amp;lt;- NULL
 
#----- page loop --------

for (i in 1:5){
  # click one year (avoid random jump)
  #remDr$findElement(using = &amp;quot;css&amp;quot;, &amp;quot;#body &amp;gt; div.mod-filter &amp;gt; dl:nth-child(1) &amp;gt; dd &amp;gt; a:nth-child(1)&amp;quot;)$clickElement()
  
  # set chromeDriver window size (very important! for page number &amp;gt;3)
  remDr$setWindowSize(1600, 900)
  
  # click the page number(number 1 begin with par 2)
  remDr$findElement(using = &amp;quot;css&amp;quot;, page_css[6] )$clickElement()
  
  # wait load page
  Sys.sleep(2)
  remDr$screenshot(display = TRUE)
 
   # look for table element
  tableElem &amp;lt;- remDr$findElement(using = &amp;quot;id&amp;quot;, &amp;quot;courseTable&amp;quot;)
  
  # Html output
  txt &amp;lt;- tableElem$getElementAttribute(&amp;quot;outerHTML&amp;quot;)[[1]]
  
  # scrape the date and room 
  v_date &amp;lt;- txt %&amp;gt;% read_html() %&amp;gt;%  xml_nodes(&amp;quot;tbody&amp;quot;) %&amp;gt;% xml_nodes(&amp;quot;td:nth-child(2)&amp;quot;) %&amp;gt;% xml_text()
  v_room &amp;lt;- txt %&amp;gt;% read_html() %&amp;gt;%  xml_nodes(&amp;quot;tbody&amp;quot;) %&amp;gt;% xml_nodes(&amp;quot;td:nth-child(4)&amp;quot;) %&amp;gt;% xml_text()
  
  # tidy data.frame
  info_tem &amp;lt;- data.frame(date=v_date, room =v_room) 
  
  
  #----- loop for download url-------
  url &amp;lt;- NULL
  for (i in  1:8 ){
    # click and open window
    remDr$findElement(using = &amp;quot;css&amp;quot;, pos[i])$clickElement()
    
    Sys.sleep(1)
    #remDr$setImplicitWaitTimeout(milliseconds = 10000)
    
    remDr$screenshot(display = TRUE)
    
    # look for download element
    downElem &amp;lt;- remDr$findElement(using = &amp;quot;css&amp;quot;, &amp;quot;#downloadVideo-modal &amp;gt; div &amp;gt; div&amp;quot;)
    
    txt_down &amp;lt;- downElem$getElementAttribute(&amp;quot;outerHTML&amp;quot;)[[1]]
    
    # get attributes
    
    url_down &amp;lt;- txt_down %&amp;gt;% read_html() %&amp;gt;%  xml_nodes(&amp;quot;div &amp;gt;div &amp;gt; a&amp;quot;) %&amp;gt;% xml_attr(&amp;quot;href&amp;quot;)
    
    # close the float window
    remDr$findElement(using = &amp;quot;css&amp;quot;, &amp;quot;#closePicResourceDetail-modal &amp;gt; span&amp;quot;)$clickElement()
    
    url_tem &amp;lt;- t(data.frame(url_down)) %&amp;gt;% as_tibble() 
    url &amp;lt;- rbind(url, url_tem)
    
  }

pageinfo_tem &amp;lt;- bind_cols(info_tem, url) 

pageinfo &amp;lt;- bind_rows(pageinfo, pageinfo_tem)
}

# close drivers
remDr$getStatus()
remDr$closeWindow()

# tidy data 

pageinfo_ok  &amp;lt;- pageinfo %&amp;gt;%
  gather(key = &amp;quot;VideoAngle&amp;quot;, value = &amp;quot;url&amp;quot;, V1:V3) %&amp;gt;%
  separate(col = &amp;quot;date&amp;quot; , into = c(&amp;quot;date&amp;quot;,&amp;quot;week&amp;quot;, &amp;quot;weekday&amp;quot;, &amp;quot;slot&amp;quot;), sep = &amp;quot; &amp;quot;) %&amp;gt;%
  arrange(date, week, weekday, slot,room) %&amp;gt;%
  mutate(VideoRole= recode(VideoAngle,&amp;quot;V1&amp;quot;=&amp;quot;teacher&amp;quot;,&amp;quot;V2&amp;quot;=&amp;quot;student&amp;quot;, &amp;quot;V3&amp;quot;=&amp;quot;slide&amp;quot;)) %&amp;gt;%
  mutate(exist= if_else(url==&amp;quot;javascript:void(0)&amp;quot;, &amp;quot;NO&amp;quot;, &amp;quot;YES&amp;quot;)) %&amp;gt;%
  mutate(week.en = str_c(&amp;quot;week&amp;quot;,str_extract(week, &amp;#39;[:digit:]&amp;#39;)),
         slot.en = str_c(&amp;quot;slot&amp;quot;,str_extract(slot, &amp;quot;[:digit:]&amp;quot;))) %&amp;gt;%
  #mutate( weekday.en =weekday) %&amp;gt;%
  mutate(weekday.en =recode(weekday, &amp;quot;星期一&amp;quot;=&amp;quot;1&amp;quot;, &amp;quot;星期二&amp;quot;=&amp;quot;2&amp;quot;,&amp;quot;星期三&amp;quot;=&amp;quot;3&amp;quot;,
                             &amp;quot;星期四&amp;quot;=&amp;quot;4&amp;quot;,&amp;quot;星期五&amp;quot;=&amp;quot;5&amp;quot;)) %&amp;gt;%
  mutate(weekday.en =str_c(&amp;quot;weekday&amp;quot;,weekday.en)) %&amp;gt;%
  mutate(dir= str_c(
    str_c(date, week.en, weekday.en, slot.en, VideoRole, sep=&amp;quot;-&amp;quot;),
    &amp;quot;.mp4&amp;quot;)
    ) 

# export file
xlsx::write.xlsx2(pageinfo_ok, &amp;quot;page-info-ok.xlsx&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>本科生如何入手一个研究项目</title>
      <link>https://huhuaping.netlify.app/2019/10/17/how-to-do-research-for-undergraduate-students/</link>
      <pubDate>Thu, 17 Oct 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/10/17/how-to-do-research-for-undergraduate-students/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#怎么跟指导老师打交道&#34;&gt;怎么跟指导老师打交道？&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#第一轮沟通谈初步想法&#34;&gt;第一轮沟通（谈初步想法）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#第二轮沟通落实实证数据和分析模型&#34;&gt;第二轮沟通（落实实证数据和分析模型）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#第三轮沟通明确创新点&#34;&gt;第三轮沟通（明确创新点）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#第四轮沟通论文初稿提出自己的困难和问题尝试解决&#34;&gt;第四轮沟通（论文初稿，提出自己的困难和问题，尝试解决）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#第五轮沟通论文完善改进&#34;&gt;第五轮沟通（论文完善、改进）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#本科生选题的基本原则&#34;&gt;本科生选题的基本原则&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#关于选题要以问题导向&#34;&gt;关于选题要以“问题导向”&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#研究内容和研究方案的几点建议&#34;&gt;研究内容和研究方案的几点建议&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;怎么跟指导老师打交道&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;怎么跟指导老师打交道？&lt;/h2&gt;
&lt;p&gt;论文选题到写作的整个流程，老师和学生能否有效沟通，很大程度上决定着研究质量改进的程度！&lt;/p&gt;
&lt;p&gt;有两种典型的沟通状态：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;学生很积极，一有机会就找老师谈自己的想法。但学生碰到困难就躲避，选题经常变换；学生没有全局观，经常掉入各种技术细节的泥沼，碰到问题就找老师，而不是尝试自己先想办法解决。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;学生有了一个想法，就开始闷头做，与老师极少沟通。学生不看别人已有的研究成果（文献），或者只是粗略地看一些很浅的新闻报道。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果是跟我沟通交流，大家一定要带问题带话题来！请按如下&lt;strong&gt;“姿势”&lt;/strong&gt;进行：&lt;/p&gt;
&lt;div id=&#34;第一轮沟通谈初步想法&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第一轮沟通（谈初步想法）&lt;/h3&gt;
&lt;p&gt;这一轮沟通主要是把你的初步想法提出来，表达清楚，写得明白！可以是“拿来主义”！先模仿别人写得好的文章来！什么是比较好的文章？估计你很难判断。那么你就找期刊级别是属于&lt;strong&gt;中文核心&lt;/strong&gt;（北大或南京大学的）、&lt;strong&gt;CSSCI&lt;/strong&gt;、&lt;strong&gt;SCI&lt;/strong&gt;或SSCI的！！请带如下带问题带话题来：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;老师，我想做【题目】为“XXXXXX”（题目不超过20字）的研究，我的【研究内容和设计】是XXXXXXXXXXX（不超过200字）。&lt;/li&gt;
&lt;li&gt;我是基于对这篇（或若干篇）科研文献“XXXXXXX”的阅读获得的灵感。（1）请对文献标明：期刊名、年、卷、期；（2）请提供这几篇【科研文献】的电子版（.pdf或.caj）。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：次轮沟通可能要反复进行多次。建议要&lt;strong&gt;真正&lt;/strong&gt;地看一两篇直接相关的英文文章！！！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;第二轮沟通落实实证数据和分析模型&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第二轮沟通（落实实证数据和分析模型）&lt;/h3&gt;
&lt;p&gt;这一步主要沟通研究的可操作性问题。一是你的实证数据（一手调查数据或者二手数据）是否拿得到？二是分析模型能不能搞得定？&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;老师，我的【题目】初步定为“XXXXXXXXX”（题目不超过20字），我的研究内容和设计进一步明确了，具体是XXXXXXXXXXX（不超过200字）。——经过前面交流，不断改进！&lt;/li&gt;
&lt;li&gt;我是基于对这篇（或若干篇）【科研文献】“XXXXXXX”的阅读获得的灵感，这篇文章的&lt;strong&gt;数据来源&lt;/strong&gt;是XXXXXXXX（不超过100字），我也能拿到这样的数据。我的数据来源是XXXXXXX。这是我初步的&lt;strong&gt;【数据表】&lt;/strong&gt;（请提供数据.xls或.csv等）。&lt;/li&gt;
&lt;li&gt;对这篇（或若干篇）科研文献“XXXXXXX”的分析模型是XXXXX方法，我也可以用他这个方法。我的【理论模型和分析方法】具体是这样的XXXXXXXX（不超过200字）。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;第三轮沟通明确创新点&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第三轮沟通（明确创新点）&lt;/h3&gt;
&lt;p&gt;注意学术规范，切忌完全复制或照搬别人的文章！！多多思考，多多分析，最后要实现“我们不一样！”！我的文章起码有一个创新点！！！&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;老师，我的【题目】进一步确定为“XXXXXXXXX”（题目不超过20字），我的研究内容和设计进一步明确了，具体是XXXXXXXXXXX（不超过200字）。——经过前面交流，不断改进！&lt;/li&gt;
&lt;li&gt;我是基于对这篇（或若干篇）科研文献“XXXXXXX”的阅读获得的灵感，我跟这篇文章最大的【不同点】是XXXXXXXX（不超过200字），这就是我的创新点。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;第四轮沟通论文初稿提出自己的困难和问题尝试解决&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第四轮沟通（论文初稿，提出自己的困难和问题，尝试解决）&lt;/h3&gt;
&lt;p&gt;写作每一篇论文，必然会碰到困难和问题！不要随意就投降、屈服！先把问题指出来、列出来，然后自己尝试找到可行的解决办法！再跟老师来沟通！&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;老师，这是我的【论文初稿】（要按论文写作格式和规范来！！）&lt;/li&gt;
&lt;li&gt;我的论文还有很多地方不成熟。下面是我碰到的一些【困难和问题列表和我的解决办法】XXXXXXX（不超过500字，列出一个清单来，按急迫和重要程度来列1、2、3、）。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;第五轮沟通论文完善改进&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;第五轮沟通（论文完善、改进）&lt;/h3&gt;
&lt;p&gt;论文都是改出来的！！每次一小步，最终成大器！&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;老师，这是我的【论文修改稿】。我这次的【论文改进主要有】XXXXXX（不超过200字，列出一个清单来，按修改的重要程度来列1、2、3、）。&lt;/li&gt;
&lt;li&gt;与老师沟通后，老师会进一步提出修改意见，请把老师的【修改意见】汇总起来，回去自己抓紧修改，有问题的话就继续下一轮沟通！！&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;本科生选题的基本原则&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;本科生选题的基本原则&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;专业导向&lt;/strong&gt;：与自己所学专业相关&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;问题导向&lt;/strong&gt;：题目应有明确的科学问题。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;可操作性&lt;/strong&gt;：数据获取可行，可以利用身边、老家等资源。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;理论性&lt;/strong&gt;：科创论文不是调研报告，应有一定的理论高度。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;具体性&lt;/strong&gt;：题目要具体要小，切记出现“我国”这样的宏大字眼。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;关于选题要以问题导向&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;关于选题要以“问题导向”&lt;/h2&gt;
&lt;p&gt;选题要以“问题导向”，就是说你的研究应该着眼于社会实际问题、民生疾苦问题等，目标是解释社会问题、解决社会问题、缓解民生疾苦。选题不应该空谈阔论，不能无病呻吟！&lt;/p&gt;
&lt;p&gt;简单的比喻：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;你现在是医生，你要研究一个病人，那首先应该搞清楚病人有什么问题（病症）？&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;你现在是研究者，你要研究一个社会现象，那你要研究的社会现象有什么实际问题？&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;建议大家多用经济学的思维来看待和思考问题。学以致用，好多同学都没有把现实问题看得足够深。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;研究内容和研究方案的几点建议&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;研究内容和研究方案的几点建议&lt;/h2&gt;
&lt;p&gt;研究方案写作中大家应反复思考如下几个问题是否能搞定：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;分析用的数据是否可行？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;明确数据获取方式？（问卷调研/统计数据/商业统计数据/网络爬取数据）&lt;/li&gt;
&lt;li&gt;明确要获得多少数据样本？（样本数/年度数据/月度数据/周数据……，有多少样本点？）&lt;/li&gt;
&lt;li&gt;明确数据变量有哪些？（如影响因素变量都有哪些？能得到数据么？）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;研究的理论问题与实证模型是否一致？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有没有一个相对明确的分析思路？（如绩效分析需要AHP层次分析法）&lt;/li&gt;
&lt;li&gt;在这个分析思路下，有没有找到一个对应的分析模型？（如logistics模型等）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;研究内容提纲是否明确和具体？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研究内容要写具体一点，要写到三级标题（章-节-点）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;参考文献阅读是否充分？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;要懂得站在巨人的肩膀上的价值！&lt;/li&gt;
&lt;li&gt;要先学会“拿来主义”！&lt;/li&gt;
&lt;li&gt;阅读量要足够：起码15篇中文文献，5-10篇外文文献&lt;/li&gt;
&lt;li&gt;文献的质量要高：中文起码要CSSCI或中文核心期刊索引，外文文献应该是SSCI或SCI！&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>多工作设备下的git控制和使用</title>
      <link>https://huhuaping.netlify.app/2019/08/31/git-with-multiple-devices/</link>
      <pubDate>Sat, 31 Aug 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/08/31/git-with-multiple-devices/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#明确自己git使用的安全环境&#34;&gt;明确自己git使用的安全环境&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#多设备git工作的基本流程&#34;&gt;多设备git工作的基本流程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#两步验证下如何正确地clone远程repo&#34;&gt;两步验证下如何正确地clone远程repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#最后的忠告&#34;&gt;最后的忠告&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;明确自己git使用的安全环境&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;明确自己git使用的安全环境&lt;/h2&gt;
&lt;p&gt;github有多重安全条件，用户可以自行决定自己的安全等级。需要注意的是，在多台工作设备下，git需要确认不同设备的使用权限。因此，明确自己的安全环境是多设备工作的第一步：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;是否开启两步验证。若开启，在一些重要的安全操作下（登陆账户或删除仓库），就需要获得实时动态密码（token）。动态密码的管理工具包括authy等。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;是否设定加密SSH。简单说，如果本地电脑采用SSH key来与服务器对话，就能省去繁复的账号密码输入过程。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;多设备git工作的基本流程&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;多设备git工作的基本流程&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;条件准备。主力设备A；新设备B；需要异端工作的sharerepo。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;主力设备A：对sharerepo已完成工作进行push，上传到云端。add-commit-push三部曲。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;新设备B：创建文件夹，并clone云端的sharerepo。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 明确存放在本地的文件路径
$ cd /j/github/

# clone远程sharerepo到本地文件路径下
$ git clone https://github.com/huhuaping/sharerepo.git

# 进入本地sharerepo
$ cd ./sharerepo&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;工作设备下：pull-edit-add-commit-push 四部曲。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;两步验证下如何正确地clone远程repo&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;两步验证下如何正确地clone远程repo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;对于私有仓库，上述方法clone会提示错误。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;Repository not found. fatal: repository not found&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;github托管下，两步验证法要求对新设备B设定&lt;strong&gt;私有进入授权码&lt;/strong&gt;。github账号 ——&amp;gt;setting ——&amp;gt;Developer settings ——&amp;gt; personal access tokens ——&amp;gt; generate new token ——&amp;gt;勾选权限范围 ——&amp;gt; 复制授权码备用。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;gitbash中输入如下代码colone私有仓库&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# tokens 也就是上述复制备用的授权码。既不是github账户登录密码，也不是两步验证动态码！
$ git clone https://username:tokens@github.com/username/repo.git&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;最后的忠告&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;最后的忠告&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在任何终端设备上工作，最后都要记得对修改进行add-commit-push三部曲操作&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;云端永远保持最新状态！&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;http://www.deanbodenham.com/learn/using-git-to-sync-different-computers.html&#34;&gt;参考资料1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/25947059/git-clone-repository-not-found&#34;&gt;参考资料2&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>LateX输出的相关设置</title>
      <link>https://huhuaping.netlify.app/2019/07/16/work-around-latex-output/</link>
      <pubDate>Tue, 16 Jul 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/07/16/work-around-latex-output/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#安装tinytex&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 安装tinyTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#踩过的latex各种坑&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 踩过的Latex各种坑&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#千分数&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 千分数&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;安装tinytex&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 安装tinyTeX&lt;/h1&gt;
&lt;p&gt;参看谢益辉&lt;a href=&#34;https://yihui.name/tinytex/&#34;&gt;TinyTeX&lt;/a&gt;&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;安装tinytex&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;install.packages(&amp;#39;tinytex&amp;#39;)
tinytex::install_tinytex()&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;测试并调用&lt;code&gt;tlmgr&lt;/code&gt;命令安装latex包&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;writeLines(c(
   &amp;#39;\\documentclass{article}&amp;#39;,
   &amp;#39;\\begin{document}&amp;#39;, &amp;#39;Hello world!&amp;#39;, &amp;#39;\\end{document}&amp;#39;
 ), &amp;#39;test.tex&amp;#39;)
tinytex::pdflatex(&amp;#39;test.tex&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;踩过的latex各种坑&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 踩过的Latex各种坑&lt;/h1&gt;
&lt;div id=&#34;千分数&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 千分数&lt;/h2&gt;
&lt;p&gt;注意这里的&lt;strong&gt;千分数&lt;/strong&gt;是指&lt;strong&gt;千分之几&lt;/strong&gt;（也即&lt;span class=&#34;math inline&#34;&gt;\(\unicode{x2030}\)&lt;/span&gt;），而不是指&lt;strong&gt;千分位分隔符&lt;/strong&gt;（一般用逗点或空格）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Latex环境下，一般用法有latex包&lt;code&gt;textcomp::\textperthousand&lt;/code&gt;或者&lt;code&gt;wasysym::\permil&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rmarkdown下，最好直接使用&lt;code&gt;\unicode{x2030}&lt;/code&gt;&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;来输出千分数&lt;span class=&#34;math inline&#34;&gt;\(\unicode{x2030}\)&lt;/span&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;具体可&lt;a href=&#34;https://stats.meta.stackexchange.com/questions/2884/how-to-get-a-permille-perthousand-sign-in-mathjax&#34;&gt;参看&lt;/a&gt;。&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Latex pdf和html输出下ggplot绘图中文字体显示问题</title>
      <link>https://huhuaping.netlify.app/2019/07/04/chinese-character-in-graph-consistence-with-both-latex-and-html/</link>
      <pubDate>Thu, 04 Jul 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/07/04/chinese-character-in-graph-consistence-with-both-latex-and-html/</guid>
      <description>


&lt;p&gt;中文字体问题总是会在时不时出来捣乱。今天就碰到了ggplot2绘图时，latex pdf输出和html网页输出显示不一致的问题（类似的 &lt;a href=&#34;https://community.rstudio.com/t/chinese-characters-in-ggplot-on-macos/4429&#34;&gt;问题报告&lt;/a&gt;）。&lt;/p&gt;
&lt;div id=&#34;section&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;问题描述&lt;/h2&gt;
&lt;p&gt;google神搜一遍，大家普遍把问题指向：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;操作系统OS问题。Linux/Mac OS普遍采用UTF-8编码格式，而Windows系统则坚持GBK编码格式。因此，如果Rstudio里Rmarkdown文件用UTF-8编码，自然就会导致Windowns粉出现悲催的混乱事件。Windowns系统下还可能存在本地字体库不全的问题。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;中文字体库问题。除了系统阵营的锅，中文字体本身也会给编码世界带来混乱。其实不单是中文字体，CJK字体库就是专门为了解救中文-日文-韩文字体等东亚语言字体问题的。另外就是，字体库有“真体”（TrueType Collection 字体文件 (.ttc)）等字体版本。因此，latex包&lt;code&gt;\usepackage{xeCJK}&lt;/code&gt;渲染时，可能会提示错误（&lt;a href=&#34;https://github.com/CTeX-org/ctex-kit/issues/316&#34;&gt;类似报告1&lt;/a&gt;；&lt;a href=&#34;https://blog.csdn.net/RobertChenGuangzhi/article/details/48979285&#34;&gt;报告2&lt;/a&gt;）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;engine或dev问题。第三个锅就是软件的问题了。其一，bookdown下默认的Latex引擎&lt;code&gt;pdflatex&lt;/code&gt;对&lt;strong&gt;Unicode characters&lt;/strong&gt;支持不好，需要改用&lt;code&gt;xelatex&lt;/code&gt;引擎（&lt;a href=&#34;https://github.com/yihui/tinytex/issues/35&#34;&gt;yihuixie留爪&lt;/a&gt;）。其二，绘图装置dev也有小九九&lt;a href=&#34;https://github.com/rstudio/rmarkdown/issues/213&#34;&gt;类似报告&lt;/a&gt;。最关键的是绘图装置可以自己根据需要设定，包括：dev=‘cairo_pdf’；dev=‘pdf’；dev=‘svg’（见&lt;a href=&#34;https://github.com/rstudio/rmarkdown/issues/111&#34;&gt;友情提示&lt;/a&gt;）。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;解决办法&lt;/h2&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;（windowns系统）安装缺少的字体库。大概就先去看看“c:/windows/fonts”目录吧！。也可以在R中用package如 &lt;code&gt;&#34;showtext&#34;&lt;/code&gt;来安装。——不说这个了，都是泪。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;latex中设定header.tex的包调用。最重要的&lt;code&gt;\usepackage{xeCJK}&lt;/code&gt;，大抵如下：&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;\usepackage{xeCJK}
%\setCJKmainfont{SimSun}
\setCJKmainfont{宋体}  % 字体可以更换
\setCJKmonofont{simsun.ttc} % for \textsf
\setmainfont{宋体} % 設定英文字型
\setromanfont{Georgia} % 字型
\setmonofont{Courier New}&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Rmarkdown中设定engine和dev。这个地方倒是有一个逻辑性的问题我之前一直没有弄清楚。engine设好后（如前，最好用&lt;code&gt;xelatex&lt;/code&gt;引擎），不同输出形式（pdf、html）对绘图转置dev需求是不一样的，因此需要考虑latex_engine和dev所处的&lt;strong&gt;环境&lt;/strong&gt;。这个&lt;strong&gt;环境&lt;/strong&gt;不一样，控制的范围自然就不同，但大概有三个级别：a. yaml区域的全局性&lt;code&gt;- output&lt;/code&gt;环境； b. R代码块的文档级设置；c.特定R代码块的设置。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;环境1：yaml区域的全局性设置
output: 
  bookdown::pdf_document2:
    latex_engine: xelatex
    dev: cairo_pdf
    &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;环境2：R代码块的文档级设置
{r global_options,echo=FALSE, message=FALSE}
knitr::opts_chunk$set(fig.align=&amp;#39;center&amp;#39;, dev=&amp;quot;cairo_pdf&amp;quot;,
                      echo=FALSE, fig.pos = &amp;#39;H&amp;#39;) #
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;环境3：特定绘图R代码块环境
{r common-get-sum,echo=FALSE, dev=&amp;quot;cairo_pdf&amp;quot;, message=FALSE,error=FALSE,warning=F, fig.width=10,fig.height=7,fig.cap=&amp;quot;学生累计获得通识课程学分情况&amp;quot;}

ggplot() +
  theme(text=element_text(family=&amp;quot;Batang&amp;quot;, size=12))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;总结起来，最后的问题解决就是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;更改pdf&lt;strong&gt;全局性环境&lt;/strong&gt;的引擎为latex_engine: xelatex。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;更改pdf&lt;strong&gt;全局性环境&lt;/strong&gt;里绘图装置为：dev: cairo_pdf。设好后就不要画蛇添足再在环境2或环境3中做额外配置了。因为控制范围是不一样的！html输出默认绘图转置为dev: cairo_pdf&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为字体库问题，还得在绘图R代码块里指定一个能够显示的字体。如&lt;code&gt;theme(text=element_text(family=&#34;Batang&#34;, size=12))&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后，html和pdf显示都一致啦！！&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>bookdown下Latex pdf格式输出技巧清单</title>
      <link>https://huhuaping.netlify.app/2019/04/11/notes-in-latex-output-format-for-bookdown-books/</link>
      <pubDate>Thu, 11 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/04/11/notes-in-latex-output-format-for-bookdown-books/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#section&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 配置及相关设置&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#yaml&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1.1&lt;/span&gt; yaml信息的设置&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#htmllatex&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 表格的HTML和LaTeX“和谐共存”&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#bookdown&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; 注意bookdown的渲染方式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-1&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; 环境参数的全局性影响&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-2&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3&lt;/span&gt; 表格中插入有图片&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#latexlongtable&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3.1&lt;/span&gt; latex宏包longtable的使用&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-3&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.4&lt;/span&gt; 表格中字符格式（如加粗）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-4&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.5&lt;/span&gt; 表格中显示数学公式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#block&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; block的使用&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#block-1&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; 定理和证明block&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#blocks&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; 个性化blocks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-5&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.3&lt;/span&gt; 注意事项&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#latex&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; Latex输出各种“梗”&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#fig.cap&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; fig.cap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#latex-list&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; latex list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-6&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; 段落首行缩进&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-7&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4&lt;/span&gt; 页边距调整&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-8&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.5&lt;/span&gt; 正确设置章序号&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-9&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.6&lt;/span&gt; 正确处理页码序号&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-10&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; 诡异现象&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#section-11&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; 编译报错但删除临时文件又好了&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#blogdownhugo-academic&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; blogdown相关话题（hugo academic）&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#section-12&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.1&lt;/span&gt; 通过静态页面的使用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section-13&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2&lt;/span&gt; 直接引用本地数据和图片文件&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;bookdown编写LaTex书籍中的注意事项。&lt;/p&gt;
&lt;div id=&#34;section&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 配置及相关设置&lt;/h1&gt;
&lt;div id=&#34;yaml&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;1.1&lt;/span&gt; yaml信息的设置&lt;/h2&gt;
&lt;p&gt;只有index.Rmd具有设置yaml信息的地位！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;index.Rmd: This is the only Rmd document to contain a YAML frontmatter as described within Chapter 2, and is the first book chapter.
—&lt;a href=&#34;https://bookdown.org/yihui/rmarkdown/bookdown-project.html&#34;&gt;R Markdown: The Definitive Guide&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;htmllatex&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 表格的HTML和LaTeX“和谐共存”&lt;/h1&gt;
&lt;div id=&#34;bookdown&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; 注意bookdown的渲染方式&lt;/h2&gt;
&lt;p&gt;表格排版还是需要kable和kableExtra的结合。kableExtra的latex参数请参看Zhuhao的&lt;a href=&#34;https://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf&#34;&gt;awesome_table_in_pdf&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;zhuhao提到了kableExtra如何实现&lt;a href=&#34;https://haozhu233.github.io/kableExtra/bookdown/cross-format-tables-in-bookdown.html&#34;&gt;多形式输出的办法&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首先要采用“M-K”的图书渲染方式，也即先合并（merge）再编译（knit）。具体的实现是在文件&lt;code&gt;_bookdown.yml&lt;/code&gt;设置&lt;code&gt;new_session: true&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# Example _bookdown.yml
book_filename: &amp;quot;bookdown_example&amp;quot;
delete_merged_file: true
new_session: true
language:
  ui:
    chapter_name: &amp;quot;Chapter &amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;采用“M-K”图书渲染方式后，图书每一章的&lt;code&gt;.Rmd&lt;/code&gt;文件在代码运行时都会强制使用&lt;code&gt;new session&lt;/code&gt;，也即意味着各章的&lt;code&gt;packages&lt;/code&gt;和&lt;code&gt;data&lt;/code&gt;都相互独立。所以每一章的&lt;code&gt;.Rmd&lt;/code&gt;文件最开始，需要分别设置&lt;code&gt;options&lt;/code&gt;及加载&lt;code&gt;packages&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; 环境参数的全局性影响&lt;/h2&gt;
&lt;p&gt;需要注意的是&lt;strong&gt;环境参数&lt;/strong&gt;设置的变化。一种情形是，在Rstudio中点击knitr（或biuld），都会自动识别&lt;code&gt;knitr.table.format =&lt;/code&gt;是latex环境还是html环境。另一种情形就是在console中手动运行比如&lt;code&gt;render_&lt;/code&gt;或&lt;code&gt;preview_chapter()&lt;/code&gt;，这时就需要手动写入执行环境是latex或hetml。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;自动配置情形下，可以全局设置&lt;code&gt;options(knitr.table.format = &#34;latex&#34;)&lt;/code&gt;。如果不想自动配置，则可以禁用它&lt;code&gt;options(kableExtra.auto_format = FALSE)&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;手动配置情形下，则需要在code chunk里对&lt;code&gt;kable()&lt;/code&gt;函数设定&lt;code&gt;format=&#34;latex&#34;&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;函数&lt;code&gt;kable()&lt;/code&gt;处理的数据类型应该是dataframe（或tibble）。不然&lt;code&gt;booktab=T&lt;/code&gt;或&lt;code&gt;kable_styling(latex_options = c(&#34;striped&#34;))&lt;/code&gt;将会不起作用。请参看在线问答&lt;a href=&#34;https://stackoverflow.com/questions/50340653/r-markdown-kableextra-latex-table-booktabs-not-working&#34;&gt;R markdown KableExtra latex table booktabs not working&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;调用latex包的先后顺序很有影响。例如涉及到颜色的使用，可能出现报错&lt;code&gt;Option clash for package xcolor&lt;/code&gt;。这个时候latex包的先后顺序会带来各种问题。参看在线问答&lt;a href=&#34;https://tex.stackexchange.com/questions/83101/option-clash-for-package-xcolor&#34;&gt;Option clash for package xcolor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;(&lt;a href=&#34;https://stackoverflow.com/questions/16507191/automatically-adjust-latex-table-width-to-fit-pdf-using-knitr-and-rstudio&#34; class=&#34;uri&#34;&gt;https://stackoverflow.com/questions/16507191/automatically-adjust-latex-table-width-to-fit-pdf-using-knitr-and-rstudio&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-2&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3&lt;/span&gt; 表格中插入有图片&lt;/h2&gt;
&lt;p&gt;有时候我们会独立地展示图片（.png之类），有时候我们还希望在表格中展示图片（.png之类）或图标（icon之类）。&lt;/p&gt;
&lt;p&gt;如下&lt;strong&gt;R代码块&lt;/strong&gt;（R code chunk）情况下，是可以正确输出html，但是却无法正确输出Latex：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;动图是不行的。&lt;code&gt;knitr::include_graphics(&#39;local.gif&#39;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在线图片是不行的。&lt;code&gt;knitr::include_graphics(&#39;https://commonmark.org/images/markdown-mark.png&#39;)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此外，在kable环境下，data.frame中出现如下value，也是可以正确输出html，但是却无法正确输出Latex：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Rmarkdown语言，&lt;code&gt;![](picture/object/Alpha,png)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;HTML语言，&lt;code&gt;&amp;lt;image source=&#34;picture/object/Alpha,png&#34;&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;yihuixie指出了这种&lt;strong&gt;混合表格&lt;/strong&gt;是&lt;a href=&#34;https://stackoverflow.com/questions/25106481/add-an-image-to-a-table-like-output-in-r&#34;&gt;不能兼得两种输出&lt;/a&gt;，同时也为latex输出指明了出路——使用&lt;code&gt;//includgraphics&lt;/code&gt;。然而此&lt;code&gt;//includgraphics&lt;/code&gt;并非彼&lt;code&gt;include_graphics()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;错误的&lt;code&gt;include_graphics()&lt;/code&gt;。我开始一直认为是使用R code chunk下的&lt;code&gt;include_graphics()&lt;/code&gt;函数。当然是无功而返，无论怎么做都无法实现正确的latex输出。&lt;/p&gt;
&lt;p&gt;正确的&lt;code&gt;//includgraphics&lt;/code&gt;。进一步googlew问答&lt;a href=&#34;https://stackoverflow.com/questions/28032846/add-and-resize-a-local-image-to-a-rmd-file-in-rstudio-that-will-produce-a-pdf&#34;&gt;add and resize a local image to a .Rmd file in RStudio that will produce a pdf&lt;/a&gt;，终于明白了其中玄机。原来yihuixie所说的&lt;code&gt;//includgraphics&lt;/code&gt;是一种&lt;strong&gt;原生的latex语法&lt;/strong&gt;。——略加调整，问题果真迎刃而解！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;使用latex语法正确处理data.frame的单元格value（此处为字符串）：&lt;code&gt;&#34;\\includegraphics{picture/object/Alpha.png}&#34;&lt;/code&gt;。如果需要调整图片属性（如大小），则可以处理data.frame的单元格value为：&lt;code&gt;&#34;\\includegraphics[width=0.9\linewidth]{picture/object/Alpha.png}&#34;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设置kable参数：&lt;code&gt;kable(dat, escape = FALSE,booktab=T)&lt;/code&gt;。（假定环境配置为自动判别latex还是html输出，此处为latex输出）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;if函数上场，实现latex和html并行输出。根据输出格式（output）来设定data.frame的value值。而且再knitr1.18版本开始，可以直接使用两个函数来自动判明输出格式：&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;knitr::is_html_output()

knitr::is_latex_output()&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;latexlongtable&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3.1&lt;/span&gt; latex宏包longtable的使用&lt;/h3&gt;
&lt;p&gt;如果latex表格很长，一般需要调用&lt;code&gt;longtable&lt;/code&gt;参数，但是kableExtra()函数下自动缩放大小&lt;code&gt;latex_options = c( &#34;scale_down&#34;)&lt;/code&gt;就会失效。并提示：&lt;code&gt;Longtable cannot be resized&lt;/code&gt;。但是可以利用kableextra的函数&lt;code&gt;column_sep()&lt;/code&gt;来设定各列的宽度。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;kable_styling(full_width = F,
  latex_options = c( &amp;quot;scale_down&amp;quot;,&amp;quot;striped&amp;quot;)) %&amp;gt;%
  column_spec(5, width = &amp;quot;15em&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;表格中显示图标（icon）。则可以参看&lt;a href=&#34;https://stackoverflow.com/questions/53549662/how-can-i-add-a-fontawesome-icon-to-a-table-in-rmarkdown&#34;&gt;add a fontawesome icon to a table in Rmarkdown&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;section-3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.4&lt;/span&gt; 表格中字符格式（如加粗）&lt;/h2&gt;
&lt;p&gt;建议尽量对整个单元格进行latex参数操作。&lt;/p&gt;
&lt;p&gt;单元格部分字符加粗，则必须使用&lt;a href=&#34;http://edpflager.com/2018/09/28/font-formatting-coloring-and-emphasis/&#34;&gt;latex语法&lt;/a&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dat &amp;lt;- data.frame(
  country = c(&amp;#39;Canada&amp;#39;, &amp;#39;United Kindom&amp;#39;),
  abbr = c(&amp;quot;Alpha&amp;quot;,&amp;quot;Coef&amp;quot;),
  var1 = c(1, 2),
  var2 = rnorm(2),
  var3 =c(&amp;quot;\\textbf{加粗}&amp;quot;,&amp;quot;*斜体*&amp;quot;)
)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-4&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.5&lt;/span&gt; 表格中显示数学公式&lt;/h2&gt;
&lt;p&gt;kable如何显示数学公式。&lt;/p&gt;
&lt;p&gt;数学公式可以参看在线问答&lt;a href=&#34;https://stackoverflow.com/questions/42598821/r-bookdown-math-in-table-header-not-working&#34;&gt;math in table-header not working&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;block&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; block的使用&lt;/h1&gt;
&lt;div id=&#34;block-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; 定理和证明block&lt;/h2&gt;
&lt;p&gt;Bookdown说明书&lt;a href=&#34;https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#theorems&#34;&gt;2.2.2 Theorems and proofs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;定理环境（theorem environment）下的block类型有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;theorem&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;lemma&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;corollary&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;proposition&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;conjecture&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;definition&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;example&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;exercise&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;证明环境（proof environments）下目前支持的block类型包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;proof&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;remark&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;solution&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;blocks&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; 个性化blocks&lt;/h2&gt;
&lt;p&gt;Bookdown说明书里指出了个性化blocks&lt;a href=&#34;https://bookdown.org/yihui/bookdown/custom-blocks.html&#34;&gt;2.7 Custom blocks&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果是html输出，则需要去设置。bookdown内置的block类型包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;rmdcomment&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;rmdlist&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;rmdnotes&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也可以参考yihuixie的案例&lt;a href=&#34;https://github.com/rstudio/bookdown/blob/master/inst/examples/css/style.css&#34;&gt;CSS&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-5&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.3&lt;/span&gt; 注意事项&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;注意block参数的设置&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;\BeginKnitrBlock{theorem}\iffalse{-91-39640-26031-45-39532-23572-21487-22827-23450-29702-40-71-97-117-115-115-45-77-97-114-107-111-118-32-84-104-101-111-114-101-109-41-93-}\fi{}&amp;lt;div class=&amp;quot;theorem&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;theorem&amp;quot; id=&amp;quot;thm:BLUE&amp;quot;&amp;gt;&amp;lt;strong&amp;gt;(\#thm:BLUE)  \iffalse (高斯-马尔可夫定理(Gauss-Markov Theorem)) \fi{} &amp;lt;/strong&amp;gt;&amp;lt;/span&amp;gt;在正态经典线性回归模型假设（N-CLRM）下，采用普通最小二乘法（OLS），得到的估计量$\hat{\beta}$，是真实参数$\beta$最优的、线性的、无偏估计量（BLUE）。记为：
\xrightarrow[\text{N-CLRM}]{\text{OLS}}\hat{\beta} \xrightarrow[\text{}]{\text{BLUE}} \beta&amp;lt;/div&amp;gt;\EndKnitrBlock{theorem}&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;所有类型的block都需要给出&lt;code&gt;echo=TRUE&lt;/code&gt;的参数设置才能正常显示&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;html输出和latex输出的block类型支持是不一样的，前者应该更多&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;latex&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; Latex输出各种“梗”&lt;/h1&gt;
&lt;div id=&#34;fig.cap&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; fig.cap&lt;/h2&gt;
&lt;p&gt;不要在R code chunk的options中出现特殊字符。比如：&lt;code&gt;fig.cap=&lt;/code&gt;中出现了特殊符号&lt;code&gt;&amp;amp;&lt;/code&gt;，则会报错。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fig.cap=&amp;quot;绘制Line &amp;amp; Symbol图&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;图题中的数学公式符号，使用货币符号表达是需要注意LaTeX的规范写法（特定命令符需要加双斜杠&lt;code&gt;\\alpha&lt;/code&gt;）。例如：&lt;code&gt;fig.cap=&#34;判定系数$R^2$和调整判定系数$\bar{R}^2$&#34;&lt;/code&gt;，则LaTex会报错&lt;code&gt;! Text line contains an invalid character.&lt;/code&gt;。正确的写法应该是（&lt;a href=&#34;https://stackoverflow.com/questions/52211695/how-to-add-a-latex-symbol-to-fig-cap-in-r-markdown&#34;&gt;参看解决方案&lt;/a&gt;）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fig.cap=&amp;quot;判定系数$R^2$和调整判定系数$\\bar{R}^2$&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;latex-list&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; latex list&lt;/h2&gt;
&lt;p&gt;正文内容中列表（list）层级太多，则会报错：&lt;code&gt;LaTeX Error: Too deeply nested.&lt;/code&gt;。如果非要那么多层级，就需要加载LaTex的&lt;code&gt;enumitem package&lt;/code&gt;（让tinytex自动加载去吧），并在preamble.tex中调用它（&lt;a href=&#34;https://github.com/jgm/pandoc/issues/2922&#34;&gt;参看在线文达jgm的 解决方案&lt;/a&gt;）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;\usepackage{enumitem}
   \setlistdepth{9}

   \setlist[itemize,1]{label=$\bullet$}
   \setlist[itemize,2]{label=$\bullet$}
   \setlist[itemize,3]{label=$\bullet$}
   \setlist[itemize,4]{label=$\bullet$}
   \setlist[itemize,5]{label=$\bullet$}
   \setlist[itemize,6]{label=$\bullet$}
   \setlist[itemize,7]{label=$\bullet$}
   \setlist[itemize,8]{label=$\bullet$}
   \setlist[itemize,9]{label=$\bullet$}
   \renewlist{itemize}{itemize}{9}

   \setlist[enumerate,1]{label=$\arabic*.$}
   \setlist[enumerate,2]{label=$\alph*.$}
   \setlist[enumerate,3]{label=$\roman*.$}
   \setlist[enumerate,4]{label=$\arabic*.$}
   \setlist[enumerate,5]{label=$\alpha*$}
   \setlist[enumerate,6]{label=$\roman*.$}
   \setlist[enumerate,7]{label=$\arabic*.$}
   \setlist[enumerate,8]{label=$\alph*.$}
   \setlist[enumerate,9]{label=$\roman*.$}
   \renewlist{enumerate}{enumerate}{9}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-6&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; 段落首行缩进&lt;/h2&gt;
&lt;p&gt;段落首行缩进。在&lt;code&gt;preamble.tex&lt;/code&gt;中条用如下包[解决方案(&lt;a href=&#34;https://stackoverflow.com/questions/29460112/first-line-paragraph-indenting-in-pdfs-using-r-markdown&#34; class=&#34;uri&#34;&gt;https://stackoverflow.com/questions/29460112/first-line-paragraph-indenting-in-pdfs-using-r-markdown&lt;/a&gt;)]&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% first-line paragraph indenting
\usepackage{indentfirst}
\setlength\parindent{24pt}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-7&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4&lt;/span&gt; 页边距调整&lt;/h2&gt;
&lt;p&gt;页边距调整。需要在&lt;code&gt;output.yaml&lt;/code&gt;文件中进行设置（&lt;a href=&#34;https://stackoverflow.com/questions/13515893/set-margin-size-when-converting-from-markdown-to-pdf-with-pandoc&#34;&gt;参看解决方案&lt;/a&gt;）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;geometry: [a4paper, tmargin=2.5cm, bmargin=2.5cm, lmargin=2.5cm, rmargin=2.5cm]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-8&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.5&lt;/span&gt; 正确设置章序号&lt;/h2&gt;
&lt;p&gt;正确设置章序号。如果修改了&lt;code&gt;documentclass:&lt;/code&gt;，那么就需要告诉Pandoc你是按chapter来编码的，而不是section（默认）。在&lt;code&gt;output.yaml&lt;/code&gt;文件下设置&lt;code&gt;pandoc_args: --top-level-division=chapter&lt;/code&gt;。（&lt;a href=&#34;https://community.rstudio.com/t/chapter-starts-with-0-1-not-1-0-in-pdf-book-format/12797/4&#34;&gt;参看解决方案&lt;/a&gt;）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;documentclass: ctexbook

bookdown::pdf_book:
  includes:
    in_header: latex/preamble.tex
    before_body: latex/before_body.tex
    after_body: latex/after_body.tex
  keep_tex: yes
  dev: &amp;quot;cairo_pdf&amp;quot;
  latex_engine: xelatex
  citation_package: natbib
  template: latex/template.tex
  pandoc_args: &amp;quot;--top-level-division=chapter&amp;quot;
  toc_depth: 4
  toc_unnumbered: no
  toc_appendix: yes
  quote_footer: [&amp;quot;\\begin{flushright}&amp;quot;, &amp;quot;\\end{flushright}&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-9&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.6&lt;/span&gt; 正确处理页码序号&lt;/h2&gt;
&lt;p&gt;正确处理页码序号。其实&lt;a href=&#34;https://bookdown.org/yihui/bookdown/publishers.html&#34;&gt;bookdown电子书 6.3 Publishers&lt;/a&gt;专门提到了这一点，只是我一直没有细看。另外也可以参看在线问答&lt;a href=&#34;https://stackoverflow.com/questions/43711029/page-numbering-in-r-bookdown&#34;&gt;Page Numbering in R Bookdown&lt;/a&gt;。 总体意思就是要让Pandoc知道哪些部分属于&lt;code&gt;\frontmatter&lt;/code&gt;,&lt;code&gt;\mainmatter&lt;/code&gt;,&lt;code&gt;\backmatter&lt;/code&gt;。所以需要做如下几件事情：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在preamble.tex文件下加入代码行&lt;code&gt;\frontmatter&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;在before_body.tex文件下加入代码行&lt;code&gt;\frontmatter&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;在（序言）&lt;code&gt;index.Rmd&lt;/code&gt;文件第一行加入代码行&lt;code&gt;\frontmatter&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;在（第一章）&lt;code&gt;01-introduction.Rmd&lt;/code&gt;文件第一行加入代码行&lt;code&gt;\mainmatter&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;在after_body.tex文件下加入代码行&lt;code&gt;\backmatter&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;总之，这些&lt;strong&gt;标记代码&lt;/strong&gt;可以插入到相应的章节，合适的位置。跟word的分节符很像。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;section-10&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; 诡异现象&lt;/h1&gt;
&lt;div id=&#34;section-11&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; 编译报错但删除临时文件又好了&lt;/h2&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Latex错误提示：&lt;code&gt;! File ended while scanning use of \@writefile.&lt;/code&gt;。突然之间，Latex无法编译，反复查看yaml代码，感觉都没有问题，大半个下午解决不了（包括更新bookdown和Rstudio；多次重启。）。google搜索，最后采用了&lt;a href=&#34;https://tex.stackexchange.com/questions/471345/error-file-ended-while-scanning-use-of-writefile&#34;&gt;David Carlisle的建议&lt;/a&gt;，把&lt;code&gt;.aux&lt;/code&gt;等日志文件删除，重新Latex编译，最后消除了不能编译的错误。——最终还是没有明白原因。&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;blogdownhugo-academic&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; blogdown相关话题（hugo academic）&lt;/h1&gt;
&lt;div id=&#34;section-12&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.1&lt;/span&gt; 通过静态页面的使用&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;section-13&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2&lt;/span&gt; 直接引用本地数据和图片文件&lt;/h2&gt;
&lt;p&gt;既然blogdown下就能直接编写.Rmd文件，那就可以直接在里面进行数据分析、可视化等操作。问题的关键是如何引用本地数据（“data/”目录下）和图片文件（“pic/”目录下）。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blogdown-demo.rbind.io/2018/02/27/r-file-paths/&#34;&gt;Adding and reading local data files in R Markdown posts&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>一份给R新手的学习指南</title>
      <link>https://huhuaping.netlify.app/2019/04/03/r-learning-reference-for-newcomers/</link>
      <pubDate>Wed, 03 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/04/03/r-learning-reference-for-newcomers/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#rrstudio&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 安装R软件和第三方编译软件Rstudio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#r&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 用R进行编程统计分析&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#r-1&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 用R进行绘图（图形可视化）：&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#r-2&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 用R来写文章&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#project&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; project版本控制和团队协作&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#section&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; 几点忠告&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;R语言及Rmarkdown语言快速上手参考资料。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;说明&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;本文档中提到的图书pdf文件可以通过百度云下载（&lt;a href=&#34;https://pan.baidu.com/s/1ZRuVSf2Jv_u3C_XmAUingA&#34;&gt;下载地址&lt;/a&gt;：&lt;code&gt;https://pan.baidu.com/s/1ZRuVSf2Jv_u3C_XmAUingA&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;下载地址永久有效！如有问题请反馈&lt;code&gt;wsad2008@gmail.com&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;材料仅供学习交流使用，请尊重原作者的版权！祝大家开心学习，学有所成！&lt;/p&gt;
&lt;div id=&#34;rrstudio&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 安装R软件和第三方编译软件Rstudio&lt;/h1&gt;
&lt;p&gt;（开源软件，免费公开，自行安装）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;R CRAN&lt;/code&gt;主站下载安装R程序(根据自己的电脑操作系统选择)。&lt;a href=&#34;https://cran.r-project.org/&#34;&gt;网址&lt;code&gt;https://cran.r-project.org/&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Rstudio&lt;/code&gt;主站下载安装Rstudio软件。&lt;a href=&#34;https://www.rstudio.com/&#34;&gt;网址&lt;code&gt;https://www.rstudio.com/&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 用R进行编程统计分析&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Adler, J. R in a Nutshell (2ed) [M], Reilly, 2012.这是R语言学习的红宝书之一，手中常备，随时翻阅。建议要通览一遍，并对照实例运行代码。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Crawley, M. J. The R Book (2nd) [M], Wiley, 2013. 这是R语言学习的红宝书之二。两本红宝书写作风格不同，自己挑一本就行。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wickham, H. and G. Grolemund. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data [M], O’Reilly Media, 2017. 这是Hadley大神的一大力作。这是进入R语言统计功力快速升级的超级秘笈！它让你能很快找到指哪打哪的酣畅淋漓！你会因为它更加热爱R！建议在红宝书之后务必要好好学习这本秘籍！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hadley, W. Advanced R [M], CRC Press, 2015.（高级进阶学习，更深入地认识R语言的基本奥义。建议后续学习。简单说，要成为R高手，就应该参透R语言的内部逻辑和底层架构！）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;r-1&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 用R进行绘图（图形可视化）：&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Hadley, W. ggplot2: Elegant Graphics for Data Analysis [M], Springer, 2016. 没错，这又是Hadley大神出品。R可视化绘图ggplot2的创造者。说实话，他的文笔简练精准，毫不拖泥带水。真的把ggplot2绘图思想说得一清二楚！让你的R可视化技能瞬间提升N级。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;r-2&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 用R来写文章&lt;/h1&gt;
&lt;p&gt;Rmarkdown语言与谢益辉大神：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;关注一个&lt;a href=&#34;https://bookdown.org/&#34;&gt;bookdown网站https://bookdown.org/&lt;/a&gt;。里面都是用Rmarkdown写的书，免费下载，书籍内容作者还会不断更新！改变了出版行业！下面几本书都可以在线阅读和下载！！（神奇吧！）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xie, Y. Dynamic Documents with R and knitr [M], Chapman &amp;amp; Hall/CRC, 2015. 谢大神的一本书，基本让你明白为什么可以抛弃word、ppt……&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xie, Y. bookdown: Authoring Books and Technical Documents with R Markdown [M], Chapman &amp;amp; Hall _ CRC 2016. 谢大神的又一本书，他开发的bookdown包，让你真正的可以抛弃word、ppt……&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;yihui, X. R Markdown: The Definitive Guide [M]2018. 谢大神的新作，你可以完全掌握Rmarkdown了。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;project&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; project版本控制和团队协作&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;版本控制系统&lt;/strong&gt;：&lt;a href=&#34;https://git-scm.com/book/zh/v2&#34;&gt;git知识学习&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;什么是“版本控制”？我为什么要关心它呢？ 版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;我们对保存着软件源代码的文件作版本控制，但实际上，你可以对任何类型的文件进行版本控制。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;代码托管和协作&lt;/strong&gt;：&lt;a href=&#34;https://pages.github.com/&#34;&gt;github网站&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;注册github账号（请用你们西农邮箱注册，高校邮箱github有惊喜）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装github桌面软件（如果熟练掌握了git命令操作，这一步骤可以跳过）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;后github就是我们的交流平台了——你们可以管理文件、托管R代码和版本控制,并进行协作。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;section&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; 几点忠告&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;人在江湖走，该有的技能还得练到手！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;技术手段是不断发展变化的，要有拥抱未来的情怀！R或Rmarkdown也只是选择之一，不是唯一。够你用和适合你就行！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;坚持并常用，才是熟练掌握一门语言的根本所在！R和Rmarkdown，就跟你学英语一样。相信我，半年不学不用，你的英语也就忘得差不多了！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不要看翻译成中文的图书或“教程”！编程语言都是英语的世界！你坚持用英语，顶住了最开始的吃力、费解和艰难，后面必然就是你得胜凯旋的荣光时刻！&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>计量经济学的那点调性和套路</title>
      <link>https://huhuaping.netlify.app/2019/03/10/chating-and-teaching-in-econometrics-manner/</link>
      <pubDate>Sun, 10 Mar 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/03/10/chating-and-teaching-in-econometrics-manner/</guid>
      <description>


&lt;p&gt;计量经济学的聊天方式和说教腔调。&lt;/p&gt;
&lt;p&gt;在计量经济学课堂上，如果开始有一个又一个的学生不断向老师发起各种提问，这似乎是一个好的预示——至少有那么一些学生已经开始对某些“枯燥乏味”的话题开始自己的思考。但是，也不要高兴太早。因为后面的来回反馈和互动，可能更加让人焦头烂额。情形就好比如，菜市场热闹早市下熙熙攘攘吵闹讨价的买家和卖主，各自吆喝一番，然后各得其所，好像都赚了。&lt;/p&gt;
&lt;p&gt;计量经济学学习中有很多坑，不一一失足踏过，就千万不敢妄称深谙其道、门儿清。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;外文原著的中文翻译版不可读，或者起码要少读少碰。一是翻译错误多（多半是态度和责任心问题）；或者译词怪异（各种创造，也不能说是谬误，就是觉得奇怪，比如&lt;code&gt;time constant variable&lt;/code&gt;译成&lt;code&gt;时常变量&lt;/code&gt;看起来“很妥帖”啊；又比如&lt;code&gt;innovation&lt;/code&gt;译成&lt;code&gt;新息&lt;/code&gt;也有相同后遗症），或者一词多译（还往往出现在同一译本下）；或者前后颠倒语句生涩（大多是生硬套译，中文里美妙的“意译”技巧好像完全施展不出来。ps:怀念一下傅雷翻译罗曼罗兰的《约翰克里斯多夫》，不过人家操刀上架的可是&lt;strong&gt;文学&lt;/strong&gt;作品）。如此种种，能耐心看完的也算得上是忍性极好之人。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;计量经济学独特的语言体系。计量经济学充满了各类符号、记号、公式等，初接触它无异于观地外文明、听梦魇呓语。总体上看，计量经济学好似有其独特的&lt;strong&gt;语言体系&lt;/strong&gt;。这套语言体系，主体应该以&lt;strong&gt;数学语言&lt;/strong&gt;为其蓝本，但是又大量加入了各种神秘万千的&lt;strong&gt;假设（Assumptions）&lt;/strong&gt;，远不如&lt;strong&gt;数学语言&lt;/strong&gt;那么严格优美。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;场景变幻和剧情线条很重要。模型千万个，理论各有理。同一个符号出现在A场景里，可能在B场景里就完全变了另一个含义。比如总体回归模型（PRM）&lt;span class=&#34;math inline&#34;&gt;\(Y_i = \beta_1 +\beta_2X_i +u_i\)&lt;/span&gt;和样本回归模型（SRM）&lt;span class=&#34;math inline&#34;&gt;\(Y_i = \hat{\beta}_1 + \hat{\beta}_2X_i +e_i\)&lt;/span&gt;，两个场景下&lt;span class=&#34;math inline&#34;&gt;\(Y_i\)&lt;/span&gt;的含义完全不同（前者是总体&lt;span class=&#34;math inline&#34;&gt;\(Y_i\)&lt;/span&gt;，后者是样本&lt;span class=&#34;math inline&#34;&gt;\(Y_i\)&lt;/span&gt;，一般前者要包含后者的）。另外就是要考虑讲故事的剧情。同样是表达方差，总体方差要记成&lt;span class=&#34;math inline&#34;&gt;\(\sigma^2_{\hat{\beta}_2}=\frac{\sigma^2}{\sum{x_i^2}}\)&lt;/span&gt;，样本方差就要记成&lt;span class=&#34;math inline&#34;&gt;\(S^2_{\hat{\beta}_2}=\frac{\hat{\sigma}^2}{\sum{x_i^2}}\)&lt;/span&gt;，而&lt;span class=&#34;math inline&#34;&gt;\(\hat{\sigma}^2\)&lt;/span&gt;又是PRM中随机干扰项&lt;span class=&#34;math inline&#34;&gt;\(u_i\)&lt;/span&gt;的方差的&lt;strong&gt;无偏估计量&lt;/strong&gt;，如此这番，这个剧情和故事线的深度简直堪比HBO神剧的编剧设定，让你欲罢不能，脑细胞非要死一大片不罢休。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;统计软件上手操作，那是真的“伤痛”。&lt;code&gt;EViews&lt;/code&gt;、&lt;code&gt;SPSS&lt;/code&gt;之类的软件，菜单驱动的做法本质上就是给初学者完美定制了一个个“宠坏孩子”的“工具黑箱”！使用这些方便的套件久了，真的会禁锢人的思维，麻痹人类的神经。事实上，你会发现书本上的理论和假设，跟你的实际分析案例总是那么格格不入。削足适履也好，生搬硬套也好，总觉得那那难受。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面说一点“建设性”的意见：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;计量经济学原著走起吧，少年！这个舶来品，还是原汁原味的读起来更顺畅。它不能像文学作品那样，意译可以活灵活现，能植入到本土文化中并让你感同身受。它更多的是科学作品，追求严格和准确，因此直译你会水土不服（产生文化排斥），意译你会不知所云（丢失太多信息）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;熟悉“主流话语”，忘掉哪些非主流的“方言”吧。计量大咖们（已经被封神）的经典传世之作一定要好好拜读（&lt;code&gt;Wooldridge&lt;/code&gt;、&lt;code&gt;Green&lt;/code&gt;之类的），它们的“语言符号”大多经过精巧打磨，形成了、影响着、并决定着“主流话语”（官方语言）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;理论与实践，各露一手。熟悉一门编程统计语言（&lt;code&gt;R语言&lt;/code&gt;,&lt;code&gt;Python&lt;/code&gt;,&lt;code&gt;Stata&lt;/code&gt;等等皆可，最好精通一门），有备无患，上能通天会仙，下能镇妖除魔。理论和实践要兼顾，相得益彰。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面以&lt;strong&gt;面板数据&lt;/strong&gt;（panel data analysis）的相关学习为例：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;理论&lt;/strong&gt;方面的书籍主要可以看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Wooldridge, J. M. Introductory econometrics. A modern approach(6th) [M], Cengage Learning, 2016. 关于面板的内容，精简了很多。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wooldridge, J. M. Econometric Analysis of Cross Section and Panel Data 2ed [M], MIT press, 2010. 当然是经典了，但是阅读难度较大（矩阵知识和技巧）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Baltagi, B. H. Econometric analysis of panel data (5th) [M]. Chichester (West Sussex), John Wiley &amp;amp; Sons, Inc., 2013.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Erik, B. Econometrics of panel data : methods and applications [M], Oxford University Press, 2017. 作者基于40年相关教学经验，编写了这本书。作者也深切感受到矩阵知识的学习难度，尝试用尽量简单的向量符号来表达其中的精华。（可惜的是，我觉得这种勇敢的尝试并没有达到其目的。或者换句话，矩阵语言的优势是难以替代的。）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;I have experienced that many students starting on the topic feel parts of the matrix algebra, especially when written in a dense, compact style, to be an obstacle.
– Erik,2017&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;R应用&lt;/strong&gt;的一些书籍可以看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Croissant, Y. and G. Millo. Panel data econometrics with R [M]. Hoboken, John Wiley &amp;amp; Sons, 2019. 写作套路好像很不一样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;随书配套有R包&lt;code&gt;pder&lt;/code&gt; &lt;a href=&#34;https://cran.r-project.org/web/packages/pder/index.html&#34;&gt;(Croissant &amp;amp; Millo, 2017)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Heiss, F. Using R for introductory econometrics [M], CreateSpace Independent Publishing Platform, 2016. 内容安排与wooldridge比较一致。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.urfie.net/&#34;&gt;图书官网&lt;/a&gt;。里面有html在线版本，所有的数据和R程序代码。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后，给一些资源作为有益的启示吧。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Dave Giles 的个人blog &lt;a href=&#34;https://davegiles.blogspot.com/&#34;&gt;Econometrics Beat: Dave Giles’ Blog&lt;/a&gt;。文如其名，踏出你的节拍击败计量经济学吧！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;互联网世界的互动与交流，看看聊得多透彻多走心！&lt;a href=&#34;https://statmodeling.stat.columbia.edu/2011/12/08/a-short-back-and-forth-on-models-with-unequal-variances-leading-to-my-usual-suggestion-to-check-your-statistical-procedure-by-seeing-how-it-performs-on-fake-data/&#34;&gt;I Am Too Absolutely Heteroskedastic for This Probit Model&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>在blogdown网站中展示Xaringan slide</title>
      <link>https://huhuaping.netlify.app/2019/03/01/post-xaringan-slide-to-website/</link>
      <pubDate>Fri, 01 Mar 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/03/01/post-xaringan-slide-to-website/</guid>
      <description>


&lt;p&gt;如何把Xaringan 演示Slides以静态网页（static webpage）形式载入个人网站。&lt;/p&gt;
&lt;div id=&#34;section&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;主要参考资料和实现办法&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Yihui Xie的&lt;a href=&#34;https://bookdown.org/yihui/blogdown/static-files.html&#34;&gt;blogdown中2.7 Static files&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;带操作过程&lt;a href=&#34;https://timmastny.rbind.io/blog/embed-slides-knitr-blogdown/&#34;&gt;Embed Slides in Your Blog&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;带各种探索尝试的&lt;a href=&#34;https://portfolio.peter-baumgartner.net/2018/07/21/presentations-with-xaringan/&#34;&gt;Xaringan presentations with blogdown&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以上都有比较系统的说明，可以直接参照。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;需求和问题列表&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;静态网页方式损失了效率。&lt;strong&gt;静态网页&lt;/strong&gt;，正如其名，只能相对“固定”地加载封装好的.html文件或.pdf文件之类。显然，交互性和动态性就暂时难以获得。因为我们写作Slide是在另一个repo文件夹下（repo如course-econometrics文件夹下，并使用Xaringan包），然后确认没问题后才能把渲染好的.html形式的Slide文件（一般是如02-simple-reg-basic-slide.html）拷贝到网站repo文件夹指定目录下（repo如netlify，特定目录为&lt;code&gt;\netlify\static\slides-course&lt;/code&gt;）。同时，如果html文件不是完全自容的(self-container)，那你还必须把使用到的图片数据等文件夹也一同拷贝过去（这就非常糟糕了！因为你的slide制作可能会经常变动或更新）。那么要如何自动关联Xaringan（实现slide）和blogdown（实现website）呢？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当然动态性和关联性也是有成本的。如果Xaring里的文件需要渲染很久（比如ggplot作图很多，数据分析很多），那么blogsite会负担比较大。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;知识版权的保护问题。slide上传到website后，文字和图片等都可以任意拷贝下载。对于开源项目，这完全没毛病。但是，对于一些重视原创知识保护的人，这就是很大的“命门”了。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Rmarkdown下自动化编译Latex公式输出</title>
      <link>https://huhuaping.netlify.app/2019/02/28/improve-latex-math-with-rmarkdown-chunk/</link>
      <pubDate>Thu, 28 Feb 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/02/28/improve-latex-math-with-rmarkdown-chunk/</guid>
      <description>


&lt;div id=&#34;section&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;“计量经济学”形式的数学公式&lt;/h1&gt;
&lt;p&gt;本科生课程《计量经济学》会大量使用各类公式。这些公式大概有两类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;理论公式：这些数学公式的呈现基本上用不到数据报告的结果。在Rmarkdown文档中处理办法相对简单，直接使用LaTex形式代码输入即可。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;报告公式：这些数学公式的呈现，跟某些数据分析报告紧密联系。此时，手工输入LaTex将会变得很不现实！一个系统性的解决思路是，利用Rmardown chunk 自己编写代码块。前边分析步骤负责出数据报告结果，后面Chunk里公式创造时直接调用数据报告的各类数值。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以，如果一切顺利，“计量经济学”课程的大量报告公式，都可以自动地使用R函数调用实现，可谓一本万利，合算得很！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;代码实现过程中的各种“梗”&lt;/h1&gt;
&lt;p&gt;实现思路倒是很清晰，Rmarkdown下的操作也是可行的。下面就是需要撸起袖子加油干，找到“聪明”的实现办法，破除各种“梗”！&lt;/p&gt;
&lt;div id=&#34;pdfhtmlword&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;格式选择真是一个大问题：关于pdf、html、word输出形式&lt;/h2&gt;
&lt;p&gt;选择Rmarkdown的一个很重要理由，就是它可以实现一份文档种格式输出。这个“理想”确实比较宏大。在数学公式领域，起码就有这几个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;数学公式友好度差别较大。word比较另类，数学公式支持是最糟糕的；Latex（pdf）下是最灵活的。html则最通用。所以，复杂的公式，在latex（pdf）下OK，放到word里可能就吃不消了。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;package实现各不相同。如果写书，最好就是用bookdown包；如果做演示slide可以用Xaringan包；写网站文章，可以用blogdown。对于数学公式而言，最需要注意是：是否需要交叉引用（cross reference）公式。基本就是两种情形：写slide和blog默认是不交叉应用公式的；写book则必然需要的。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;alignment&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;数学公式的排版（alignment）&lt;/h2&gt;
&lt;p&gt;这个部分折腾我很久。因为主要使用Latex语法形式来编写R chunk代码。所以必须要熟悉Latex math equation的公式环境（environment）。&lt;/p&gt;
&lt;p&gt;独立公式环境：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;\begin{equation} ... \end{equation}&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;\begin{align} ... \end{align}&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;\begin{aligned} ... \end{aligned}&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;\begin{alignedat}{3} ... \end{alignedat}&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;组合公式环境：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(
&amp;quot;\\begin{equation}&amp;quot;,
&amp;quot;\\begin{alignedat}{999}&amp;quot;,
&amp;quot;&amp;amp;\\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \\bar{R^2}=0.9408\\\\&amp;quot;,
      &amp;quot;&amp;amp; &amp;amp;&amp;amp; F^{\\ast}=143.92;&amp;amp;&amp;amp; p=0.0000&amp;quot;,
&amp;quot;\\end{alignedat}&amp;quot;,
&amp;quot;\\end{equation}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} \begin{alignedat}{999} &amp;amp;\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\ &amp;amp;\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\ &amp;amp;\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\ &amp;amp;\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \bar{R^2}=0.9408\\ &amp;amp; &amp;amp;&amp;amp; F^{\ast}=143.92;&amp;amp;&amp;amp; p=0.0000 \end{alignedat} \end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-2&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;公式分行显示&lt;/h2&gt;
&lt;p&gt;本质上，这还是公式排版问题。但是需要结果代码语句和公式环境来共同解决。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if (k&amp;lt;=lm.n) {
    cat(
      &amp;quot;$$\\begin{equation}&amp;quot;,
      paste0(&amp;#39;\\begin{alignedat}{&amp;#39;,999,&amp;#39;}&amp;#39;),
      paste0(&amp;#39;&amp;amp;\\widehat{&amp;#39;,table_lm$name.y,&amp;#39;}=&amp;#39;,fun_line_eq(1,k),&amp;#39;\\\\&amp;#39;),
      paste0(&amp;#39;&amp;amp;\\text{(t)}&amp;#39;,fun_line_t(1,k),&amp;#39;\\\\&amp;#39;),
      paste0(&amp;#39;&amp;amp;\\text{(se)}&amp;#39;,fun_line_se(1,k),&amp;#39;\\\\&amp;#39;),
      paste0(&amp;#39;&amp;amp;\\text{(fitness)}&amp;#39;,
             &amp;#39;&amp;amp;&amp;amp; n=&amp;#39;,table_lm$n,&amp;quot;;&amp;quot;,
             &amp;#39;&amp;amp;&amp;amp; R^2=&amp;#39;,formatC(table_lm$R2, digits = 4,format = &amp;quot;f&amp;quot;),&amp;quot;;&amp;quot;,
             &amp;#39;&amp;amp;&amp;amp; \\bar{R^2}=&amp;#39;,formatC(table_lm$R2.adj, digits = 4,format = &amp;quot;f&amp;quot;),
             &amp;quot;\\\\&amp;quot;),
      paste0(&amp;#39;&amp;amp; &amp;#39;,
             &amp;#39;&amp;amp;&amp;amp; F^{\\ast}=&amp;#39;,formatC(table_lm$F.star, digits = 2,format = &amp;quot;f&amp;quot;),&amp;quot;;&amp;quot;,
             &amp;#39;&amp;amp;&amp;amp; p=&amp;#39;,formatC(table_lm$F.p, digits=4,format = &amp;quot;f&amp;quot;)),
      &amp;quot;\\end{alignedat}&amp;quot;,
      # default no equation label
      if (!is.null(lm.label)) {
        (paste0(&amp;#39;(\\#eq:&amp;#39;,lm.label,&amp;#39;)&amp;#39;))
      },
      &amp;quot;\\end{equation}$$&amp;quot;
      )
  } else if {
  ...
  }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;label&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;label的取舍&lt;/h2&gt;
&lt;p&gt;理论上，用一个if函数是可以搞定的。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# default no equation label
  if (!is.null(lm.label)) {
    (paste0(&amp;#39;(\\#eq:&amp;#39;,lm.label,&amp;#39;)&amp;#39;))
  }&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;那么组合起来大概就是：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lm.label &amp;lt;- &amp;quot;eq-SRF&amp;quot;

cat(
&amp;quot;\\begin{equation}&amp;quot;,
&amp;quot;\\begin{alignedat}{999}&amp;quot;,
&amp;quot;&amp;amp;\\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \\bar{R^2}=0.9408\\\\&amp;quot;,
      &amp;quot;&amp;amp; &amp;amp;&amp;amp; F^{\\ast}=143.92;&amp;amp;&amp;amp; p=0.0000&amp;quot;,
&amp;quot;\\end{alignedat}&amp;quot;,
# default no equation label
  if (!is.null(lm.label)) {
    (paste0(&amp;#39;(\\#eq:&amp;#39;,lm.label,&amp;#39;)&amp;#39;))
  },
&amp;quot;\\end{equation}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34; id=&#34;eq:eq-SRF&#34;&gt;\[\begin{equation} \begin{alignedat}{999} &amp;amp;\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\ &amp;amp;\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\ &amp;amp;\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\ &amp;amp;\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \bar{R^2}=0.9408\\ &amp;amp; &amp;amp;&amp;amp; F^{\ast}=143.92;&amp;amp;&amp;amp; p=0.0000 \\tag{1}t} (#eq:eq-SRF) \end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;问题是blog里不支持对label进行公式交叉引用；Xaringan里也不支持。只有bookdown或bookdown::render(out= html_document2)才支持。当然这个问题也不是很大：只要在Xanringan或blog里不输label就好了！如果写书，再加上label呗！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;“美元”焦虑！&lt;/h2&gt;
&lt;p&gt;Rmarkdown的公式世界里，比较喜欢铜臭味——美元符号。行内公式采用的是&lt;span class=&#34;math inline&#34;&gt;\(\$...\$\)&lt;/span&gt;形式，独立公式采用&lt;span class=&#34;math inline&#34;&gt;\(\$\$...\$\$\)&lt;/span&gt;形式。&lt;/p&gt;
&lt;p&gt;所以，记得要时刻保持“富有”！如下的美元符号：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(
&amp;quot;$$\\begin{equation}&amp;quot;,
&amp;quot;\\begin{alignedat}{999}&amp;quot;,
&amp;quot;&amp;amp;\\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \\bar{R^2}=0.9408\\\\&amp;quot;,
      &amp;quot;&amp;amp; &amp;amp;&amp;amp; F^{\\ast}=143.92;&amp;amp;&amp;amp; p=0.0000&amp;quot;,
&amp;quot;\\end{alignedat}&amp;quot;,
&amp;quot;\\end{equation}$$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\begin{equation} \begin{alignedat}{999} &amp;amp;\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\ &amp;amp;\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\ &amp;amp;\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\ &amp;amp;\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \bar{R^2}=0.9408\\ &amp;amp; &amp;amp;&amp;amp; F^{\ast}=143.92;&amp;amp;&amp;amp; p=0.0000 \end{alignedat} \end{equation}\]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;cat&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;小心猫（cat）！&lt;/h2&gt;
&lt;p&gt;理论上，&lt;code&gt;cat(, sep=&#34;\n&#34;)&lt;/code&gt;函数里只要设置&lt;code&gt;sep=&#34;\n&#34;&lt;/code&gt;就能保证换行，输出也很有层次和条理。&lt;/p&gt;
&lt;p&gt;但是你还是要保持美元“富有”，并小心猫（cat）的这个挠人小利爪（&lt;code&gt;sep=&#34;\n&#34;&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;换言之，下面的代码就可能会让你“很受伤”！&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cat(
&amp;quot;\\begin{equation}&amp;quot;,
&amp;quot;\\begin{alignedat}{999}&amp;quot;,
&amp;quot;&amp;amp;\\widehat{Y}=&amp;amp;&amp;amp;+17.81&amp;amp;&amp;amp;+0.62X\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(t)}&amp;amp;&amp;amp;(1.9238)&amp;amp;&amp;amp;(11.9968)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(se)}&amp;amp;&amp;amp;(9.2556)&amp;amp;&amp;amp;(0.0516)\\\\&amp;quot;,
      &amp;quot;&amp;amp;\\text{(fitness)}&amp;amp;&amp;amp; n=10;&amp;amp;&amp;amp; R^2=0.9473;&amp;amp;&amp;amp; \\bar{R^2}=0.9408\\\\&amp;quot;,
      &amp;quot;&amp;amp; &amp;amp;&amp;amp; F^{\\ast}=143.92;&amp;amp;&amp;amp; p=0.0000&amp;quot;,
&amp;quot;\\end{alignedat}&amp;quot;,
&amp;quot;\\end{equation}&amp;quot;,
sep= &amp;quot;\n&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-4&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;外部文档关联&lt;/h2&gt;
&lt;p&gt;如果完事顺利，你只需要在Rmardown里直接调用公式文件.R&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source(&amp;quot;external-math-equation.R&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Xaringan缘起：创建课程slide</title>
      <link>https://huhuaping.netlify.app/2019/02/24/xaringan-for-course-slide/</link>
      <pubDate>Sun, 24 Feb 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/02/24/xaringan-for-course-slide/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#前言&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 前言&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#逃离powerpoint拥抱html5&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 逃离PowerPoint，拥抱HTML5？&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#powerpoint的断舍离&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; PowerPoint的“断、舍、离”&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#html形式slide的前世今生&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; HTML形式slide的“前世今生”&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的优势和不足&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Xaringan的优势和不足&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的优势&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; Xaringan的优势&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#xaringan的不足&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; Xaringan的不足&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;前言&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 前言&lt;/h1&gt;
&lt;p&gt;现在对（本科）教学工作的要求，已经发生了很大的改变：教学的内容变得更加专业化和细分化（学生就业市场的倒逼）；教学过程/流程需要标准化（一切变得透明公开）；教学活动应该能够便于复制并规模化运行（课程最好能以公开课/慕课方式运作）；个性化教学和灵活性调整被反复强调（对学生多元考核、“一人一套试卷”）；其他方面。&lt;/p&gt;
&lt;p&gt;教师在讲台上的台前“艺术化”魅力（仪态、表情、音色等）已经不再如曾经那么重要；教师在台后的“技术性”设计（内容、互动、展示等）上升到了无与伦比的地位。&lt;/p&gt;
&lt;p&gt;尤其是对于哪些&lt;strong&gt;技术性课程&lt;/strong&gt;，如计量经济学（Econometrics）和统计学（Statistics），“技术性”设计必须要赶上这些教学新要求的呼声。（当你发现一位大学教师还在“坚持”使用Office2007，你一点都不要惊讶——经管现在已经是2019年了。）&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;逃离powerpoint拥抱html5&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 逃离PowerPoint，拥抱HTML5？&lt;/h1&gt;
&lt;p&gt;为什么要逃离PowerPoint，拥抱HTML形式的slide？下面分别来说一说。&lt;/p&gt;
&lt;div id=&#34;powerpoint的断舍离&#34; class=&#34;section level2&#34; number=&#34;2.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; PowerPoint的“断、舍、离”&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;office版本太过分散，ppt可能会上演各种“变形记”。（现在国内有很多学生，已经不能区分WPS和Office了。学生的毕业论文或作业提交，那酸爽，真是谁看谁知道。）&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ppt维护和更新的各种“梗”。最让我纠结的就是mathtype公式，神一般地会一夜之间“变砖”（倒腾几下，公式变图片，或者干脆显示不了），更不要说公式的重复使用和编辑修改。如果使用一些新技巧、新字体，那一定会让你记住“凡走过的都是一个一个的巨坑”。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;难以逾越数据、图形和模型分析的“天堑”。表格数据加总等分析基本等于不可能（事实上也可以关联excel，但是“关联越多，等价于羁绊越多”！）；数据图形化，你只能老老实实拷贝统计软件里的做好的图吧（泪奔！）；建模分析结果的调用，就更别提了（反复在多个软件窗口中切换和敲键盘，眼花缭乱的“骚操作”不说，最担心的还是手一抖怕敲错了结果啊！）。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;html形式slide的前世今生&#34; class=&#34;section level2&#34; number=&#34;2.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; HTML形式slide的“前世今生”&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;一个浏览器就够了。HTML是互联网世界最广泛使用的交流形式。每台电脑都会安装浏览器（chrome、firefox、IE…），但不是都会安装Microsoft office全家桶（365家庭版那可是每年500RMB啊，心疼一下下！）。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一份文本多种输出形态的终极需求。就像KTV里嗨唱切歌，老师们常常要在word、pdf、html、ppt、png等格式中不断切换啊。一个逗号或减号，在word里改了，那还得改ppt啊，就问你蛋疼不蛋疼。所以，仅维护一份文本，随时获得各种输出（html、word、ppt、slide…）简直就是人类共同的梦想啊。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“纯文本”就是你的最底层“话语”。一切的文字、代码、图形、格式、排版…，统统汇集于一份“纯文本”中！&lt;strong&gt;Plain Text&lt;/strong&gt;，正如其名，平铺直叙，朴素而不简单，包含了你所需的一切，你想说和想呈现的一切。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan的优势和不足&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Xaringan的优势和不足&lt;/h1&gt;
&lt;div id=&#34;xaringan的优势&#34; class=&#34;section level2&#34; number=&#34;3.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; Xaringan的优势&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;R语言和RMarkdown的应用就是它最大的优势。这赋予了教学准备工作更强的“生产力”：代码可重复利用、统计处理和分析报告完美整合。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xaringan Slide可以高度灵活的定制化。本质上形式的呈现，完全依赖于CSS技术，这与PowerPoint中的模板使用是完全不同的体验，效率上完全秒掉后者。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xaringan Slide可以完美转成pdf格式的slide。其实直接用Chrome浏览器打开HTML Slide不就完了嘛，这种格式转换的操作本来就是多此一举！总之，你说，世界需要pdf；于是Xaringan便说，给你pdf！&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;与GitHub版本控制技术融合。我想说的是，这是一种全新的师生交互和反馈机制！&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;xaringan的不足&#34; class=&#34;section level2&#34; number=&#34;3.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; Xaringan的不足&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;对行内公式支持不是很友好。比如&lt;span class=&#34;math inline&#34;&gt;\(\beta\)&lt;/span&gt;的实现代码&lt;code&gt;$\beta$&lt;/code&gt;必须要保持独立一行！一段话要是有很多这样的inline equation，那么xaringan::moon_reader文档就显得很破碎了。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;风格调整CSS技术的学习还是有一定成本的。换言之，制作一份自己喜欢的“专属”模板，还需要花费一些时间。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;强迫症的一些小细节。使用&lt;code&gt;knitr::kable()&lt;/code&gt;制表，转pdf时表格无法显示，替代办法就是用&lt;code&gt;DT::datatable()&lt;/code&gt;的表格风格，而它往往不是真正的Table风格！另外，就是windows环境下，不支持Rstudio面板Viewer中预览slide，只能在浏览器中预览。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Netlify系列1：个人网站开发“三剑客” (blogdown;github;netlify)</title>
      <link>https://huhuaping.netlify.app/2019/02/21/three-sord/</link>
      <pubDate>Thu, 21 Feb 2019 00:00:00 +0000</pubDate>
      <guid>https://huhuaping.netlify.app/2019/02/21/three-sord/</guid>
      <description>
&lt;script src=&#34;https://huhuaping.netlify.app/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#在rstudio中创建blogdown-site&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; 在Rstudio中创建blogdown site&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#利用git工具来管理github仓库&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; 利用git工具来管理github仓库&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#在netlify上关联github仓库并建站&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; 在netlify上关联github仓库并建站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#额外的问题&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; 额外的问题&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#config.toml配置&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; config.toml配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#版本控制github-repo下添加忽略文件&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; 版本控制（github repo）下添加忽略文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#用addin插件更新内容&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; 用addin插件更新内容&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#让博客文章post有目录节编号脚注&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4&lt;/span&gt; 让博客文章(post)有目录、节编号、脚注&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#post文章里插入图片&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.5&lt;/span&gt; post文章里插入图片&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#参考资料&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; 参考资料&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;“三剑”合璧持续性打造个人网站(blogdown; github; netlify)。&lt;/p&gt;
&lt;div id=&#34;在rstudio中创建blogdown-site&#34; class=&#34;section level1&#34; number=&#34;1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; 在Rstudio中创建blogdown site&lt;/h1&gt;
&lt;p&gt;blogdown的设置比较简单，教程里基本也说得清楚。具体操作时，还是需要注意以下几个要点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;选取中意的网站模板，比如学术型模板&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# for example, create a new site with the academic theme
blogdown::new_site(theme = &amp;quot;gcushen/hugo-academic&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个模板还内部支持&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/36&#34;&gt;数学公式显示&lt;/a&gt;！需要在Rmarkdown文档的yaml区域里设置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;math: true&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;设置全局选项（global options）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个是设置默认的“作者”和“文件格式”。需要在工作目录下新建一个.Rprofile文件：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;file.edit(&amp;#39;.Rprofile&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;文件里面的内容配置为:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;options(blogdown.ext = &amp;quot;.Rmd&amp;quot;, blogdown.author = &amp;quot;huhuaping&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;另外就是要配置工作文件下的config.toml文件，主要就是修改网站的名字：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Title of your site
title = &amp;quot;Huhuaping&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;最后要记得装载hugo，最重要得是弄清楚hugo_version（后面netlify建站时需要配置环境变量hugo_version，否则会&lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-netlify/&#34;&gt;报错255&lt;/a&gt;，二者应该要一致，且有最低版本要求）。在Rstudio里判明版本号的办法是：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# 安装hugo
install_hugo()

# 判明版本号
blogdown::hugo_version()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;利用git工具来管理github仓库&#34; class=&#34;section level1&#34; number=&#34;2&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; 利用git工具来管理github仓库&lt;/h1&gt;
&lt;p&gt;git版本控制工具，还是需要学会的。这里就列出一个很好的参考学习资源吧——&lt;a href=&#34;https://git-scm.com/book/zh/v2&#34;&gt;git book(多国语言版)&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;在netlify上关联github仓库并建站&#34; class=&#34;section level1&#34; number=&#34;3&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; 在netlify上关联github仓库并建站&lt;/h1&gt;
&lt;p&gt;如前所述，这里很重要的一步就是要记得设置hugo_version的环境变量，版本号需要与blogdown里安装的版本号一致。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;额外的问题&#34; class=&#34;section level1&#34; number=&#34;4&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; 额外的问题&lt;/h1&gt;
&lt;div id=&#34;config.toml配置&#34; class=&#34;section level2&#34; number=&#34;4.1&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; config.toml配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;baseurl存在的&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/114&#34;&gt;斜杠问题&lt;/a&gt;，可能会影响netlify建站更新。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;网页链接显示最好是稳定的。可以通过日期+slug的形式来固定，具体设置为：&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;[permalinks]
  post = &amp;quot;/:year/:month/:day/:slug/&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;版本控制github-repo下添加忽略文件&#34; class=&#34;section level2&#34; number=&#34;4.2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; 版本控制（github repo）下添加忽略文件&lt;/h2&gt;
&lt;p&gt;记得在工作目录下的.gitignore里添加忽视文件（否则会影响netlify建站更新）。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;public/&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;此外，还会引起master和dev分支的合并冲突！！&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;用addin插件更新内容&#34; class=&#34;section level2&#34; number=&#34;4.3&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; 用addin插件更新内容&lt;/h2&gt;
&lt;p&gt;提交新的博客文章(post)：最好使用Rstudio里Addin菜单中的New Post来写Rmd格式的博文。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;让博客文章post有目录节编号脚注&#34; class=&#34;section level2&#34; number=&#34;4.4&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4&lt;/span&gt; 让博客文章(post)有目录、节编号、脚注&lt;/h2&gt;
&lt;p&gt;目录（toc）和节编号（number_sections）可以在rmardown文件yaml头里设置&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;output:
  blogdown::html_page:
    toc: true
    number_sections: true&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;脚注的写法。正文里直接在脚注位置添加&lt;code&gt;[^1]&lt;/code&gt;，并在rmarkdown最后进行对应的注释说明：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[^1]: [Headings with automatic numbering](https://github.com/rstudio/blogdown/issues/140)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;post文章里插入图片&#34; class=&#34;section level2&#34; number=&#34;4.5&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.5&lt;/span&gt; post文章里插入图片&lt;/h2&gt;
&lt;p&gt;有两种插入图片的办法。不论如何，图片源文件默认都是放在&lt;code&gt;static/&lt;/code&gt;文件夹下&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采用markdown语言：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 源文件默认在`static/`文件夹下
![](/img/facet-multiple-geom.png)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/img/facet-multiple-geom.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;markdown语言方法插入图片&lt;/p&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;或者采用函数 &lt;code&gt;knitr::include_graphics()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 源文件默认在`static/`文件夹下
knitr::include_graphics(&amp;quot;/pic/facet-multiple-geom.png&amp;quot;, error = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:unnamed-chunk-1&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;https://huhuaping.netlify.app/pic/facet-multiple-geom.png&#34; alt=&#34;include_graphics函数方法插入图片&#34;  /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 4.1: include_graphics函数方法插入图片
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;参考资料&#34; class=&#34;section level1&#34; number=&#34;5&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; 参考资料&lt;/h1&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/140&#34;&gt;Headings with automatic numbering&lt;/a&gt;&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/rstudio/blogdown/issues/184#issuecomment-323073705&#34;&gt;knitr::include_graphics in blogdown&lt;/a&gt;&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
