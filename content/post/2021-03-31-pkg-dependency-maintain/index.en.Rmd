---
title: project管理：renv维护
author: huhuaping
date: '2021-03-31'
slug: pkg-dependency-maintain
categories:
  - R
tags:
  - renv
subtitle: ''
summary: '我们有时需要分享project repo，并希望在他人或其他设备上，实现一致的可复现效果（reproducibility）。主要有两种常用情形，一是自己在多个设备上工作，二是跟人协作。R包`renv`主要目标也是实现这种可复现效果，其核心是维护和管理R版本以及各种R包版本。'
authors: [胡华平]
lastmod: '2021-03-31T10:03:22+08:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
output:
  blogdown::html_page:
    toc: true
    number_sections: true
---

我们有时需要分享project repo，并希望在他人或其他设备上，实现一致的可复现效果（reproducibility）。主要有两种常用情形，一是自己在多个设备上工作，二是跟人协作。R包`renv`主要目标也是实现这种可复现效果，其核心是维护和管理R版本以及各种R包版本（[官方说明](https://rstudio.github.io/renv/articles/renv.html)）。

# 基本逻辑

## 使用版本控制流程

## 注意R包的安装来源


# 多设备工作要点

## X设备如何安装Y设备中已有的R包？

R包的安装还是一个必须的过程，renv的存在也并不能改变这一点。

## git同步到远端时，renv::snapshot()是自动实现的么？

`renv::history()`可以查看R包的镜像历史，它会注明git远端的提交备注（commit）信息。

## project多个git分枝，如何配置renv？

这种需求比较特殊：不同的分枝branch需要用到不同的库library。renv可以实现这一点。（请[参看](https://stackoverflow.com/questions/62557319/renv-and-git-interaction-r)）

## 能否将A project 环境迁移到B project？

renv可以实现这一点。但是正确的操作应该是直接复制renv.lock文件，然后再在B project里执行`renv::restore`。（请[参看](https://stackoverflow.com/questions/62557319/renv-and-git-interaction-r)）

