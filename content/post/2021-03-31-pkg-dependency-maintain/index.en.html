---
title: project管理：renv维护
author: huhuaping
date: '2021-03-31'
slug: pkg-dependency-maintain
categories:
  - R
tags:
  - renv
subtitle: ''
summary: '我们有时需要分享project repo，并希望在他人或其他设备上，实现一致的可复现效果（reproducibility）。主要有两种常用情形，一是自己在多个设备上工作，二是跟人协作。R包`renv`主要目标也是实现这种可复现效果，其核心是维护和管理R版本以及各种R包版本。'
authors: [胡华平]
lastmod: '2021-03-31T10:03:22+08:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
output:
  blogdown::html_page:
    toc: true
    number_sections: true
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#基本逻辑"><span class="toc-section-number">1</span> 基本逻辑</a>
<ul>
<li><a href="#使用版本控制流程"><span class="toc-section-number">1.1</span> 使用版本控制流程</a></li>
<li><a href="#注意r包的安装来源"><span class="toc-section-number">1.2</span> 注意R包的安装来源</a></li>
</ul></li>
<li><a href="#多设备工作要点"><span class="toc-section-number">2</span> 多设备工作要点</a>
<ul>
<li><a href="#x设备如何安装y设备中已有的r包"><span class="toc-section-number">2.1</span> X设备如何安装Y设备中已有的R包？</a></li>
<li><a href="#git同步到远端时renvsnapshot是自动实现的么"><span class="toc-section-number">2.2</span> git同步到远端时，renv::snapshot()是自动实现的么？</a></li>
<li><a href="#project多个git分枝如何配置renv"><span class="toc-section-number">2.3</span> project多个git分枝，如何配置renv？</a></li>
<li><a href="#能否将a-project-环境迁移到b-project"><span class="toc-section-number">2.4</span> 能否将A project 环境迁移到B project？</a></li>
</ul></li>
</ul>
</div>

<p>我们有时需要分享project repo，并希望在他人或其他设备上，实现一致的可复现效果（reproducibility）。主要有两种常用情形，一是自己在多个设备上工作，二是跟人协作。R包<code>renv</code>主要目标也是实现这种可复现效果，其核心是维护和管理R版本以及各种R包版本（<a href="https://rstudio.github.io/renv/articles/renv.html">官方说明</a>）。</p>
<div id="基本逻辑" class="section level1" number="1">
<h1><span class="header-section-number">1</span> 基本逻辑</h1>
<div id="使用版本控制流程" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> 使用版本控制流程</h2>
</div>
<div id="注意r包的安装来源" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> 注意R包的安装来源</h2>
</div>
</div>
<div id="多设备工作要点" class="section level1" number="2">
<h1><span class="header-section-number">2</span> 多设备工作要点</h1>
<div id="x设备如何安装y设备中已有的r包" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> X设备如何安装Y设备中已有的R包？</h2>
<p>R包的安装还是一个必须的过程，renv的存在也并不能改变这一点。</p>
</div>
<div id="git同步到远端时renvsnapshot是自动实现的么" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> git同步到远端时，renv::snapshot()是自动实现的么？</h2>
<p><code>renv::history()</code>可以查看R包的镜像历史，它会注明git远端的提交备注（commit）信息。</p>
</div>
<div id="project多个git分枝如何配置renv" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> project多个git分枝，如何配置renv？</h2>
<p>这种需求比较特殊：不同的分枝branch需要用到不同的库library。renv可以实现这一点。（请<a href="https://stackoverflow.com/questions/62557319/renv-and-git-interaction-r">参看</a>）</p>
</div>
<div id="能否将a-project-环境迁移到b-project" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> 能否将A project 环境迁移到B project？</h2>
<p>renv可以实现这一点。但是正确的操作应该是直接复制renv.lock文件，然后再在B project里执行<code>renv::restore</code>。（请<a href="https://stackoverflow.com/questions/62557319/renv-and-git-interaction-r">参看</a>）</p>
</div>
</div>
