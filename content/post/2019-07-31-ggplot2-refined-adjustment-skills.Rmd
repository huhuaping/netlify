---
title: ggplot2绘图细节及美化技巧
author: huhuaping
date: '`r Sys.Date()-1`'
slug: ggplot2-refined-adjustment-skills
categories:
  - graph
tags:
  - ggplot2
image:
  caption: ''
  focal_point: ''
---

## 调整轴题与轴标签之间的间距

[Increase distance between text and title on the y-axis
](https://stackoverflow.com/questions/14487188/increase-distance-between-text-and-title-on-the-y-axis)

```
ggplot(mpg, aes(cty, hwy)) + geom_point()+
  theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
```

## geom_text()如何控制字体大小

首先，geom_text()的size是按mm计量的。所以并不是跟font size一样的计量规则。所以不要混同二者的度量尺度。（参看[The size in geom_text is not a font size](https://github.com/tidyverse/ggplot2/issues/1828)）

其次，ggplot中字体控制的关系如下。简言之：geom_text()是单独控制字体的！！（参看：[ggplot geom_text font size control](https://stackoverflow.com/questions/25061822/ggplot-geom-text-font-size-control)）

```
p <- p + theme(axis.text = element_text(size = 15)) # changes axis labels

p <- p + theme(axis.title = element_text(size = 25)) # change axis titles

p <- p + theme(text = element_text(size = 10)) # this will change all text size 
                                                             # (except geom_text)
```

## 如何给geom_hline()添加图例

给geom_hline[添加图例](https://stackoverflow.com/questions/39119917/how-to-add-a-legend-to-hline)

## 保持读取csv编码正确

[编码正确](https://stackoverflow.com/questions/46996501/readrread-csv-issue-chinese-character-becomes-messy-codes)